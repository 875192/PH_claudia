   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"button.c"
  21              	.Ltext0:
  22              		.file 1 "../button.c"
 3100              		.align	2
 3102              	celda_poner_valor:
 3103              	.LFB1:
   1:../celda.h    **** /*
   2:../celda.h    ****  * Asignatura: Proyecto hardware
   3:../celda.h    ****  * Fecha: 10/11/2025
   4:../celda.h    ****  * Autores: Claudia Mateo Cuellar 871961
   5:../celda.h    ****  * Archivo: celda.h
   6:../celda.h    ****  * Descripción: Utilidades para manipular una CELDA de Sudoku
   7:../celda.h    ****  */
   8:../celda.h    **** 
   9:../celda.h    **** #ifndef CELDA_H
  10:../celda.h    **** #define CELDA_H
  11:../celda.h    **** 
  12:../celda.h    **** #include <inttypes.h>
  13:../celda.h    **** 
  14:../celda.h    **** /* Cada celda se codifica en 16 bits:
  15:../celda.h    ****  * bits [15:7]: vector de candidatos (bit = 0 => candidato, 1 => no candidato)
  16:../celda.h    ****  * bit 6:     no usado
  17:../celda.h    ****  * bit 5:     error flag
  18:../celda.h    ****  * bit 4:     pista flag
  19:../celda.h    ****  * bits [3:0]: valor (0 = vacío, 1..9 valores)
  20:../celda.h    ****  */
  21:../celda.h    **** 
  22:../celda.h    **** enum
  23:../celda.h    **** {
  24:../celda.h    ****     BIT_CANDIDATOS = 7
  25:../celda.h    **** };
  26:../celda.h    **** 
  27:../celda.h    **** typedef uint16_t CELDA;
  28:../celda.h    **** 
  29:../celda.h    **** /* Funciones en línea para poder definirlas en el header sin provocar
  30:../celda.h    ****    multiple definition al enlazar. Usar static inline para portabilidad. */
  31:../celda.h    **** 
  32:../celda.h    **** static inline void celda_eliminar_candidato(CELDA *celdaptr, uint8_t valor)
  33:../celda.h    **** {
  34:../celda.h    ****     /* Poner a 1 el bit correspondiente para marcar NO candidato */
  35:../celda.h    ****     *celdaptr |= (uint16_t)(1u << (BIT_CANDIDATOS + (valor - 1)));
  36:../celda.h    **** }
  37:../celda.h    **** 
  38:../celda.h    **** static inline void celda_poner_valor(CELDA *celdaptr, uint8_t val)
  39:../celda.h    **** {
 3104              		.loc 8 39 0
 3105              		.cfi_startproc
 3106              		@ Function supports interworking.
 3107              		@ args = 0, pretend = 0, frame = 8
 3108              		@ frame_needed = 1, uses_anonymous_args = 0
 3109 0000 0DC0A0E1 		mov	ip, sp
 3110              	.LCFI0:
 3111              		.cfi_def_cfa_register 12
 3112 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3113 0008 04B04CE2 		sub	fp, ip, #4
 3114              		.cfi_offset 14, -8
 3115              		.cfi_offset 13, -12
 3116              		.cfi_offset 11, -16
 3117              	.LCFI1:
 3118              		.cfi_def_cfa 11, 4
 3119 000c 08D04DE2 		sub	sp, sp, #8
 3120 0010 10000BE5 		str	r0, [fp, #-16]
 3121 0014 0130A0E1 		mov	r3, r1
 3122 0018 11304BE5 		strb	r3, [fp, #-17]
  40:../celda.h    ****     /* Mantener los bits altos (candidatos/flags) y escribir valor en bits [3:0] */
  41:../celda.h    ****     *celdaptr = (uint16_t)((*celdaptr & 0xFFF0u) | (val & 0x0Fu));
 3123              		.loc 8 41 0
 3124 001c 10301BE5 		ldr	r3, [fp, #-16]
 3125 0020 B030D3E1 		ldrh	r3, [r3, #0]
 3126 0024 0F30C3E3 		bic	r3, r3, #15
 3127 0028 0338A0E1 		mov	r3, r3, asl #16
 3128 002c 2328A0E1 		mov	r2, r3, lsr #16
 3129 0030 11305BE5 		ldrb	r3, [fp, #-17]	@ zero_extendqisi2
 3130 0034 0338A0E1 		mov	r3, r3, asl #16
 3131 0038 2338A0E1 		mov	r3, r3, lsr #16
 3132 003c 0F3003E2 		and	r3, r3, #15
 3133 0040 0338A0E1 		mov	r3, r3, asl #16
 3134 0044 2338A0E1 		mov	r3, r3, lsr #16
 3135 0048 033082E1 		orr	r3, r2, r3
 3136 004c 0338A0E1 		mov	r3, r3, asl #16
 3137 0050 2328A0E1 		mov	r2, r3, lsr #16
 3138 0054 10301BE5 		ldr	r3, [fp, #-16]
 3139 0058 B020C3E1 		strh	r2, [r3, #0]	@ movhi
  42:../celda.h    **** }
 3140              		.loc 8 42 0
 3141 005c 0CD04BE2 		sub	sp, fp, #12
 3142 0060 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3143 0064 1EFF2FE1 		bx	lr
 3144              		.cfi_endproc
 3145              	.LFE1:
 3147              		.comm	CheckTSP,4,4
 3148              		.comm	oneTouch,4,4
 3149              		.comm	Vx,4,4
 3150              		.comm	Vy,4,4
 3151              		.comm	Xmax,4,4
 3152              		.comm	Ymax,4,4
 3153              		.comm	Xmin,4,4
 3154              		.comm	Ymin,4,4
 3155              		.bss
 3156              		.align	2
 3157              	modo_zoom:
 3158 0000 00000000 		.space	4
 3159              		.align	2
 3160              	region_zoom_fila:
 3161 0004 00000000 		.space	4
 3162              		.align	2
 3163              	region_zoom_col:
 3164 0008 00000000 		.space	4
 3165              		.align	2
 3166              	celda_candidatos_fila:
 3167 000c 00000000 		.space	4
 3168              		.align	2
 3169              	celda_candidatos_col:
 3170 0010 00000000 		.space	4
 3171              		.data
 3172              		.align	2
 3175              	botones:
 3176 0000 00       		.byte	0
 3177 0001 000000   		.space	3
 3178 0004 00000000 		.word	0
 3179 0008 04       		.byte	4
 3180 0009 06       		.byte	6
 3181 000a 0000     		.space	2
 3182 000c 00000000 		.word	0
 3183 0010 00000000 		.word	0
 3184 0014 00       		.byte	0
 3185 0015 000000   		.space	3
 3186 0018 00       		.byte	0
 3187 0019 000000   		.space	3
 3188 001c 00000000 		.word	0
 3189 0020 08       		.byte	8
 3190 0021 07       		.byte	7
 3191 0022 0000     		.space	2
 3192 0024 00000000 		.word	0
 3193 0028 00000000 		.word	0
 3194 002c 00       		.byte	0
 3195 002d 000000   		.space	3
 3196              		.bss
 3197              	estado_juego:
 3198 0014 00       		.space	1
 3199              		.data
 3202              	numero_actual:
 3203 0030 01       		.byte	1
 3204              		.bss
 3205              	fila_seleccionada:
 3206 0015 00       		.space	1
 3207              	columna_seleccionada:
 3208 0016 00       		.space	1
 3209              	evento_boton_derecho:
 3210 0017 00       		.space	1
 3211              	evento_boton_izquierdo:
 3212 0018 00       		.space	1
 3213              	juego_iniciado:
 3214 0019 00       		.space	1
 3215 001a 0000     		.align	2
 3216              	contador_error:
 3217 001c 00000000 		.space	4
 3218              	pantalla_inicial_mostrada:
 3219 0020 00       		.space	1
 3220              	tablero_dibujado:
 3221 0021 00       		.space	1
 3222              		.section	.rodata
 3223              		.align	2
 3226              	tecla_mapa:
 3227 0000 01       		.byte	1
 3228 0001 02       		.byte	2
 3229 0002 03       		.byte	3
 3230 0003 FF       		.byte	-1
 3231 0004 04       		.byte	4
 3232 0005 05       		.byte	5
 3233 0006 06       		.byte	6
 3234 0007 FF       		.byte	-1
 3235 0008 07       		.byte	7
 3236 0009 08       		.byte	8
 3237 000a 09       		.byte	9
 3238 000b FF       		.byte	-1
 3239 000c FF       		.byte	-1
 3240 000d 00       		.byte	0
 3241 000e FF       		.byte	-1
 3242 000f FF       		.byte	-1
 3243              		.bss
 3244              	teclado_estado:
 3245 0022 00       		.space	1
 3246 0023 00       		.align	2
 3247              	teclado_timer:
 3248 0024 00000000 		.space	4
 3249              		.data
 3252              	evento_teclado_digito:
 3253 0031 FF       		.byte	-1
 3254              		.bss
 3255              		.align	2
 3256              	tiempo_inicio:
 3257 0028 00000000 		.space	4
 3258              		.align	2
 3259              	tiempo_fin:
 3260 002c 00000000 		.space	4
 3261              		.align	2
 3262              	resta:
 3263 0030 00000000 		.space	4
 3264              		.align	2
 3265              	tiempo_inicio_partida:
 3266 0034 00000000 		.space	4
 3267              		.align	2
 3268              	ultimo_tiempo_mostrado:
 3269 0038 00000000 		.space	4
 3270              		.text
 3271              		.align	2
 3272              		.global	Eint4567_ISR
 3274              	Eint4567_ISR:
 3275              	.LFB2:
   1:../button.c   **** ﻿/*
   2:../button.c   ****  * Asignatura: Proyecto hardware
   3:../button.c   ****  * Fecha: 10/11/2025
   4:../button.c   ****  * Autores: Claudia Mateo Cuellar 871961
   5:../button.c   ****  * Archivo: button.c
   6:../button.c   ****  * DescripciÃ³n: Funciones de manejo de los pulsadores (EINT6-7) y teclado matricial
   7:../button.c   ****  */
   8:../button.c   **** 
   9:../button.c   **** #include "button.h"
  10:../button.c   **** #include "8led.h"
  11:../button.c   **** #include "44blib.h"
  12:../button.c   **** #include "44b.h"
  13:../button.c   **** #include "def.h"
  14:../button.c   **** #include "cola.h"
  15:../button.c   **** #include "eventos.h"
  16:../button.c   **** #include "timer2.h"
  17:../button.c   **** #include "celda.h"
  18:../button.c   **** #include "sudoku_2025.h"
  19:../button.c   **** #include "tableros.h"
  20:../button.c   **** #include "sudoku_lcd.h"
  21:../button.c   **** #include "lcd.h"
  22:../button.c   **** #include "tp.h" // Para touchscreen
  23:../button.c   **** 
  24:../button.c   **** // AJUSTA ESTOS VALORES SEGÃšN DONDE SE DIBUJE TU TABLERO EN LA LCD
  25:../button.c   **** #define TABLERO_X_INI 34 // PÃ­xel X donde empieza el borde izquierdo del tablero
  26:../button.c   **** #define TABLERO_Y_INI 14 // PÃ­xel Y donde empieza el borde superior
  27:../button.c   **** #define ANCHO_CELDA 24   // Ancho de cada celda en pÃ­xeles (aprox)
  28:../button.c   **** #define ALTO_CELDA 24    // Alto de cada celda
  29:../button.c   **** 
  30:../button.c   **** // --- NUEVAS VARIABLES PARA EL ZOOM ---
  31:../button.c   **** static int modo_zoom = 0;             // 0 = Vista Normal, 1 = Vista Zoom Región, 2 = Vista Zoom C
  32:../button.c   **** static int region_zoom_fila = 0;      // 0, 3 o 6 (Fila inicial de la regiÃ³n)
  33:../button.c   **** static int region_zoom_col = 0;       // 0, 3 o 6 (Columna inicial de la regiÃ³n)
  34:../button.c   **** static int celda_candidatos_fila = 0; // Fila de la celda para seleccionar candidatos
  35:../button.c   **** static int celda_candidatos_col = 0;  // Columna de la celda para seleccionar candidatos
  36:../button.c   **** 
  37:../button.c   **** // Configuración visual del Zoom (Celdas grandes) - Más arriba para que no se corte
  38:../button.c   **** #define ZOOM_CELDA_SIZE 60
  39:../button.c   **** #define ZOOM_X_INI 80 // Centrado en pantalla 320px: (320-180)/2 = 70, ajustado a 80
  40:../button.c   **** #define ZOOM_Y_INI 40 // Más arriba para que no se corte
  41:../button.c   **** 
  42:../button.c   **** // Configuración de la flecha de salida
  43:../button.c   **** #define FLECHA_X 20
  44:../button.c   **** #define FLECHA_Y 50
  45:../button.c   **** #define FLECHA_WIDTH 30
  46:../button.c   **** #define FLECHA_HEIGHT 20
  47:../button.c   **** 
  48:../button.c   **** // Configuración visual del Zoom de candidatos (números 1-9 y 0) - Más hacia la derecha
  49:../button.c   **** #define CANDIDATOS_CELDA_SIZE 50
  50:../button.c   **** #define CANDIDATOS_X_INI 100 // Movido más hacia la derecha para evitar colisión con flecha
  51:../button.c   **** #define CANDIDATOS_Y_INI 30
  52:../button.c   **** #define CANDIDATOS_COLS 5 // 5 columnas: 1-5 arriba, 6-9+0 abajo
  53:../button.c   **** 
  54:../button.c   **** /**
  55:../button.c   ****  * CONSTANTES BOTONES
  56:../button.c   ****  */
  57:../button.c   **** #define TRP 200000
  58:../button.c   **** #define TEP 100000
  59:../button.c   **** #define TRD 50000
  60:../button.c   **** #define PULSACION_CORTA_US 500000
  61:../button.c   **** #define AUTOREP_T_US 300000
  62:../button.c   **** 
  63:../button.c   **** #define BOTON_EINT6 0
  64:../button.c   **** #define BOTON_EINT7 1
  65:../button.c   **** #define NUM_BOTONES 2
  66:../button.c   **** 
  67:../button.c   **** #define TICKS_MOSTRAR_ERROR 300 // Aumentado de 100 a 300 para mÃ¡s tiempo de error
  68:../button.c   **** 
  69:../button.c   **** /**
  70:../button.c   ****  * CONSTANTES TECLADO MATRICIAL
  71:../button.c   ****  */
  72:../button.c   **** #define TECLADO_ADDR_BASE 0x06000000
  73:../button.c   **** #define TECLADO_FILA0 (TECLADO_ADDR_BASE | 0xFD)
  74:../button.c   **** #define TECLADO_FILA1 (TECLADO_ADDR_BASE | 0xFB)
  75:../button.c   **** #define TECLADO_FILA2 (TECLADO_ADDR_BASE | 0xF7)
  76:../button.c   **** #define TECLADO_FILA3 (TECLADO_ADDR_BASE | 0xEF)
  77:../button.c   **** 
  78:../button.c   **** #define TECLADO_TRP_US 20000
  79:../button.c   **** #define TECLADO_TRD_US 100000
  80:../button.c   **** 
  81:../button.c   **** /**
  82:../button.c   ****  * TIPOS
  83:../button.c   ****  */
  84:../button.c   **** typedef enum
  85:../button.c   **** {
  86:../button.c   ****     e_reposo = 0,
  87:../button.c   ****     e_entrando,
  88:../button.c   ****     e_esperando,
  89:../button.c   ****     e_soltado
  90:../button.c   **** } estado_boton_t;
  91:../button.c   **** 
  92:../button.c   **** typedef enum
  93:../button.c   **** {
  94:../button.c   ****     ESTADO_INICIAL = 0,
  95:../button.c   ****     ESTADO_SELEC_FILA,
  96:../button.c   ****     ESTADO_SELEC_COLUMNA,
  97:../button.c   ****     ESTADO_SELEC_VALOR,
  98:../button.c   ****     ESTADO_MOSTRANDO_ERROR
  99:../button.c   **** } estado_juego_t;
 100:../button.c   **** 
 101:../button.c   **** typedef enum
 102:../button.c   **** {
 103:../button.c   ****     TECLADO_REPOSO = 0,
 104:../button.c   ****     TECLADO_ESPERANDO_TRP,
 105:../button.c   ****     TECLADO_ESCANEANDO,
 106:../button.c   ****     TECLADO_ESPERANDO_TRD
 107:../button.c   **** } estado_teclado_t;
 108:../button.c   **** 
 109:../button.c   **** typedef struct
 110:../button.c   **** {
 111:../button.c   ****     estado_boton_t estado;
 112:../button.c   ****     unsigned int timer;
 113:../button.c   ****     uint8_t codigo_int;
 114:../button.c   ****     uint8_t bit_pin;
 115:../button.c   ****     unsigned int inicio_pulsacion;
 116:../button.c   ****     unsigned int ultimo_auto;
 117:../button.c   ****     uint8_t auto_iniciado;
 118:../button.c   **** } contexto_boton_t;
 119:../button.c   **** 
 120:../button.c   **** /**
 121:../button.c   ****  * VARIABLES GLOBALES
 122:../button.c   ****  */
 123:../button.c   **** static contexto_boton_t botones[NUM_BOTONES] = {
 124:../button.c   ****     {e_reposo, 0, 4, 6, 0, 0, 0},
 125:../button.c   ****     {e_reposo, 0, 8, 7, 0, 0, 0}};
 126:../button.c   **** 
 127:../button.c   **** static estado_juego_t estado_juego = ESTADO_INICIAL;
 128:../button.c   **** static uint8_t numero_actual = 1;
 129:../button.c   **** static uint8_t fila_seleccionada = 0;
 130:../button.c   **** static uint8_t columna_seleccionada = 0;
 131:../button.c   **** static volatile uint8_t evento_boton_derecho = 0;
 132:../button.c   **** static volatile uint8_t evento_boton_izquierdo = 0;
 133:../button.c   **** static volatile uint8_t juego_iniciado = 0;
 134:../button.c   **** static int contador_error = 0;
 135:../button.c   **** static uint8_t pantalla_inicial_mostrada = 0;
 136:../button.c   **** static uint8_t tablero_dibujado = 0;
 137:../button.c   **** 
 138:../button.c   **** /* Teclado matricial */
 139:../button.c   **** static const uint8_t tecla_mapa[4][4] = {
 140:../button.c   ****     {1, 2, 3, 0xFF},
 141:../button.c   ****     {4, 5, 6, 0xFF},
 142:../button.c   ****     {7, 8, 9, 0xFF},
 143:../button.c   ****     {0xFF, 0, 0xFF, 0xFF}};
 144:../button.c   **** 
 145:../button.c   **** static estado_teclado_t teclado_estado = TECLADO_REPOSO;
 146:../button.c   **** static unsigned int teclado_timer = 0;
 147:../button.c   **** static volatile uint8_t evento_teclado_digito = 0xFF;
 148:../button.c   **** static volatile uint32_t tiempo_inicio;
 149:../button.c   **** static volatile uint32_t tiempo_fin;
 150:../button.c   **** static volatile uint32_t resta;
 151:../button.c   **** 
 152:../button.c   **** /* Variables para tiempo de partida */
 153:../button.c   **** static volatile uint32_t tiempo_inicio_partida = 0;
 154:../button.c   **** static uint32_t ultimo_tiempo_mostrado = 0;
 155:../button.c   **** 
 156:../button.c   **** /* Prototipos de funciones estÃ¡ticas */
 157:../button.c   **** static void procesar_rebote(int boton);
 158:../button.c   **** static inline uint8_t teclado_leer_columnas(volatile uint8_t *addr);
 159:../button.c   **** static uint8_t teclado_escanear(void);
 160:../button.c   **** static void estado_inicial(void);
 161:../button.c   **** static void estado_selec_fila(void);
 162:../button.c   **** static void estado_selec_columna(void);
 163:../button.c   **** static void estado_selec_valor(void);
 164:../button.c   **** static void estado_mostrando_error(void);
 165:../button.c   **** static void mostrar_tiempo_partida(void);
 166:../button.c   **** static void resetear_tiempo_partida(void);
 167:../button.c   **** static void mostrar_victoria_con_tiempo(void);
 168:../button.c   **** static void mostrar_partida_terminada(void);
 169:../button.c   **** static void limpiar_todos_eventos(void);
 170:../button.c   **** static void dibujar_zoom_region(void);
 171:../button.c   **** static void dibujar_flecha_salida(void);
 172:../button.c   **** static void dibujar_zoom_candidatos(uint8_t fila, uint8_t columna);
 173:../button.c   **** static int procesar_toque_candidatos(int x, int y);
 174:../button.c   **** static uint8_t es_celda_pista(uint8_t fila, uint8_t columna);
 175:../button.c   **** static uint8_t es_numero_candidato(CELDA celda, uint8_t numero);
 176:../button.c   **** static uint8_t es_numero_candidato(CELDA celda, uint8_t numero);
 177:../button.c   **** 
 178:../button.c   **** /* Prototipos adicionales para detecciÃ³n de errores */
 179:../button.c   **** static void limpiar_marcas_error(void);
 180:../button.c   **** static uint8_t verificar_tablero_completo(void);
 181:../button.c   **** static void finalizar_partida_completa(void);
 182:../button.c   **** static int detectar_y_marcar_errores_celda(uint8_t f, uint8_t c, uint8_t valor);
 183:../button.c   **** static void limpiar_errores_visuales(void);
 184:../button.c   **** 
 185:../button.c   **** /**
 186:../button.c   ****  * ISR EINT4567
 187:../button.c   ****  */
 188:../button.c   **** void Eint4567_ISR(void) __attribute__((interrupt("IRQ")));
 189:../button.c   **** void Eint4567_ISR(void)
 190:../button.c   **** {
 3276              		.loc 1 190 0
 3277              		.cfi_startproc
 3278              		@ Interrupt Service Routine.
 3279              		@ args = 0, pretend = 0, frame = 8
 3280              		@ frame_needed = 1, uses_anonymous_args = 0
 3281 0068 04C02DE5 		str	ip, [sp, #-4]!
 3282 006c 0DC0A0E1 		mov	ip, sp
 3283              	.LCFI2:
 3284              		.cfi_def_cfa_register 12
 3285 0070 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 3286 0074 04B04CE2 		sub	fp, ip, #4
 3287              		.cfi_offset 14, -8
 3288              		.cfi_offset 13, -12
 3289              		.cfi_offset 11, -16
 3290              		.cfi_offset 3, -20
 3291              		.cfi_offset 2, -24
 3292              		.cfi_offset 1, -28
 3293              		.cfi_offset 0, -32
 3294              	.LCFI3:
 3295              		.cfi_def_cfa 11, 4
 3296 0078 08D04DE2 		sub	sp, sp, #8
 191:../button.c   ****     int which_int = rEXTINTPND;
 3297              		.loc 1 191 0
 3298 007c 98319FE5 		ldr	r3, .L10
 3299 0080 003093E5 		ldr	r3, [r3, #0]
 3300 0084 24300BE5 		str	r3, [fp, #-36]
 192:../button.c   ****     // Para el calculo del TRP y TRD
 193:../button.c   ****     tiempo_inicio = timer2_count();
 3301              		.loc 1 193 0
 3302 0088 FEFFFFEB 		bl	timer2_count
 3303 008c 0020A0E1 		mov	r2, r0
 3304 0090 88319FE5 		ldr	r3, .L10+4
 3305 0094 002083E5 		str	r2, [r3, #0]
 194:../button.c   **** 
 195:../button.c   ****     int i;
 196:../button.c   **** 
 197:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 3306              		.loc 1 197 0
 3307 0098 0030A0E3 		mov	r3, #0
 3308 009c 20300BE5 		str	r3, [fp, #-32]
 3309 00a0 4C0000EA 		b	.L3
 3310              	.L8:
 198:../button.c   ****     {
 199:../button.c   ****         if (which_int == botones[i].codigo_int && botones[i].estado == e_reposo)
 3311              		.loc 1 199 0
 3312 00a4 78019FE5 		ldr	r0, .L10+8
 3313 00a8 20201BE5 		ldr	r2, [fp, #-32]
 3314 00ac 0810A0E3 		mov	r1, #8
 3315 00b0 0230A0E1 		mov	r3, r2
 3316 00b4 8330A0E1 		mov	r3, r3, asl #1
 3317 00b8 023083E0 		add	r3, r3, r2
 3318 00bc 8331A0E1 		mov	r3, r3, asl #3
 3319 00c0 033080E0 		add	r3, r0, r3
 3320 00c4 013083E0 		add	r3, r3, r1
 3321 00c8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3322 00cc 0320A0E1 		mov	r2, r3
 3323 00d0 24301BE5 		ldr	r3, [fp, #-36]
 3324 00d4 030052E1 		cmp	r2, r3
 3325 00d8 3B00001A 		bne	.L4
 3326              		.loc 1 199 0 is_stmt 0 discriminator 1
 3327 00dc 40119FE5 		ldr	r1, .L10+8
 3328 00e0 20201BE5 		ldr	r2, [fp, #-32]
 3329 00e4 0230A0E1 		mov	r3, r2
 3330 00e8 8330A0E1 		mov	r3, r3, asl #1
 3331 00ec 023083E0 		add	r3, r3, r2
 3332 00f0 8331A0E1 		mov	r3, r3, asl #3
 3333 00f4 033081E0 		add	r3, r1, r3
 3334 00f8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3335 00fc 000053E3 		cmp	r3, #0
 3336 0100 3100001A 		bne	.L4
 200:../button.c   ****         {
 201:../button.c   ****             // Para el calculo del TRP y TRD
 202:../button.c   ****             cola_depuracion(2, tiempo_inicio, 2);
 3337              		.loc 1 202 0 is_stmt 1
 3338 0104 14319FE5 		ldr	r3, .L10+4
 3339 0108 003093E5 		ldr	r3, [r3, #0]
 3340 010c 0200A0E3 		mov	r0, #2
 3341 0110 0310A0E1 		mov	r1, r3
 3342 0114 0220A0E3 		mov	r2, #2
 3343 0118 FEFFFFEB 		bl	cola_depuracion
 203:../button.c   **** 
 204:../button.c   ****             botones[i].estado = e_entrando;
 3344              		.loc 1 204 0
 3345 011c 00119FE5 		ldr	r1, .L10+8
 3346 0120 20201BE5 		ldr	r2, [fp, #-32]
 3347 0124 0230A0E1 		mov	r3, r2
 3348 0128 8330A0E1 		mov	r3, r3, asl #1
 3349 012c 023083E0 		add	r3, r3, r2
 3350 0130 8331A0E1 		mov	r3, r3, asl #3
 3351 0134 033081E0 		add	r3, r1, r3
 3352 0138 0120A0E3 		mov	r2, #1
 3353 013c 0020C3E5 		strb	r2, [r3, #0]
 205:../button.c   **** 
 206:../button.c   ****             rINTMSK |= BIT_EINT4567;
 3354              		.loc 1 206 0
 3355 0140 E0309FE5 		ldr	r3, .L10+12
 3356 0144 DC209FE5 		ldr	r2, .L10+12
 3357 0148 002092E5 		ldr	r2, [r2, #0]
 3358 014c 022682E3 		orr	r2, r2, #2097152
 3359 0150 002083E5 		str	r2, [r3, #0]
 207:../button.c   ****             botones[i].timer = timer2_count() + TRP;
 3360              		.loc 1 207 0
 3361 0154 FEFFFFEB 		bl	timer2_count
 3362 0158 0030A0E1 		mov	r3, r0
 3363 015c C32B83E2 		add	r2, r3, #199680
 3364 0160 052D82E2 		add	r2, r2, #320
 3365 0164 B8C09FE5 		ldr	ip, .L10+8
 3366 0168 20101BE5 		ldr	r1, [fp, #-32]
 3367 016c 0400A0E3 		mov	r0, #4
 3368 0170 0130A0E1 		mov	r3, r1
 3369 0174 8330A0E1 		mov	r3, r3, asl #1
 3370 0178 013083E0 		add	r3, r3, r1
 3371 017c 8331A0E1 		mov	r3, r3, asl #3
 3372 0180 03308CE0 		add	r3, ip, r3
 3373 0184 003083E0 		add	r3, r3, r0
 3374 0188 002083E5 		str	r2, [r3, #0]
 208:../button.c   **** 
 209:../button.c   ****             // CAMBIO: Cualquier botÃ³n puede iniciar el juego
 210:../button.c   ****             if (estado_juego == ESTADO_INICIAL)
 3375              		.loc 1 210 0
 3376 018c 98309FE5 		ldr	r3, .L10+16
 3377 0190 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3378 0194 000053E3 		cmp	r3, #0
 3379 0198 1200001A 		bne	.L9
 211:../button.c   ****             {
 212:../button.c   ****                 juego_iniciado = 1;
 3380              		.loc 1 212 0
 3381 019c 8C309FE5 		ldr	r3, .L10+20
 3382 01a0 0120A0E3 		mov	r2, #1
 3383 01a4 0020C3E5 		strb	r2, [r3, #0]
 213:../button.c   ****                 // Debug: mostrar quÃ© botÃ³n iniciÃ³
 214:../button.c   ****                 if (i == BOTON_EINT6)
 3384              		.loc 1 214 0
 3385 01a8 20301BE5 		ldr	r3, [fp, #-32]
 3386 01ac 000053E3 		cmp	r3, #0
 3387 01b0 0200001A 		bne	.L6
 215:../button.c   ****                     D8Led_symbol(6); // BotÃ³n izquierdo
 3388              		.loc 1 215 0
 3389 01b4 0600A0E3 		mov	r0, #6
 3390 01b8 FEFFFFEB 		bl	D8Led_symbol
 216:../button.c   ****                 else
 217:../button.c   ****                     D8Led_symbol(7); // BotÃ³n derecho
 218:../button.c   ****             }
 219:../button.c   **** 
 220:../button.c   ****             break;
 3391              		.loc 1 220 0
 3392 01bc 0A0000EA 		b	.L7
 3393              	.L6:
 217:../button.c   ****                     D8Led_symbol(7); // BotÃ³n derecho
 3394              		.loc 1 217 0
 3395 01c0 0700A0E3 		mov	r0, #7
 3396 01c4 FEFFFFEB 		bl	D8Led_symbol
 3397              		.loc 1 220 0
 3398 01c8 070000EA 		b	.L7
 3399              	.L4:
 197:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 3400              		.loc 1 197 0
 3401 01cc 20301BE5 		ldr	r3, [fp, #-32]
 3402 01d0 013083E2 		add	r3, r3, #1
 3403 01d4 20300BE5 		str	r3, [fp, #-32]
 3404              	.L3:
 197:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 3405              		.loc 1 197 0 is_stmt 0 discriminator 1
 3406 01d8 20301BE5 		ldr	r3, [fp, #-32]
 3407 01dc 010053E3 		cmp	r3, #1
 3408 01e0 AFFFFFDA 		ble	.L8
 3409 01e4 000000EA 		b	.L7
 3410              	.L9:
 3411              		.loc 1 220 0 is_stmt 1
 3412 01e8 0000A0E1 		mov	r0, r0	@ nop
 3413              	.L7:
 221:../button.c   ****         }
 222:../button.c   ****     }
 223:../button.c   **** 
 224:../button.c   ****     rEXTINTPND = 0xf;
 3414              		.loc 1 224 0
 3415 01ec 28309FE5 		ldr	r3, .L10
 3416 01f0 0F20A0E3 		mov	r2, #15
 3417 01f4 002083E5 		str	r2, [r3, #0]
 225:../button.c   ****     rI_ISPC |= BIT_EINT4567;
 3418              		.loc 1 225 0
 3419 01f8 34309FE5 		ldr	r3, .L10+24
 3420 01fc 30209FE5 		ldr	r2, .L10+24
 3421 0200 002092E5 		ldr	r2, [r2, #0]
 3422 0204 022682E3 		orr	r2, r2, #2097152
 3423 0208 002083E5 		str	r2, [r3, #0]
 226:../button.c   **** }
 3424              		.loc 1 226 0
 3425 020c 1CD04BE2 		sub	sp, fp, #28
 3426 0210 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 3427 0214 04C09DE4 		ldmfd	sp!, {ip}
 3428 0218 04F05EE2 		subs	pc, lr, #4
 3429              	.L11:
 3430              		.align	2
 3431              	.L10:
 3432 021c 5400D201 		.word	30539860
 3433 0220 28000000 		.word	tiempo_inicio
 3434 0224 00000000 		.word	botones
 3435 0228 0C00E001 		.word	31457292
 3436 022c 14000000 		.word	estado_juego
 3437 0230 19000000 		.word	juego_iniciado
 3438 0234 2400E001 		.word	31457316
 3439              		.cfi_endproc
 3440              	.LFE2:
 3442              		.align	2
 3443              		.global	Eint1_ISR
 3445              	Eint1_ISR:
 3446              	.LFB3:
 227:../button.c   **** 
 228:../button.c   **** /**
 229:../button.c   ****  * ISR EINT1
 230:../button.c   ****  */
 231:../button.c   **** void Eint1_ISR(void) __attribute__((interrupt("IRQ")));
 232:../button.c   **** void Eint1_ISR(void)
 233:../button.c   **** {
 3447              		.loc 1 233 0
 3448              		.cfi_startproc
 3449              		@ Interrupt Service Routine.
 3450              		@ args = 0, pretend = 0, frame = 0
 3451              		@ frame_needed = 1, uses_anonymous_args = 0
 3452 0238 04C02DE5 		str	ip, [sp, #-4]!
 3453 023c 0DC0A0E1 		mov	ip, sp
 3454              	.LCFI4:
 3455              		.cfi_def_cfa_register 12
 3456 0240 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 3457 0244 04B04CE2 		sub	fp, ip, #4
 3458              		.cfi_offset 14, -8
 3459              		.cfi_offset 13, -12
 3460              		.cfi_offset 11, -16
 3461              		.cfi_offset 3, -20
 3462              		.cfi_offset 2, -24
 3463              		.cfi_offset 1, -28
 3464              		.cfi_offset 0, -32
 3465              	.LCFI5:
 3466              		.cfi_def_cfa 11, 4
 234:../button.c   ****     // CAMBIO: Quitamos la condiciÃ³n "estado_juego != ESTADO_INICIAL"
 235:../button.c   ****     // para que el teclado funcione al principio y pueda despertar el juego.
 236:../button.c   ****     if (estado_juego != ESTADO_MOSTRANDO_ERROR &&
 3467              		.loc 1 236 0
 3468 0248 70309FE5 		ldr	r3, .L14
 3469 024c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3470 0250 040053E3 		cmp	r3, #4
 3471 0254 0C00000A 		beq	.L13
 237:../button.c   ****         teclado_estado == TECLADO_REPOSO)
 3472              		.loc 1 237 0 discriminator 1
 3473 0258 64309FE5 		ldr	r3, .L14+4
 3474 025c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 236:../button.c   ****     if (estado_juego != ESTADO_MOSTRANDO_ERROR &&
 3475              		.loc 1 236 0 discriminator 1
 3476 0260 000053E3 		cmp	r3, #0
 3477 0264 0800001A 		bne	.L13
 238:../button.c   ****     {
 239:../button.c   ****         teclado_estado = TECLADO_ESPERANDO_TRP;
 3478              		.loc 1 239 0
 3479 0268 54309FE5 		ldr	r3, .L14+4
 3480 026c 0120A0E3 		mov	r2, #1
 3481 0270 0020C3E5 		strb	r2, [r3, #0]
 240:../button.c   ****         teclado_timer = timer2_count() + TECLADO_TRP_US;
 3482              		.loc 1 240 0
 3483 0274 FEFFFFEB 		bl	timer2_count
 3484 0278 0030A0E1 		mov	r3, r0
 3485 027c 4E3C83E2 		add	r3, r3, #19968
 3486 0280 203083E2 		add	r3, r3, #32
 3487 0284 3C209FE5 		ldr	r2, .L14+8
 3488 0288 003082E5 		str	r3, [r2, #0]
 3489              	.L13:
 241:../button.c   ****     }
 242:../button.c   **** 
 243:../button.c   ****     rINTPND = BIT_EINT1;
 3490              		.loc 1 243 0
 3491 028c 38309FE5 		ldr	r3, .L14+12
 3492 0290 0124A0E3 		mov	r2, #16777216
 3493 0294 002083E5 		str	r2, [r3, #0]
 244:../button.c   ****     rEXTINTPND = (1 << 1);
 3494              		.loc 1 244 0
 3495 0298 30309FE5 		ldr	r3, .L14+16
 3496 029c 0220A0E3 		mov	r2, #2
 3497 02a0 002083E5 		str	r2, [r3, #0]
 245:../button.c   ****     rI_ISPC = BIT_EINT1;
 3498              		.loc 1 245 0
 3499 02a4 28309FE5 		ldr	r3, .L14+20
 3500 02a8 0124A0E3 		mov	r2, #16777216
 3501 02ac 002083E5 		str	r2, [r3, #0]
 246:../button.c   **** }
 3502              		.loc 1 246 0
 3503 02b0 1CD04BE2 		sub	sp, fp, #28
 3504 02b4 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 3505 02b8 04C09DE4 		ldmfd	sp!, {ip}
 3506 02bc 04F05EE2 		subs	pc, lr, #4
 3507              	.L15:
 3508              		.align	2
 3509              	.L14:
 3510 02c0 14000000 		.word	estado_juego
 3511 02c4 22000000 		.word	teclado_estado
 3512 02c8 24000000 		.word	teclado_timer
 3513 02cc 0400E001 		.word	31457284
 3514 02d0 5400D201 		.word	30539860
 3515 02d4 2400E001 		.word	31457316
 3516              		.cfi_endproc
 3517              	.LFE3:
 3519              		.align	2
 3520              		.global	Eint4567_init
 3522              	Eint4567_init:
 3523              	.LFB4:
 247:../button.c   **** 
 248:../button.c   **** /**
 249:../button.c   ****  * InicializaciÃ³n general EINT y configuraciÃ³n de pines
 250:../button.c   ****  * Llama a eint1_init() al final.
 251:../button.c   ****  */
 252:../button.c   **** void Eint4567_init(void)
 253:../button.c   **** {
 3524              		.loc 1 253 0
 3525              		.cfi_startproc
 3526              		@ Function supports interworking.
 3527              		@ args = 0, pretend = 0, frame = 0
 3528              		@ frame_needed = 1, uses_anonymous_args = 0
 3529 02d8 0DC0A0E1 		mov	ip, sp
 3530              	.LCFI6:
 3531              		.cfi_def_cfa_register 12
 3532 02dc 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3533 02e0 04B04CE2 		sub	fp, ip, #4
 3534              		.cfi_offset 14, -8
 3535              		.cfi_offset 13, -12
 3536              		.cfi_offset 11, -16
 3537              	.LCFI7:
 3538              		.cfi_def_cfa 11, 4
 254:../button.c   ****     rI_ISPC = 0x3ffffff;
 3539              		.loc 1 254 0
 3540 02e4 A8309FE5 		ldr	r3, .L17
 3541 02e8 3F23E0E3 		mvn	r2, #-67108864
 3542 02ec 002083E5 		str	r2, [r3, #0]
 255:../button.c   ****     rEXTINTPND = 0xf;
 3543              		.loc 1 255 0
 3544 02f0 A0309FE5 		ldr	r3, .L17+4
 3545 02f4 0F20A0E3 		mov	r2, #15
 3546 02f8 002083E5 		str	r2, [r3, #0]
 256:../button.c   ****     rINTMOD = 0x0;
 3547              		.loc 1 256 0
 3548 02fc 98309FE5 		ldr	r3, .L17+8
 3549 0300 0020A0E3 		mov	r2, #0
 3550 0304 002083E5 		str	r2, [r3, #0]
 257:../button.c   ****     rINTCON = 0x1;
 3551              		.loc 1 257 0
 3552 0308 1E36A0E3 		mov	r3, #31457280
 3553 030c 0120A0E3 		mov	r2, #1
 3554 0310 002083E5 		str	r2, [r3, #0]
 258:../button.c   ****     rINTMSK &= ~(BIT_EINT4567);
 3555              		.loc 1 258 0
 3556 0314 84309FE5 		ldr	r3, .L17+12
 3557 0318 80209FE5 		ldr	r2, .L17+12
 3558 031c 002092E5 		ldr	r2, [r2, #0]
 3559 0320 0226C2E3 		bic	r2, r2, #2097152
 3560 0324 002083E5 		str	r2, [r3, #0]
 259:../button.c   ****     pISR_EINT4567 = (int)Eint4567_ISR;
 3561              		.loc 1 259 0
 3562 0328 74309FE5 		ldr	r3, .L17+16
 3563 032c 74209FE5 		ldr	r2, .L17+20
 3564 0330 002083E5 		str	r2, [r3, #0]
 260:../button.c   **** 
 261:../button.c   ****     rPCONG = 0xffff;
 3565              		.loc 1 261 0
 3566 0334 70309FE5 		ldr	r3, .L17+24
 3567 0338 70209FE5 		ldr	r2, .L17+28
 3568 033c 002083E5 		str	r2, [r3, #0]
 262:../button.c   ****     rPUPG = 0x0;
 3569              		.loc 1 262 0
 3570 0340 6C309FE5 		ldr	r3, .L17+32
 3571 0344 0020A0E3 		mov	r2, #0
 3572 0348 002083E5 		str	r2, [r3, #0]
 263:../button.c   ****     rEXTINT = rEXTINT | 0x22222222;
 3573              		.loc 1 263 0
 3574 034c 64209FE5 		ldr	r2, .L17+36
 3575 0350 60309FE5 		ldr	r3, .L17+36
 3576 0354 001093E5 		ldr	r1, [r3, #0]
 3577 0358 5C309FE5 		ldr	r3, .L17+40
 3578 035c 033081E1 		orr	r3, r1, r3
 3579 0360 003082E5 		str	r3, [r2, #0]
 264:../button.c   **** 
 265:../button.c   ****     rEXTINTPND = 0xf;
 3580              		.loc 1 265 0
 3581 0364 2C309FE5 		ldr	r3, .L17+4
 3582 0368 0F20A0E3 		mov	r2, #15
 3583 036c 002083E5 		str	r2, [r3, #0]
 266:../button.c   ****     rI_ISPC |= BIT_EINT4567;
 3584              		.loc 1 266 0
 3585 0370 1C309FE5 		ldr	r3, .L17
 3586 0374 18209FE5 		ldr	r2, .L17
 3587 0378 002092E5 		ldr	r2, [r2, #0]
 3588 037c 022682E3 		orr	r2, r2, #2097152
 3589 0380 002083E5 		str	r2, [r3, #0]
 267:../button.c   **** 
 268:../button.c   ****     eint1_init();
 3590              		.loc 1 268 0
 3591 0384 FEFFFFEB 		bl	eint1_init
 269:../button.c   **** }
 3592              		.loc 1 269 0
 3593 0388 0CD04BE2 		sub	sp, fp, #12
 3594 038c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3595 0390 1EFF2FE1 		bx	lr
 3596              	.L18:
 3597              		.align	2
 3598              	.L17:
 3599 0394 2400E001 		.word	31457316
 3600 0398 5400D201 		.word	30539860
 3601 039c 0800E001 		.word	31457288
 3602 03a0 0C00E001 		.word	31457292
 3603 03a4 74FF7F0C 		.word	209715060
 3604 03a8 00000000 		.word	Eint4567_ISR
 3605 03ac 4000D201 		.word	30539840
 3606 03b0 FFFF0000 		.word	65535
 3607 03b4 4800D201 		.word	30539848
 3608 03b8 5000D201 		.word	30539856
 3609 03bc 22222222 		.word	572662306
 3610              		.cfi_endproc
 3611              	.LFE4:
 3613              		.align	2
 3614              		.global	eint1_init
 3616              	eint1_init:
 3617              	.LFB5:
 270:../button.c   **** 
 271:../button.c   **** /**
 272:../button.c   ****  * Inicializar submÃ³dulo teclado
 273:../button.c   ****  * Configura EINT1 y el manejo de filas para el escaneo.
 274:../button.c   ****  */
 275:../button.c   **** void eint1_init(void)
 276:../button.c   **** {
 3618              		.loc 1 276 0
 3619              		.cfi_startproc
 3620              		@ Function supports interworking.
 3621              		@ args = 0, pretend = 0, frame = 0
 3622              		@ frame_needed = 1, uses_anonymous_args = 0
 3623 03c0 0DC0A0E1 		mov	ip, sp
 3624              	.LCFI8:
 3625              		.cfi_def_cfa_register 12
 3626 03c4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3627 03c8 04B04CE2 		sub	fp, ip, #4
 3628              		.cfi_offset 14, -8
 3629              		.cfi_offset 13, -12
 3630              		.cfi_offset 11, -16
 3631              	.LCFI9:
 3632              		.cfi_def_cfa 11, 4
 277:../button.c   ****     rEXTINT = (rEXTINT & ~(7 << 4)) | (2 << 4);
 3633              		.loc 1 277 0
 3634 03cc 54309FE5 		ldr	r3, .L20
 3635 03d0 50209FE5 		ldr	r2, .L20
 3636 03d4 002092E5 		ldr	r2, [r2, #0]
 3637 03d8 7020C2E3 		bic	r2, r2, #112
 3638 03dc 202082E3 		orr	r2, r2, #32
 3639 03e0 002083E5 		str	r2, [r3, #0]
 278:../button.c   ****     pISR_EINT1 = (int)Eint1_ISR;
 3640              		.loc 1 278 0
 3641 03e4 40309FE5 		ldr	r3, .L20+4
 3642 03e8 40209FE5 		ldr	r2, .L20+8
 3643 03ec 002083E5 		str	r2, [r3, #0]
 279:../button.c   ****     rINTMSK &= ~BIT_EINT1;
 3644              		.loc 1 279 0
 3645 03f0 3C309FE5 		ldr	r3, .L20+12
 3646 03f4 38209FE5 		ldr	r2, .L20+12
 3647 03f8 002092E5 		ldr	r2, [r2, #0]
 3648 03fc 0124C2E3 		bic	r2, r2, #16777216
 3649 0400 002083E5 		str	r2, [r3, #0]
 280:../button.c   ****     rEXTINTPND = (1 << 1);
 3650              		.loc 1 280 0
 3651 0404 2C309FE5 		ldr	r3, .L20+16
 3652 0408 0220A0E3 		mov	r2, #2
 3653 040c 002083E5 		str	r2, [r3, #0]
 281:../button.c   ****     rI_ISPC = BIT_EINT1;
 3654              		.loc 1 281 0
 3655 0410 24309FE5 		ldr	r3, .L20+20
 3656 0414 0124A0E3 		mov	r2, #16777216
 3657 0418 002083E5 		str	r2, [r3, #0]
 282:../button.c   **** }
 3658              		.loc 1 282 0
 3659 041c 0CD04BE2 		sub	sp, fp, #12
 3660 0420 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3661 0424 1EFF2FE1 		bx	lr
 3662              	.L21:
 3663              		.align	2
 3664              	.L20:
 3665 0428 5000D201 		.word	30539856
 3666 042c 80FF7F0C 		.word	209715072
 3667 0430 00000000 		.word	Eint1_ISR
 3668 0434 0C00E001 		.word	31457292
 3669 0438 5400D201 		.word	30539860
 3670 043c 2400E001 		.word	31457316
 3671              		.cfi_endproc
 3672              	.LFE5:
 3674              		.align	2
 3676              	procesar_rebote:
 3677              	.LFB6:
 283:../button.c   **** 
 284:../button.c   **** /**
 285:../button.c   ****  * Procesar rebote (mÃ¡quina de estados)
 286:../button.c   ****  * Parametros:
 287:../button.c   ****  *  - boton: Ã­ndice en el array botones (BOTON_EINT6/BOTON_EINT7)
 288:../button.c   ****  * Comportamiento:
 289:../button.c   ****  *  - implementa la mÃ¡quina de estados del antirrebote (entrando, esperando, soltado)
 290:../button.c   ****  *  - genera evento_boton_derecho/evento_boton_izquierdo segÃºn corresponda
 291:../button.c   ****  */
 292:../button.c   **** static void procesar_rebote(int boton)
 293:../button.c   **** {
 3678              		.loc 1 293 0
 3679              		.cfi_startproc
 3680              		@ Function supports interworking.
 3681              		@ args = 0, pretend = 0, frame = 16
 3682              		@ frame_needed = 1, uses_anonymous_args = 0
 3683 0440 0DC0A0E1 		mov	ip, sp
 3684              	.LCFI10:
 3685              		.cfi_def_cfa_register 12
 3686 0444 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3687 0448 04B04CE2 		sub	fp, ip, #4
 3688              		.cfi_offset 14, -8
 3689              		.cfi_offset 13, -12
 3690              		.cfi_offset 11, -16
 3691              	.LCFI11:
 3692              		.cfi_def_cfa 11, 4
 3693 044c 10D04DE2 		sub	sp, sp, #16
 3694 0450 18000BE5 		str	r0, [fp, #-24]
 294:../button.c   ****     unsigned int ahora = timer2_count();
 3695              		.loc 1 294 0
 3696 0454 FEFFFFEB 		bl	timer2_count
 3697 0458 10000BE5 		str	r0, [fp, #-16]
 295:../button.c   ****     contexto_boton_t *ctx = &botones[boton];
 3698              		.loc 1 295 0
 3699 045c 18201BE5 		ldr	r2, [fp, #-24]
 3700 0460 0230A0E1 		mov	r3, r2
 3701 0464 8330A0E1 		mov	r3, r3, asl #1
 3702 0468 023083E0 		add	r3, r3, r2
 3703 046c 8331A0E1 		mov	r3, r3, asl #3
 3704 0470 0320A0E1 		mov	r2, r3
 3705 0474 80329FE5 		ldr	r3, .L43
 3706 0478 033082E0 		add	r3, r2, r3
 3707 047c 14300BE5 		str	r3, [fp, #-20]
 296:../button.c   **** 
 297:../button.c   ****     switch (ctx->estado)
 3708              		.loc 1 297 0
 3709 0480 14301BE5 		ldr	r3, [fp, #-20]
 3710 0484 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3711 0488 030053E3 		cmp	r3, #3
 3712 048c 03F19F97 		ldrls	pc, [pc, r3, asl #2]
 3713 0490 960000EA 		b	.L22
 3714              	.L28:
 3715 0494 F0060000 		.word	.L22
 3716 0498 A4040000 		.word	.L25
 3717 049c 48050000 		.word	.L26
 3718 04a0 28060000 		.word	.L27
 3719              	.L25:
 298:../button.c   ****     {
 299:../button.c   ****     case e_reposo:
 300:../button.c   ****         break;
 301:../button.c   **** 
 302:../button.c   ****     case e_entrando:
 303:../button.c   ****         tiempo_fin = timer2_count();
 3720              		.loc 1 303 0
 3721 04a4 FEFFFFEB 		bl	timer2_count
 3722 04a8 0020A0E1 		mov	r2, r0
 3723 04ac 4C329FE5 		ldr	r3, .L43+4
 3724 04b0 002083E5 		str	r2, [r3, #0]
 304:../button.c   **** 
 305:../button.c   ****         resta = tiempo_fin - tiempo_inicio;
 3725              		.loc 1 305 0
 3726 04b4 44329FE5 		ldr	r3, .L43+4
 3727 04b8 002093E5 		ldr	r2, [r3, #0]
 3728 04bc 40329FE5 		ldr	r3, .L43+8
 3729 04c0 003093E5 		ldr	r3, [r3, #0]
 3730 04c4 022063E0 		rsb	r2, r3, r2
 3731 04c8 38329FE5 		ldr	r3, .L43+12
 3732 04cc 002083E5 		str	r2, [r3, #0]
 306:../button.c   ****         if ((int)(ahora - ctx->timer) >= 0)
 3733              		.loc 1 306 0
 3734 04d0 14301BE5 		ldr	r3, [fp, #-20]
 3735 04d4 043093E5 		ldr	r3, [r3, #4]
 3736 04d8 10201BE5 		ldr	r2, [fp, #-16]
 3737 04dc 023063E0 		rsb	r3, r3, r2
 3738 04e0 000053E3 		cmp	r3, #0
 3739 04e4 720000BA 		blt	.L35
 307:../button.c   ****         {
 308:../button.c   ****             cola_depuracion(4, resta, 4);
 3740              		.loc 1 308 0
 3741 04e8 18329FE5 		ldr	r3, .L43+12
 3742 04ec 003093E5 		ldr	r3, [r3, #0]
 3743 04f0 0400A0E3 		mov	r0, #4
 3744 04f4 0310A0E1 		mov	r1, r3
 3745 04f8 0420A0E3 		mov	r2, #4
 3746 04fc FEFFFFEB 		bl	cola_depuracion
 309:../button.c   **** 
 310:../button.c   ****             ctx->estado = e_esperando;
 3747              		.loc 1 310 0
 3748 0500 14301BE5 		ldr	r3, [fp, #-20]
 3749 0504 0220A0E3 		mov	r2, #2
 3750 0508 0020C3E5 		strb	r2, [r3, #0]
 311:../button.c   ****             ctx->timer = ahora + TEP;
 3751              		.loc 1 311 0
 3752 050c 10301BE5 		ldr	r3, [fp, #-16]
 3753 0510 613B83E2 		add	r3, r3, #99328
 3754 0514 2A3E83E2 		add	r3, r3, #672
 3755 0518 14201BE5 		ldr	r2, [fp, #-20]
 3756 051c 043082E5 		str	r3, [r2, #4]
 312:../button.c   ****             ctx->inicio_pulsacion = ahora;
 3757              		.loc 1 312 0
 3758 0520 14301BE5 		ldr	r3, [fp, #-20]
 3759 0524 10201BE5 		ldr	r2, [fp, #-16]
 3760 0528 0C2083E5 		str	r2, [r3, #12]
 313:../button.c   ****             ctx->ultimo_auto = ahora;
 3761              		.loc 1 313 0
 3762 052c 14301BE5 		ldr	r3, [fp, #-20]
 3763 0530 10201BE5 		ldr	r2, [fp, #-16]
 3764 0534 102083E5 		str	r2, [r3, #16]
 314:../button.c   ****             ctx->auto_iniciado = 0;
 3765              		.loc 1 314 0
 3766 0538 14301BE5 		ldr	r3, [fp, #-20]
 3767 053c 0020A0E3 		mov	r2, #0
 3768 0540 1420C3E5 		strb	r2, [r3, #20]
 315:../button.c   ****         }
 316:../button.c   ****         break;
 3769              		.loc 1 316 0
 3770 0544 690000EA 		b	.L22
 3771              	.L26:
 317:../button.c   **** 
 318:../button.c   ****     case e_esperando:
 319:../button.c   ****         if ((int)(ahora - ctx->timer) >= 0)
 3772              		.loc 1 319 0
 3773 0548 14301BE5 		ldr	r3, [fp, #-20]
 3774 054c 043093E5 		ldr	r3, [r3, #4]
 3775 0550 10201BE5 		ldr	r2, [fp, #-16]
 3776 0554 023063E0 		rsb	r3, r3, r2
 3777 0558 000053E3 		cmp	r3, #0
 3778 055c 560000BA 		blt	.L36
 320:../button.c   ****         {
 321:../button.c   ****             if (leer_estado_boton(boton))
 3779              		.loc 1 321 0
 3780 0560 18001BE5 		ldr	r0, [fp, #-24]
 3781 0564 FEFFFFEB 		bl	leer_estado_boton
 3782 0568 0030A0E1 		mov	r3, r0
 3783 056c 000053E3 		cmp	r3, #0
 3784 0570 0800000A 		beq	.L31
 322:../button.c   ****             {
 323:../button.c   ****                 ctx->estado = e_soltado;
 3785              		.loc 1 323 0
 3786 0574 14301BE5 		ldr	r3, [fp, #-20]
 3787 0578 0320A0E3 		mov	r2, #3
 3788 057c 0020C3E5 		strb	r2, [r3, #0]
 324:../button.c   ****                 ctx->timer = ahora + TRD;
 3789              		.loc 1 324 0
 3790 0580 10301BE5 		ldr	r3, [fp, #-16]
 3791 0584 C33C83E2 		add	r3, r3, #49920
 3792 0588 503083E2 		add	r3, r3, #80
 3793 058c 14201BE5 		ldr	r2, [fp, #-20]
 3794 0590 043082E5 		str	r3, [r2, #4]
 325:../button.c   ****             }
 326:../button.c   ****             else
 327:../button.c   ****             {
 328:../button.c   ****                 ctx->timer = ahora + TEP;
 329:../button.c   **** 
 330:../button.c   ****                 if (boton == BOTON_EINT7)
 331:../button.c   ****                 {
 332:../button.c   ****                     if ((ahora - ctx->inicio_pulsacion) >= PULSACION_CORTA_US &&
 333:../button.c   ****                         (ahora - ctx->ultimo_auto) >= AUTOREP_T_US)
 334:../button.c   ****                     {
 335:../button.c   ****                         ctx->ultimo_auto = ahora;
 336:../button.c   ****                         if (!ctx->auto_iniciado)
 337:../button.c   ****                             ctx->auto_iniciado = 1;
 338:../button.c   ****                         evento_boton_derecho = 1;
 339:../button.c   ****                     }
 340:../button.c   ****                 }
 341:../button.c   ****             }
 342:../button.c   ****         }
 343:../button.c   ****         break;
 3795              		.loc 1 343 0
 3796 0594 550000EA 		b	.L22
 3797              	.L31:
 328:../button.c   ****                 ctx->timer = ahora + TEP;
 3798              		.loc 1 328 0
 3799 0598 10301BE5 		ldr	r3, [fp, #-16]
 3800 059c 613B83E2 		add	r3, r3, #99328
 3801 05a0 2A3E83E2 		add	r3, r3, #672
 3802 05a4 14201BE5 		ldr	r2, [fp, #-20]
 3803 05a8 043082E5 		str	r3, [r2, #4]
 330:../button.c   ****                 if (boton == BOTON_EINT7)
 3804              		.loc 1 330 0
 3805 05ac 18301BE5 		ldr	r3, [fp, #-24]
 3806 05b0 010053E3 		cmp	r3, #1
 3807 05b4 4200001A 		bne	.L37
 332:../button.c   ****                     if ((ahora - ctx->inicio_pulsacion) >= PULSACION_CORTA_US &&
 3808              		.loc 1 332 0
 3809 05b8 14301BE5 		ldr	r3, [fp, #-20]
 3810 05bc 0C3093E5 		ldr	r3, [r3, #12]
 3811 05c0 10201BE5 		ldr	r2, [fp, #-16]
 3812 05c4 022063E0 		rsb	r2, r3, r2
 3813 05c8 3C319FE5 		ldr	r3, .L43+16
 3814 05cc 030052E1 		cmp	r2, r3
 3815 05d0 3D00009A 		bls	.L38
 333:../button.c   ****                         (ahora - ctx->ultimo_auto) >= AUTOREP_T_US)
 3816              		.loc 1 333 0 discriminator 1
 3817 05d4 14301BE5 		ldr	r3, [fp, #-20]
 3818 05d8 103093E5 		ldr	r3, [r3, #16]
 3819 05dc 10201BE5 		ldr	r2, [fp, #-16]
 3820 05e0 022063E0 		rsb	r2, r3, r2
 332:../button.c   ****                     if ((ahora - ctx->inicio_pulsacion) >= PULSACION_CORTA_US &&
 3821              		.loc 1 332 0 discriminator 1
 3822 05e4 24319FE5 		ldr	r3, .L43+20
 3823 05e8 030052E1 		cmp	r2, r3
 3824 05ec 3800009A 		bls	.L39
 335:../button.c   ****                         ctx->ultimo_auto = ahora;
 3825              		.loc 1 335 0
 3826 05f0 14301BE5 		ldr	r3, [fp, #-20]
 3827 05f4 10201BE5 		ldr	r2, [fp, #-16]
 3828 05f8 102083E5 		str	r2, [r3, #16]
 336:../button.c   ****                         if (!ctx->auto_iniciado)
 3829              		.loc 1 336 0
 3830 05fc 14301BE5 		ldr	r3, [fp, #-20]
 3831 0600 1430D3E5 		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3832 0604 000053E3 		cmp	r3, #0
 3833 0608 0200001A 		bne	.L32
 337:../button.c   ****                             ctx->auto_iniciado = 1;
 3834              		.loc 1 337 0
 3835 060c 14301BE5 		ldr	r3, [fp, #-20]
 3836 0610 0120A0E3 		mov	r2, #1
 3837 0614 1420C3E5 		strb	r2, [r3, #20]
 3838              	.L32:
 338:../button.c   ****                         evento_boton_derecho = 1;
 3839              		.loc 1 338 0
 3840 0618 F4309FE5 		ldr	r3, .L43+24
 3841 061c 0120A0E3 		mov	r2, #1
 3842 0620 0020C3E5 		strb	r2, [r3, #0]
 3843              		.loc 1 343 0
 3844 0624 310000EA 		b	.L22
 3845              	.L27:
 344:../button.c   **** 
 345:../button.c   ****     case e_soltado:
 346:../button.c   ****         if ((int)(ahora - ctx->timer) >= 0)
 3846              		.loc 1 346 0
 3847 0628 14301BE5 		ldr	r3, [fp, #-20]
 3848 062c 043093E5 		ldr	r3, [r3, #4]
 3849 0630 10201BE5 		ldr	r2, [fp, #-16]
 3850 0634 023063E0 		rsb	r3, r3, r2
 3851 0638 000053E3 		cmp	r3, #0
 3852 063c 260000BA 		blt	.L40
 347:../button.c   ****         {
 348:../button.c   ****             ctx->estado = e_reposo;
 3853              		.loc 1 348 0
 3854 0640 14301BE5 		ldr	r3, [fp, #-20]
 3855 0644 0020A0E3 		mov	r2, #0
 3856 0648 0020C3E5 		strb	r2, [r3, #0]
 349:../button.c   ****             rINTMSK &= ~BIT_EINT4567;
 3857              		.loc 1 349 0
 3858 064c C4309FE5 		ldr	r3, .L43+28
 3859 0650 C0209FE5 		ldr	r2, .L43+28
 3860 0654 002092E5 		ldr	r2, [r2, #0]
 3861 0658 0226C2E3 		bic	r2, r2, #2097152
 3862 065c 002083E5 		str	r2, [r3, #0]
 350:../button.c   ****             rEXTINTPND = 0xf;
 3863              		.loc 1 350 0
 3864 0660 B4309FE5 		ldr	r3, .L43+32
 3865 0664 0F20A0E3 		mov	r2, #15
 3866 0668 002083E5 		str	r2, [r3, #0]
 351:../button.c   **** 
 352:../button.c   ****             if (boton == BOTON_EINT7)
 3867              		.loc 1 352 0
 3868 066c 18301BE5 		ldr	r3, [fp, #-24]
 3869 0670 010053E3 		cmp	r3, #1
 3870 0674 0700001A 		bne	.L34
 353:../button.c   ****             {
 354:../button.c   ****                 if (!ctx->auto_iniciado)
 3871              		.loc 1 354 0
 3872 0678 14301BE5 		ldr	r3, [fp, #-20]
 3873 067c 1430D3E5 		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3874 0680 000053E3 		cmp	r3, #0
 3875 0684 1600001A 		bne	.L41
 355:../button.c   ****                     evento_boton_derecho = 1;
 3876              		.loc 1 355 0
 3877 0688 84309FE5 		ldr	r3, .L43+24
 3878 068c 0120A0E3 		mov	r2, #1
 3879 0690 0020C3E5 		strb	r2, [r3, #0]
 356:../button.c   ****             }
 357:../button.c   ****             else if (boton == BOTON_EINT6)
 358:../button.c   ****             {
 359:../button.c   ****                 evento_boton_izquierdo = 1;
 360:../button.c   ****             }
 361:../button.c   ****         }
 362:../button.c   ****         break;
 3880              		.loc 1 362 0
 3881 0694 150000EA 		b	.L22
 3882              	.L34:
 357:../button.c   ****             else if (boton == BOTON_EINT6)
 3883              		.loc 1 357 0
 3884 0698 18301BE5 		ldr	r3, [fp, #-24]
 3885 069c 000053E3 		cmp	r3, #0
 3886 06a0 1100001A 		bne	.L42
 359:../button.c   ****                 evento_boton_izquierdo = 1;
 3887              		.loc 1 359 0
 3888 06a4 74309FE5 		ldr	r3, .L43+36
 3889 06a8 0120A0E3 		mov	r2, #1
 3890 06ac 0020C3E5 		strb	r2, [r3, #0]
 3891              		.loc 1 362 0
 3892 06b0 0E0000EA 		b	.L22
 3893              	.L35:
 316:../button.c   ****         break;
 3894              		.loc 1 316 0
 3895 06b4 0000A0E1 		mov	r0, r0	@ nop
 3896 06b8 0C0000EA 		b	.L22
 3897              	.L36:
 343:../button.c   ****         break;
 3898              		.loc 1 343 0
 3899 06bc 0000A0E1 		mov	r0, r0	@ nop
 3900 06c0 0A0000EA 		b	.L22
 3901              	.L37:
 3902 06c4 0000A0E1 		mov	r0, r0	@ nop
 3903 06c8 080000EA 		b	.L22
 3904              	.L38:
 3905 06cc 0000A0E1 		mov	r0, r0	@ nop
 3906 06d0 060000EA 		b	.L22
 3907              	.L39:
 3908 06d4 0000A0E1 		mov	r0, r0	@ nop
 3909 06d8 040000EA 		b	.L22
 3910              	.L40:
 3911              		.loc 1 362 0
 3912 06dc 0000A0E1 		mov	r0, r0	@ nop
 3913 06e0 020000EA 		b	.L22
 3914              	.L41:
 3915 06e4 0000A0E1 		mov	r0, r0	@ nop
 3916 06e8 000000EA 		b	.L22
 3917              	.L42:
 3918 06ec 0000A0E1 		mov	r0, r0	@ nop
 3919              	.L22:
 363:../button.c   ****     }
 364:../button.c   **** }
 3920              		.loc 1 364 0
 3921 06f0 0CD04BE2 		sub	sp, fp, #12
 3922 06f4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3923 06f8 1EFF2FE1 		bx	lr
 3924              	.L44:
 3925              		.align	2
 3926              	.L43:
 3927 06fc 00000000 		.word	botones
 3928 0700 2C000000 		.word	tiempo_fin
 3929 0704 28000000 		.word	tiempo_inicio
 3930 0708 30000000 		.word	resta
 3931 070c 1FA10700 		.word	499999
 3932 0710 DF930400 		.word	299999
 3933 0714 17000000 		.word	evento_boton_derecho
 3934 0718 0C00E001 		.word	31457292
 3935 071c 5400D201 		.word	30539860
 3936 0720 18000000 		.word	evento_boton_izquierdo
 3937              		.cfi_endproc
 3938              	.LFE6:
 3940              		.align	2
 3941              		.global	procesar_maquina_estados_botones
 3943              	procesar_maquina_estados_botones:
 3944              	.LFB7:
 365:../button.c   **** 
 366:../button.c   **** /**
 367:../button.c   ****  * Procesar mÃ¡quina de estados del juego
 368:../button.c   ****  * Llama al manejador correspondiente segÃºn estado_juego.
 369:../button.c   ****  */
 370:../button.c   **** void procesar_maquina_estados_botones(void)
 371:../button.c   **** {
 3945              		.loc 1 371 0
 3946              		.cfi_startproc
 3947              		@ Function supports interworking.
 3948              		@ args = 0, pretend = 0, frame = 0
 3949              		@ frame_needed = 1, uses_anonymous_args = 0
 3950 0724 0DC0A0E1 		mov	ip, sp
 3951              	.LCFI12:
 3952              		.cfi_def_cfa_register 12
 3953 0728 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3954 072c 04B04CE2 		sub	fp, ip, #4
 3955              		.cfi_offset 14, -8
 3956              		.cfi_offset 13, -12
 3957              		.cfi_offset 11, -16
 3958              	.LCFI13:
 3959              		.cfi_def_cfa 11, 4
 372:../button.c   ****     switch (estado_juego)
 3960              		.loc 1 372 0
 3961 0730 C0309FE5 		ldr	r3, .L61
 3962 0734 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 3963 0738 040053E3 		cmp	r3, #4
 3964 073c 03F19F97 		ldrls	pc, [pc, r3, asl #2]
 3965 0740 290000EA 		b	.L45
 3966              	.L52:
 3967 0744 58070000 		.word	.L47
 3968 0748 60070000 		.word	.L48
 3969 074c 7C070000 		.word	.L49
 3970 0750 98070000 		.word	.L50
 3971 0754 B4070000 		.word	.L51
 3972              	.L47:
 373:../button.c   ****     {
 374:../button.c   ****     case ESTADO_INICIAL:
 375:../button.c   ****         estado_inicial();
 3973              		.loc 1 375 0
 3974 0758 A90000EB 		bl	estado_inicial
 376:../button.c   ****         break;
 3975              		.loc 1 376 0
 3976 075c 220000EA 		b	.L45
 3977              	.L48:
 377:../button.c   ****     case ESTADO_SELEC_FILA:
 378:../button.c   ****         estado_selec_fila();
 3978              		.loc 1 378 0
 3979 0760 4F0100EB 		bl	estado_selec_fila
 379:../button.c   ****         // Actualizar tiempo durante el juego
 380:../button.c   ****         if (tiempo_inicio_partida > 0)
 3980              		.loc 1 380 0
 3981 0764 90309FE5 		ldr	r3, .L61+4
 3982 0768 003093E5 		ldr	r3, [r3, #0]
 3983 076c 000053E3 		cmp	r3, #0
 3984 0770 1600000A 		beq	.L57
 381:../button.c   ****         {
 382:../button.c   ****             mostrar_tiempo_partida();
 3985              		.loc 1 382 0
 3986 0774 420500EB 		bl	mostrar_tiempo_partida
 383:../button.c   ****         }
 384:../button.c   ****         break;
 3987              		.loc 1 384 0
 3988 0778 1B0000EA 		b	.L45
 3989              	.L49:
 385:../button.c   ****     case ESTADO_SELEC_COLUMNA:
 386:../button.c   ****         estado_selec_columna();
 3990              		.loc 1 386 0
 3991 077c 5B0200EB 		bl	estado_selec_columna
 387:../button.c   ****         if (tiempo_inicio_partida > 0)
 3992              		.loc 1 387 0
 3993 0780 74309FE5 		ldr	r3, .L61+4
 3994 0784 003093E5 		ldr	r3, [r3, #0]
 3995 0788 000053E3 		cmp	r3, #0
 3996 078c 1100000A 		beq	.L58
 388:../button.c   ****         {
 389:../button.c   ****             mostrar_tiempo_partida();
 3997              		.loc 1 389 0
 3998 0790 3B0500EB 		bl	mostrar_tiempo_partida
 390:../button.c   ****         }
 391:../button.c   ****         break;
 3999              		.loc 1 391 0
 4000 0794 140000EA 		b	.L45
 4001              	.L50:
 392:../button.c   ****     case ESTADO_SELEC_VALOR:
 393:../button.c   ****         estado_selec_valor();
 4002              		.loc 1 393 0
 4003 0798 270300EB 		bl	estado_selec_valor
 394:../button.c   ****         if (tiempo_inicio_partida > 0)
 4004              		.loc 1 394 0
 4005 079c 58309FE5 		ldr	r3, .L61+4
 4006 07a0 003093E5 		ldr	r3, [r3, #0]
 4007 07a4 000053E3 		cmp	r3, #0
 4008 07a8 0C00000A 		beq	.L59
 395:../button.c   ****         {
 396:../button.c   ****             mostrar_tiempo_partida();
 4009              		.loc 1 396 0
 4010 07ac 340500EB 		bl	mostrar_tiempo_partida
 397:../button.c   ****         }
 398:../button.c   ****         break;
 4011              		.loc 1 398 0
 4012 07b0 0D0000EA 		b	.L45
 4013              	.L51:
 399:../button.c   ****     case ESTADO_MOSTRANDO_ERROR:
 400:../button.c   ****         estado_mostrando_error();
 4014              		.loc 1 400 0
 4015 07b4 320400EB 		bl	estado_mostrando_error
 401:../button.c   ****         if (tiempo_inicio_partida > 0)
 4016              		.loc 1 401 0
 4017 07b8 3C309FE5 		ldr	r3, .L61+4
 4018 07bc 003093E5 		ldr	r3, [r3, #0]
 4019 07c0 000053E3 		cmp	r3, #0
 4020 07c4 0700000A 		beq	.L60
 402:../button.c   ****         {
 403:../button.c   ****             mostrar_tiempo_partida();
 4021              		.loc 1 403 0
 4022 07c8 2D0500EB 		bl	mostrar_tiempo_partida
 404:../button.c   ****         }
 405:../button.c   ****         break;
 4023              		.loc 1 405 0
 4024 07cc 060000EA 		b	.L45
 4025              	.L57:
 384:../button.c   ****         break;
 4026              		.loc 1 384 0
 4027 07d0 0000A0E1 		mov	r0, r0	@ nop
 4028 07d4 040000EA 		b	.L45
 4029              	.L58:
 391:../button.c   ****         break;
 4030              		.loc 1 391 0
 4031 07d8 0000A0E1 		mov	r0, r0	@ nop
 4032 07dc 020000EA 		b	.L45
 4033              	.L59:
 398:../button.c   ****         break;
 4034              		.loc 1 398 0
 4035 07e0 0000A0E1 		mov	r0, r0	@ nop
 4036 07e4 000000EA 		b	.L45
 4037              	.L60:
 4038              		.loc 1 405 0
 4039 07e8 0000A0E1 		mov	r0, r0	@ nop
 4040              	.L45:
 406:../button.c   ****     }
 407:../button.c   **** }
 4041              		.loc 1 407 0
 4042 07ec 0CD04BE2 		sub	sp, fp, #12
 4043 07f0 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4044 07f4 1EFF2FE1 		bx	lr
 4045              	.L62:
 4046              		.align	2
 4047              	.L61:
 4048 07f8 14000000 		.word	estado_juego
 4049 07fc 34000000 		.word	tiempo_inicio_partida
 4050              		.cfi_endproc
 4051              	.LFE7:
 4053              		.align	2
 4054              		.global	procesar_teclado
 4056              	procesar_teclado:
 4057              	.LFB8:
 408:../button.c   **** 
 409:../button.c   **** /**
 410:../button.c   ****  * Procesar teclado (mÃ¡quina de estados)
 411:../button.c   ****  * Debe llamarse periÃ³dicamente para:
 412:../button.c   ****  *  - pasar por los estados TRP/TRD y escanear teclas
 413:../button.c   ****  *  - publicar evento_teclado_digito cuando detecta un dÃ­gito
 414:../button.c   ****  */
 415:../button.c   **** void procesar_teclado(void)
 416:../button.c   **** {
 4058              		.loc 1 416 0
 4059              		.cfi_startproc
 4060              		@ Function supports interworking.
 4061              		@ args = 0, pretend = 0, frame = 8
 4062              		@ frame_needed = 1, uses_anonymous_args = 0
 4063 0800 0DC0A0E1 		mov	ip, sp
 4064              	.LCFI14:
 4065              		.cfi_def_cfa_register 12
 4066 0804 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4067 0808 04B04CE2 		sub	fp, ip, #4
 4068              		.cfi_offset 14, -8
 4069              		.cfi_offset 13, -12
 4070              		.cfi_offset 11, -16
 4071              	.LCFI15:
 4072              		.cfi_def_cfa 11, 4
 4073 080c 08D04DE2 		sub	sp, sp, #8
 417:../button.c   ****     unsigned int ahora = timer2_count();
 4074              		.loc 1 417 0
 4075 0810 FEFFFFEB 		bl	timer2_count
 4076 0814 10000BE5 		str	r0, [fp, #-16]
 418:../button.c   ****     uint8_t digito;
 419:../button.c   **** 
 420:../button.c   ****     // CAMBIO: Permitimos procesar teclado en ESTADO_INICIAL
 421:../button.c   ****     // Solo bloqueamos si estamos mostrando un error (parpadeo)
 422:../button.c   ****     if (estado_juego == ESTADO_MOSTRANDO_ERROR)
 4077              		.loc 1 422 0
 4078 0818 14319FE5 		ldr	r3, .L78
 4079 081c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4080 0820 040053E3 		cmp	r3, #4
 4081 0824 0300001A 		bne	.L64
 423:../button.c   ****     {
 424:../button.c   ****         teclado_estado = TECLADO_REPOSO;
 4082              		.loc 1 424 0
 4083 0828 08319FE5 		ldr	r3, .L78+4
 4084 082c 0020A0E3 		mov	r2, #0
 4085 0830 0020C3E5 		strb	r2, [r3, #0]
 425:../button.c   ****         return;
 4086              		.loc 1 425 0
 4087 0834 3B0000EA 		b	.L63
 4088              	.L64:
 426:../button.c   ****     }
 427:../button.c   **** 
 428:../button.c   ****     switch (teclado_estado)
 4089              		.loc 1 428 0
 4090 0838 F8309FE5 		ldr	r3, .L78+4
 4091 083c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4092 0840 030053E3 		cmp	r3, #3
 4093 0844 03F19F97 		ldrls	pc, [pc, r3, asl #2]
 4094 0848 360000EA 		b	.L63
 4095              	.L70:
 4096 084c 28090000 		.word	.L63
 4097 0850 5C080000 		.word	.L67
 4098 0854 84080000 		.word	.L68
 4099 0858 C4080000 		.word	.L69
 4100              	.L67:
 429:../button.c   ****     {
 430:../button.c   ****     case TECLADO_REPOSO:
 431:../button.c   ****         break;
 432:../button.c   **** 
 433:../button.c   ****     case TECLADO_ESPERANDO_TRP:
 434:../button.c   ****         if ((int)(ahora - teclado_timer) >= 0)
 4101              		.loc 1 434 0
 4102 085c D8309FE5 		ldr	r3, .L78+8
 4103 0860 003093E5 		ldr	r3, [r3, #0]
 4104 0864 10201BE5 		ldr	r2, [fp, #-16]
 4105 0868 023063E0 		rsb	r3, r3, r2
 4106 086c 000053E3 		cmp	r3, #0
 4107 0870 270000BA 		blt	.L75
 435:../button.c   ****             teclado_estado = TECLADO_ESCANEANDO;
 4108              		.loc 1 435 0
 4109 0874 BC309FE5 		ldr	r3, .L78+4
 4110 0878 0220A0E3 		mov	r2, #2
 4111 087c 0020C3E5 		strb	r2, [r3, #0]
 436:../button.c   ****         break;
 4112              		.loc 1 436 0
 4113 0880 280000EA 		b	.L63
 4114              	.L68:
 437:../button.c   **** 
 438:../button.c   ****     case TECLADO_ESCANEANDO:
 439:../button.c   ****         digito = teclado_escanear();
 4115              		.loc 1 439 0
 4116 0884 7B0400EB 		bl	teclado_escanear
 4117 0888 0030A0E1 		mov	r3, r0
 4118 088c 11304BE5 		strb	r3, [fp, #-17]
 440:../button.c   ****         if (digito != 0xFF)
 4119              		.loc 1 440 0
 4120 0890 11305BE5 		ldrb	r3, [fp, #-17]	@ zero_extendqisi2
 4121 0894 FF0053E3 		cmp	r3, #255
 4122 0898 1F00000A 		beq	.L76
 441:../button.c   ****         {
 442:../button.c   ****             evento_teclado_digito = digito;
 4123              		.loc 1 442 0
 4124 089c 9C309FE5 		ldr	r3, .L78+12
 4125 08a0 11205BE5 		ldrb	r2, [fp, #-17]
 4126 08a4 0020C3E5 		strb	r2, [r3, #0]
 443:../button.c   ****             teclado_timer = ahora;
 4127              		.loc 1 443 0
 4128 08a8 8C309FE5 		ldr	r3, .L78+8
 4129 08ac 10201BE5 		ldr	r2, [fp, #-16]
 4130 08b0 002083E5 		str	r2, [r3, #0]
 444:../button.c   ****             teclado_estado = TECLADO_ESPERANDO_TRD;
 4131              		.loc 1 444 0
 4132 08b4 7C309FE5 		ldr	r3, .L78+4
 4133 08b8 0320A0E3 		mov	r2, #3
 4134 08bc 0020C3E5 		strb	r2, [r3, #0]
 445:../button.c   ****         }
 446:../button.c   ****         break;
 4135              		.loc 1 446 0
 4136 08c0 180000EA 		b	.L63
 4137              	.L69:
 447:../button.c   **** 
 448:../button.c   ****     case TECLADO_ESPERANDO_TRD:
 449:../button.c   ****         if (teclado_soltado())
 4138              		.loc 1 449 0
 4139 08c4 FEFFFFEB 		bl	teclado_soltado
 4140 08c8 0030A0E1 		mov	r3, r0
 4141 08cc 000053E3 		cmp	r3, #0
 4142 08d0 0B00000A 		beq	.L73
 450:../button.c   ****         {
 451:../button.c   ****             if ((int)(ahora - teclado_timer) >= TECLADO_TRD_US)
 4143              		.loc 1 451 0
 4144 08d4 60309FE5 		ldr	r3, .L78+8
 4145 08d8 003093E5 		ldr	r3, [r3, #0]
 4146 08dc 10201BE5 		ldr	r2, [fp, #-16]
 4147 08e0 023063E0 		rsb	r3, r3, r2
 4148 08e4 0320A0E1 		mov	r2, r3
 4149 08e8 54309FE5 		ldr	r3, .L78+16
 4150 08ec 030052E1 		cmp	r2, r3
 4151 08f0 0B0000DA 		ble	.L77
 452:../button.c   ****                 teclado_estado = TECLADO_REPOSO;
 4152              		.loc 1 452 0
 4153 08f4 3C309FE5 		ldr	r3, .L78+4
 4154 08f8 0020A0E3 		mov	r2, #0
 4155 08fc 0020C3E5 		strb	r2, [r3, #0]
 453:../button.c   ****         }
 454:../button.c   ****         else
 455:../button.c   ****         {
 456:../button.c   ****             teclado_timer = ahora;
 457:../button.c   ****         }
 458:../button.c   ****         break;
 4156              		.loc 1 458 0
 4157 0900 080000EA 		b	.L63
 4158              	.L73:
 456:../button.c   ****             teclado_timer = ahora;
 4159              		.loc 1 456 0
 4160 0904 30309FE5 		ldr	r3, .L78+8
 4161 0908 10201BE5 		ldr	r2, [fp, #-16]
 4162 090c 002083E5 		str	r2, [r3, #0]
 4163              		.loc 1 458 0
 4164 0910 040000EA 		b	.L63
 4165              	.L75:
 436:../button.c   ****         break;
 4166              		.loc 1 436 0
 4167 0914 0000A0E1 		mov	r0, r0	@ nop
 4168 0918 020000EA 		b	.L63
 4169              	.L76:
 446:../button.c   ****         break;
 4170              		.loc 1 446 0
 4171 091c 0000A0E1 		mov	r0, r0	@ nop
 4172 0920 000000EA 		b	.L63
 4173              	.L77:
 4174              		.loc 1 458 0
 4175 0924 0000A0E1 		mov	r0, r0	@ nop
 4176              	.L63:
 459:../button.c   ****     }
 460:../button.c   **** }
 4177              		.loc 1 460 0
 4178 0928 0CD04BE2 		sub	sp, fp, #12
 4179 092c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4180 0930 1EFF2FE1 		bx	lr
 4181              	.L79:
 4182              		.align	2
 4183              	.L78:
 4184 0934 14000000 		.word	estado_juego
 4185 0938 22000000 		.word	teclado_estado
 4186 093c 24000000 		.word	teclado_timer
 4187 0940 31000000 		.word	evento_teclado_digito
 4188 0944 9F860100 		.word	99999
 4189              		.cfi_endproc
 4190              	.LFE8:
 4192              		.align	2
 4193              		.global	leer_estado_boton
 4195              	leer_estado_boton:
 4196              	.LFB9:
 461:../button.c   **** 
 462:../button.c   **** /**
 463:../button.c   ****  * Leer estado fÃ­sico del botÃ³n
 464:../button.c   ****  * Parametros:
 465:../button.c   ****  *  - boton: Ã­ndice in el array botones
 466:../button.c   ****  * Retorno:
 467:../button.c   ****  *  - 1 si el pin asociado estÃ¡ a 1 (libre), 0 si estÃ¡ a 0 (pulsado)
 468:../button.c   ****  */
 469:../button.c   **** inline int leer_estado_boton(int boton)
 470:../button.c   **** {
 4197              		.loc 1 470 0
 4198              		.cfi_startproc
 4199              		@ Function supports interworking.
 4200              		@ args = 0, pretend = 0, frame = 8
 4201              		@ frame_needed = 1, uses_anonymous_args = 0
 4202 0948 0DC0A0E1 		mov	ip, sp
 4203              	.LCFI16:
 4204              		.cfi_def_cfa_register 12
 4205 094c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4206 0950 04B04CE2 		sub	fp, ip, #4
 4207              		.cfi_offset 14, -8
 4208              		.cfi_offset 13, -12
 4209              		.cfi_offset 11, -16
 4210              	.LCFI17:
 4211              		.cfi_def_cfa 11, 4
 4212 0954 08D04DE2 		sub	sp, sp, #8
 4213 0958 10000BE5 		str	r0, [fp, #-16]
 471:../button.c   ****     return (rPDATG & (1 << botones[boton].bit_pin)) ? 1 : 0;
 4214              		.loc 1 471 0
 4215 095c 50309FE5 		ldr	r3, .L81
 4216 0960 001093E5 		ldr	r1, [r3, #0]
 4217 0964 4CC09FE5 		ldr	ip, .L81+4
 4218 0968 10201BE5 		ldr	r2, [fp, #-16]
 4219 096c 0800A0E3 		mov	r0, #8
 4220 0970 0230A0E1 		mov	r3, r2
 4221 0974 8330A0E1 		mov	r3, r3, asl #1
 4222 0978 023083E0 		add	r3, r3, r2
 4223 097c 8331A0E1 		mov	r3, r3, asl #3
 4224 0980 03308CE0 		add	r3, ip, r3
 4225 0984 003083E0 		add	r3, r3, r0
 4226 0988 0130D3E5 		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4227 098c 0120A0E3 		mov	r2, #1
 4228 0990 1233A0E1 		mov	r3, r2, asl r3
 4229 0994 033001E0 		and	r3, r1, r3
 4230 0998 000053E3 		cmp	r3, #0
 4231 099c 0030A003 		moveq	r3, #0
 4232 09a0 0130A013 		movne	r3, #1
 472:../button.c   **** }
 4233              		.loc 1 472 0
 4234 09a4 0300A0E1 		mov	r0, r3
 4235 09a8 0CD04BE2 		sub	sp, fp, #12
 4236 09ac 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4237 09b0 1EFF2FE1 		bx	lr
 4238              	.L82:
 4239              		.align	2
 4240              	.L81:
 4241 09b4 4400D201 		.word	30539844
 4242 09b8 00000000 		.word	botones
 4243              		.cfi_endproc
 4244              	.LFE9:
 4246              		.align	2
 4247              		.global	procesar_antirebote_botones
 4249              	procesar_antirebote_botones:
 4250              	.LFB10:
 473:../button.c   **** 
 474:../button.c   **** /**
 475:../button.c   ****  * Procesar antirrebote de todos los botones
 476:../button.c   ****  * Debe llamarse periÃ³dicamente (ej. desde el timer).
 477:../button.c   ****  */
 478:../button.c   **** void procesar_antirebote_botones(void)
 479:../button.c   **** {
 4251              		.loc 1 479 0
 4252              		.cfi_startproc
 4253              		@ Function supports interworking.
 4254              		@ args = 0, pretend = 0, frame = 8
 4255              		@ frame_needed = 1, uses_anonymous_args = 0
 4256 09bc 0DC0A0E1 		mov	ip, sp
 4257              	.LCFI18:
 4258              		.cfi_def_cfa_register 12
 4259 09c0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4260 09c4 04B04CE2 		sub	fp, ip, #4
 4261              		.cfi_offset 14, -8
 4262              		.cfi_offset 13, -12
 4263              		.cfi_offset 11, -16
 4264              	.LCFI19:
 4265              		.cfi_def_cfa 11, 4
 4266 09c8 08D04DE2 		sub	sp, sp, #8
 480:../button.c   ****     int i;
 481:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 4267              		.loc 1 481 0
 4268 09cc 0030A0E3 		mov	r3, #0
 4269 09d0 10300BE5 		str	r3, [fp, #-16]
 4270 09d4 040000EA 		b	.L84
 4271              	.L85:
 482:../button.c   ****         procesar_rebote(i);
 4272              		.loc 1 482 0 discriminator 2
 4273 09d8 10001BE5 		ldr	r0, [fp, #-16]
 4274 09dc 97FEFFEB 		bl	procesar_rebote
 481:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 4275              		.loc 1 481 0 discriminator 2
 4276 09e0 10301BE5 		ldr	r3, [fp, #-16]
 4277 09e4 013083E2 		add	r3, r3, #1
 4278 09e8 10300BE5 		str	r3, [fp, #-16]
 4279              	.L84:
 481:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 4280              		.loc 1 481 0 is_stmt 0 discriminator 1
 4281 09ec 10301BE5 		ldr	r3, [fp, #-16]
 4282 09f0 010053E3 		cmp	r3, #1
 4283 09f4 F7FFFFDA 		ble	.L85
 483:../button.c   **** }
 4284              		.loc 1 483 0 is_stmt 1
 4285 09f8 0CD04BE2 		sub	sp, fp, #12
 4286 09fc 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4287 0a00 1EFF2FE1 		bx	lr
 4288              		.cfi_endproc
 4289              	.LFE10:
 4291              		.align	2
 4293              	estado_inicial:
 4294              	.LFB12:
 484:../button.c   **** 
 485:../button.c   **** /**
 486:../button.c   ****  * Marcar error en celda y mostrar en display
 487:../button.c   ****  * Parametros:
 488:../button.c   ****  *  - f: fila
 489:../button.c   ****  *  - c: columna
 490:../button.c   ****  * Efectos:
 491:../button.c   ****  *  - marca bit de error en la celda, setea contador_error y muestra sÃ­mbolo
 492:../button.c   ****  */
 493:../button.c   **** static inline void mostrar_error_en_celda(uint8_t f, uint8_t c)
 494:../button.c   **** {
 495:../button.c   ****     cuadricula_C_C[f][c] |= 0x0020;
 496:../button.c   ****     contador_error = TICKS_MOSTRAR_ERROR;
 497:../button.c   **** 
 498:../button.c   ****     // Parpadear display para indicar error claramente - MÃ�S TIEMPO
 499:../button.c   ****     D8Led_symbol(0xE);
 500:../button.c   ****     Delay(20000); // Aumentado de 10000
 501:../button.c   ****     D8Led_symbol(0x0);
 502:../button.c   ****     Delay(20000); // Aumentado de 10000
 503:../button.c   ****     D8Led_symbol(0xE);
 504:../button.c   ****     Delay(20000); // Aumentado de 10000
 505:../button.c   ****     D8Led_symbol(0x0);
 506:../button.c   ****     Delay(20000); // Aumentado de 10000
 507:../button.c   ****     D8Led_symbol(0xE);
 508:../button.c   ****     Delay(20000); // Aumentado de 10000
 509:../button.c   **** }
 510:../button.c   **** 
 511:../button.c   **** /**
 512:../button.c   ****  * Estado: inicial del juego
 513:../button.c   ****  * Arranca el juego cuando se detectÃ³ inicio (cualquier botÃ³n o tecla del teclado matricial).
 514:../button.c   ****  */
 515:../button.c   **** static void estado_inicial(void)
 516:../button.c   **** {
 4295              		.loc 1 516 0
 4296              		.cfi_startproc
 4297              		@ Function supports interworking.
 4298              		@ args = 0, pretend = 0, frame = 8
 4299              		@ frame_needed = 1, uses_anonymous_args = 0
 4300 0a04 0DC0A0E1 		mov	ip, sp
 4301              	.LCFI20:
 4302              		.cfi_def_cfa_register 12
 4303 0a08 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4304 0a0c 04B04CE2 		sub	fp, ip, #4
 4305              		.cfi_offset 14, -8
 4306              		.cfi_offset 13, -12
 4307              		.cfi_offset 11, -16
 4308              	.LCFI21:
 4309              		.cfi_def_cfa 11, 4
 4310 0a10 08D04DE2 		sub	sp, sp, #8
 517:../button.c   ****     int i, j;
 518:../button.c   **** 
 519:../button.c   ****     // 1. Mostrar pantalla inicial si aÃºn no se ha hecho
 520:../button.c   ****     if (!pantalla_inicial_mostrada)
 4311              		.loc 1 520 0
 4312 0a14 44329FE5 		ldr	r3, .L100
 4313 0a18 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4314 0a1c 000053E3 		cmp	r3, #0
 4315 0a20 1300001A 		bne	.L87
 521:../button.c   ****     {
 522:../button.c   ****         sudoku_mostrar_pantalla_inicial();
 4316              		.loc 1 522 0
 4317 0a24 FEFFFFEB 		bl	sudoku_mostrar_pantalla_inicial
 523:../button.c   ****         pantalla_inicial_mostrada = 1;
 4318              		.loc 1 523 0
 4319 0a28 30329FE5 		ldr	r3, .L100
 4320 0a2c 0120A0E3 		mov	r2, #1
 4321 0a30 0020C3E5 		strb	r2, [r3, #0]
 524:../button.c   **** 
 525:../button.c   ****         // Reseteamos variables para asegurar un estado limpio
 526:../button.c   ****         resetear_tiempo_partida();
 4322              		.loc 1 526 0
 4323 0a34 240500EB 		bl	resetear_tiempo_partida
 527:../button.c   ****         juego_iniciado = 0;
 4324              		.loc 1 527 0
 4325 0a38 24329FE5 		ldr	r3, .L100+4
 4326 0a3c 0020A0E3 		mov	r2, #0
 4327 0a40 0020C3E5 		strb	r2, [r3, #0]
 528:../button.c   ****         evento_boton_derecho = 0;
 4328              		.loc 1 528 0
 4329 0a44 1C329FE5 		ldr	r3, .L100+8
 4330 0a48 0020A0E3 		mov	r2, #0
 4331 0a4c 0020C3E5 		strb	r2, [r3, #0]
 529:../button.c   ****         evento_boton_izquierdo = 0;
 4332              		.loc 1 529 0
 4333 0a50 14329FE5 		ldr	r3, .L100+12
 4334 0a54 0020A0E3 		mov	r2, #0
 4335 0a58 0020C3E5 		strb	r2, [r3, #0]
 530:../button.c   ****         evento_teclado_digito = 0xFF; // Limpiar eventos del teclado
 4336              		.loc 1 530 0
 4337 0a5c 0C329FE5 		ldr	r3, .L100+16
 4338 0a60 0020E0E3 		mvn	r2, #0
 4339 0a64 0020C3E5 		strb	r2, [r3, #0]
 531:../button.c   ****         D8Led_symbol(0x0);
 4340              		.loc 1 531 0
 4341 0a68 0000A0E3 		mov	r0, #0
 4342 0a6c FEFFFFEB 		bl	D8Led_symbol
 532:../button.c   ****         return;
 4343              		.loc 1 532 0
 4344 0a70 770000EA 		b	.L86
 4345              	.L87:
 533:../button.c   ****     }
 534:../button.c   **** 
 535:../button.c   ****     // 2. Comprobar si se ha pulsado algÃºn botÃ³n o tecla para empezar
 536:../button.c   ****     if (juego_iniciado || evento_teclado_digito != 0xFF)
 4346              		.loc 1 536 0
 4347 0a74 E8319FE5 		ldr	r3, .L100+4
 4348 0a78 0030D3E5 		ldrb	r3, [r3, #0]
 4349 0a7c FF3003E2 		and	r3, r3, #255
 4350 0a80 000053E3 		cmp	r3, #0
 4351 0a84 0400001A 		bne	.L89
 4352              		.loc 1 536 0 is_stmt 0 discriminator 1
 4353 0a88 E0319FE5 		ldr	r3, .L100+16
 4354 0a8c 0030D3E5 		ldrb	r3, [r3, #0]
 4355 0a90 FF3003E2 		and	r3, r3, #255
 4356 0a94 FF0053E3 		cmp	r3, #255
 4357 0a98 2E00000A 		beq	.L90
 4358              	.L89:
 537:../button.c   ****     {
 538:../button.c   ****         // --- CORRECCIÃ“N CLAVE ---
 539:../button.c   ****         // Si el juego ha sido iniciado (flag de interrupciÃ³n activado),
 540:../button.c   ****         // NO avanzamos hasta que la mÃ¡quina de estados de los botones confirme
 541:../button.c   ****         // que el botÃ³n se ha soltado y ha vuelto al estado de reposo.
 542:../button.c   ****         // Esto evita que el evento "soltar botÃ³n" se cuele en el siguiente estado.
 543:../button.c   ****         if (botones[BOTON_EINT6].estado != e_reposo ||
 4359              		.loc 1 543 0 is_stmt 1
 4360 0a9c D0319FE5 		ldr	r3, .L100+20
 4361 0aa0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4362 0aa4 000053E3 		cmp	r3, #0
 4363 0aa8 6400001A 		bne	.L97
 544:../button.c   ****             botones[BOTON_EINT7].estado != e_reposo ||
 4364              		.loc 1 544 0 discriminator 1
 4365 0aac C0319FE5 		ldr	r3, .L100+20
 4366 0ab0 1830D3E5 		ldrb	r3, [r3, #24]	@ zero_extendqisi2
 543:../button.c   ****         if (botones[BOTON_EINT6].estado != e_reposo ||
 4367              		.loc 1 543 0 discriminator 1
 4368 0ab4 000053E3 		cmp	r3, #0
 4369 0ab8 6200001A 		bne	.L98
 545:../button.c   ****             teclado_estado != TECLADO_REPOSO)
 4370              		.loc 1 545 0
 4371 0abc B4319FE5 		ldr	r3, .L100+24
 4372 0ac0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 544:../button.c   ****             botones[BOTON_EINT7].estado != e_reposo ||
 4373              		.loc 1 544 0
 4374 0ac4 000053E3 		cmp	r3, #0
 4375 0ac8 6000001A 		bne	.L99
 4376              	.L92:
 546:../button.c   ****         {
 547:../button.c   ****             return; // Esperamos en este estado hasta que se suelten los botones/teclas
 548:../button.c   ****         }
 549:../button.c   **** 
 550:../button.c   ****         // Feedback visual de arranque (opcional)
 551:../button.c   ****         D8Led_symbol(0xF);
 4377              		.loc 1 551 0
 4378 0acc 0F00A0E3 		mov	r0, #15
 4379 0ad0 FEFFFFEB 		bl	D8Led_symbol
 552:../button.c   ****     }
 553:../button.c   ****     else
 554:../button.c   ****     {
 555:../button.c   ****         // Si no se ha pulsado nada, seguimos esperando
 556:../button.c   ****         D8Led_symbol(0x0);
 557:../button.c   ****         return;
 558:../button.c   ****     }
 559:../button.c   **** 
 560:../button.c   ****     // 3. InicializaciÃ³n de la Partida
 561:../button.c   ****     // Si llegamos aquÃ­, es porque juego_iniciado = 1 O hay evento de teclado Y los inputs ya es
 562:../button.c   **** 
 563:../button.c   ****     // Limpiamos el flag de inicio para la prÃ³xima vez
 564:../button.c   ****     juego_iniciado = 0;
 4380              		.loc 1 564 0
 4381 0ad4 88319FE5 		ldr	r3, .L100+4
 4382 0ad8 0020A0E3 		mov	r2, #0
 4383 0adc 0020C3E5 		strb	r2, [r3, #0]
 565:../button.c   **** 
 566:../button.c   ****     // IMPORTANTE: Borramos los eventos acumulados.
 567:../button.c   ****     // Como ya hemos validado el inicio, no necesitamos procesar estos eventos
 568:../button.c   ****     // en el siguiente estado.
 569:../button.c   ****     evento_boton_derecho = 0;
 4384              		.loc 1 569 0
 4385 0ae0 80319FE5 		ldr	r3, .L100+8
 4386 0ae4 0020A0E3 		mov	r2, #0
 4387 0ae8 0020C3E5 		strb	r2, [r3, #0]
 570:../button.c   ****     evento_boton_izquierdo = 0;
 4388              		.loc 1 570 0
 4389 0aec 78319FE5 		ldr	r3, .L100+12
 4390 0af0 0020A0E3 		mov	r2, #0
 4391 0af4 0020C3E5 		strb	r2, [r3, #0]
 571:../button.c   ****     evento_teclado_digito = 0xFF; // Limpiar eventos del teclado
 4392              		.loc 1 571 0
 4393 0af8 70319FE5 		ldr	r3, .L100+16
 4394 0afc 0020E0E3 		mvn	r2, #0
 4395 0b00 0020C3E5 		strb	r2, [r3, #0]
 572:../button.c   **** 
 573:../button.c   ****     // Configurar estado siguiente
 574:../button.c   ****     estado_juego = ESTADO_SELEC_FILA;
 4396              		.loc 1 574 0
 4397 0b04 70319FE5 		ldr	r3, .L100+28
 4398 0b08 0120A0E3 		mov	r2, #1
 4399 0b0c 0020C3E5 		strb	r2, [r3, #0]
 575:../button.c   **** 
 576:../button.c   ****     // Variables de control de interfaz
 577:../button.c   ****     tablero_dibujado = 0; // Forzar redibujado del tablero
 4400              		.loc 1 577 0
 4401 0b10 68319FE5 		ldr	r3, .L100+32
 4402 0b14 0020A0E3 		mov	r2, #0
 4403 0b18 0020C3E5 		strb	r2, [r3, #0]
 578:../button.c   **** 
 579:../button.c   ****     // Variables de lÃ³gica de juego
 580:../button.c   ****     numero_actual = 0; // Empezamos pidiendo fila 0 (o la que seleccione)
 4404              		.loc 1 580 0
 4405 0b1c 60319FE5 		ldr	r3, .L100+36
 4406 0b20 0020A0E3 		mov	r2, #0
 4407 0b24 0020C3E5 		strb	r2, [r3, #0]
 581:../button.c   ****     fila_seleccionada = 0;
 4408              		.loc 1 581 0
 4409 0b28 58319FE5 		ldr	r3, .L100+40
 4410 0b2c 0020A0E3 		mov	r2, #0
 4411 0b30 0020C3E5 		strb	r2, [r3, #0]
 582:../button.c   ****     columna_seleccionada = 0;
 4412              		.loc 1 582 0
 4413 0b34 50319FE5 		ldr	r3, .L100+44
 4414 0b38 0020A0E3 		mov	r2, #0
 4415 0b3c 0020C3E5 		strb	r2, [r3, #0]
 583:../button.c   ****     contador_error = 0;
 4416              		.loc 1 583 0
 4417 0b40 48319FE5 		ldr	r3, .L100+48
 4418 0b44 0020A0E3 		mov	r2, #0
 4419 0b48 002083E5 		str	r2, [r3, #0]
 584:../button.c   **** 
 585:../button.c   ****     // 4. Copiar el tablero inicial (ARM -> C)
 586:../button.c   ****     // Restauramos el tablero original para empezar la partida limpia
 587:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 4420              		.loc 1 587 0
 4421 0b4c 0030A0E3 		mov	r3, #0
 4422 0b50 10300BE5 		str	r3, [fp, #-16]
 4423 0b54 1E0000EA 		b	.L93
 4424              	.L90:
 556:../button.c   ****         D8Led_symbol(0x0);
 4425              		.loc 1 556 0
 4426 0b58 0000A0E3 		mov	r0, #0
 4427 0b5c FEFFFFEB 		bl	D8Led_symbol
 557:../button.c   ****         return;
 4428              		.loc 1 557 0
 4429 0b60 3B0000EA 		b	.L86
 4430              	.L96:
 588:../button.c   ****     {
 589:../button.c   ****         for (j = 0; j < 9; j++)
 4431              		.loc 1 589 0
 4432 0b64 0030A0E3 		mov	r3, #0
 4433 0b68 14300BE5 		str	r3, [fp, #-20]
 4434 0b6c 120000EA 		b	.L94
 4435              	.L95:
 590:../button.c   ****         {
 591:../button.c   ****             cuadricula_C_C[i][j] = cuadricula_C_ARM[i][j];
 4436              		.loc 1 591 0 discriminator 2
 4437 0b70 1C219FE5 		ldr	r2, .L100+52
 4438 0b74 10301BE5 		ldr	r3, [fp, #-16]
 4439 0b78 0312A0E1 		mov	r1, r3, asl #4
 4440 0b7c 14301BE5 		ldr	r3, [fp, #-20]
 4441 0b80 033081E0 		add	r3, r1, r3
 4442 0b84 8330A0E1 		mov	r3, r3, asl #1
 4443 0b88 033082E0 		add	r3, r2, r3
 4444 0b8c B020D3E1 		ldrh	r2, [r3, #0]
 4445 0b90 00119FE5 		ldr	r1, .L100+56
 4446 0b94 10301BE5 		ldr	r3, [fp, #-16]
 4447 0b98 0302A0E1 		mov	r0, r3, asl #4
 4448 0b9c 14301BE5 		ldr	r3, [fp, #-20]
 4449 0ba0 033080E0 		add	r3, r0, r3
 4450 0ba4 8330A0E1 		mov	r3, r3, asl #1
 4451 0ba8 033081E0 		add	r3, r1, r3
 4452 0bac B020C3E1 		strh	r2, [r3, #0]	@ movhi
 589:../button.c   ****         for (j = 0; j < 9; j++)
 4453              		.loc 1 589 0 discriminator 2
 4454 0bb0 14301BE5 		ldr	r3, [fp, #-20]
 4455 0bb4 013083E2 		add	r3, r3, #1
 4456 0bb8 14300BE5 		str	r3, [fp, #-20]
 4457              	.L94:
 589:../button.c   ****         for (j = 0; j < 9; j++)
 4458              		.loc 1 589 0 is_stmt 0 discriminator 1
 4459 0bbc 14301BE5 		ldr	r3, [fp, #-20]
 4460 0bc0 080053E3 		cmp	r3, #8
 4461 0bc4 E9FFFFDA 		ble	.L95
 587:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 4462              		.loc 1 587 0 is_stmt 1
 4463 0bc8 10301BE5 		ldr	r3, [fp, #-16]
 4464 0bcc 013083E2 		add	r3, r3, #1
 4465 0bd0 10300BE5 		str	r3, [fp, #-16]
 4466              	.L93:
 587:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 4467              		.loc 1 587 0 is_stmt 0 discriminator 1
 4468 0bd4 10301BE5 		ldr	r3, [fp, #-16]
 4469 0bd8 080053E3 		cmp	r3, #8
 4470 0bdc E0FFFFDA 		ble	.L96
 592:../button.c   ****         }
 593:../button.c   ****     }
 594:../button.c   **** 
 595:../button.c   ****     // Limpiar cualquier error previo
 596:../button.c   ****     limpiar_marcas_error();
 4471              		.loc 1 596 0 is_stmt 1
 4472 0be0 790700EB 		bl	limpiar_marcas_error
 597:../button.c   **** 
 598:../button.c   ****     // Inicializar tiempo de partida
 599:../button.c   ****     tiempo_inicio_partida = timer2_count();
 4473              		.loc 1 599 0
 4474 0be4 FEFFFFEB 		bl	timer2_count
 4475 0be8 0020A0E1 		mov	r2, r0
 4476 0bec A8309FE5 		ldr	r3, .L100+60
 4477 0bf0 002083E5 		str	r2, [r3, #0]
 600:../button.c   ****     ultimo_tiempo_mostrado = 0;
 4478              		.loc 1 600 0
 4479 0bf4 A4309FE5 		ldr	r3, .L100+64
 4480 0bf8 0020A0E3 		mov	r2, #0
 4481 0bfc 002083E5 		str	r2, [r3, #0]
 601:../button.c   **** 
 602:../button.c   ****     // Marcar las pistas antes de actualizar candidatos
 603:../button.c   ****     marcar_pistas_iniciales(cuadricula_C_C);
 4482              		.loc 1 603 0
 4483 0c00 90009FE5 		ldr	r0, .L100+56
 4484 0c04 FEFFFFEB 		bl	marcar_pistas_iniciales
 604:../button.c   **** 
 605:../button.c   ****     candidatos_actualizar_c(cuadricula_C_C);
 4485              		.loc 1 605 0
 4486 0c08 88009FE5 		ldr	r0, .L100+56
 4487 0c0c FEFFFFEB 		bl	candidatos_actualizar_c
 606:../button.c   **** 
 607:../button.c   ****     // Dibujar el tablero completo
 608:../button.c   ****     sudoku_dibujar_tablero_completo(cuadricula_C_C);
 4488              		.loc 1 608 0
 4489 0c10 80009FE5 		ldr	r0, .L100+56
 4490 0c14 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
 609:../button.c   ****     tablero_dibujado = 1;
 4491              		.loc 1 609 0
 4492 0c18 60309FE5 		ldr	r3, .L100+32
 4493 0c1c 0120A0E3 		mov	r2, #1
 4494 0c20 0020C3E5 		strb	r2, [r3, #0]
 610:../button.c   **** 
 611:../button.c   ****     numero_actual = 0;
 4495              		.loc 1 611 0
 4496 0c24 58309FE5 		ldr	r3, .L100+36
 4497 0c28 0020A0E3 		mov	r2, #0
 4498 0c2c 0020C3E5 		strb	r2, [r3, #0]
 612:../button.c   ****     D8Led_symbol(0x0);
 4499              		.loc 1 612 0
 4500 0c30 0000A0E3 		mov	r0, #0
 4501 0c34 FEFFFFEB 		bl	D8Led_symbol
 613:../button.c   **** 
 614:../button.c   ****     // Mostrar tiempo inicial
 615:../button.c   ****     mostrar_tiempo_partida();
 4502              		.loc 1 615 0
 4503 0c38 110400EB 		bl	mostrar_tiempo_partida
 4504 0c3c 040000EA 		b	.L86
 4505              	.L97:
 547:../button.c   ****             return; // Esperamos en este estado hasta que se suelten los botones/teclas
 4506              		.loc 1 547 0
 4507 0c40 0000A0E1 		mov	r0, r0	@ nop
 4508 0c44 020000EA 		b	.L86
 4509              	.L98:
 4510 0c48 0000A0E1 		mov	r0, r0	@ nop
 4511 0c4c 000000EA 		b	.L86
 4512              	.L99:
 4513 0c50 0000A0E1 		mov	r0, r0	@ nop
 4514              	.L86:
 616:../button.c   **** }
 4515              		.loc 1 616 0
 4516 0c54 0CD04BE2 		sub	sp, fp, #12
 4517 0c58 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4518 0c5c 1EFF2FE1 		bx	lr
 4519              	.L101:
 4520              		.align	2
 4521              	.L100:
 4522 0c60 20000000 		.word	pantalla_inicial_mostrada
 4523 0c64 19000000 		.word	juego_iniciado
 4524 0c68 17000000 		.word	evento_boton_derecho
 4525 0c6c 18000000 		.word	evento_boton_izquierdo
 4526 0c70 31000000 		.word	evento_teclado_digito
 4527 0c74 00000000 		.word	botones
 4528 0c78 22000000 		.word	teclado_estado
 4529 0c7c 14000000 		.word	estado_juego
 4530 0c80 21000000 		.word	tablero_dibujado
 4531 0c84 30000000 		.word	numero_actual
 4532 0c88 15000000 		.word	fila_seleccionada
 4533 0c8c 16000000 		.word	columna_seleccionada
 4534 0c90 1C000000 		.word	contador_error
 4535 0c94 00000000 		.word	cuadricula_C_ARM
 4536 0c98 00000000 		.word	cuadricula_C_C
 4537 0c9c 34000000 		.word	tiempo_inicio_partida
 4538 0ca0 38000000 		.word	ultimo_tiempo_mostrado
 4539              		.cfi_endproc
 4540              	.LFE12:
 4542              		.align	2
 4544              	estado_selec_fila:
 4545              	.LFB13:
 617:../button.c   **** 
 618:../button.c   **** /**
 619:../button.c   ****  * Estado: seleccionar fila
 620:../button.c   ****  * Gestiona eventos de teclado y botones para elegir la fila.
 621:../button.c   ****  * Permite fila 0 para acabar la partida.
 622:../button.c   ****  */
 623:../button.c   **** static void estado_selec_fila(void)
 624:../button.c   **** {
 4546              		.loc 1 624 0
 4547              		.cfi_startproc
 4548              		@ Function supports interworking.
 4549              		@ args = 0, pretend = 0, frame = 8
 4550              		@ frame_needed = 1, uses_anonymous_args = 0
 4551 0ca4 0DC0A0E1 		mov	ip, sp
 4552              	.LCFI22:
 4553              		.cfi_def_cfa_register 12
 4554 0ca8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4555 0cac 04B04CE2 		sub	fp, ip, #4
 4556              		.cfi_offset 14, -8
 4557              		.cfi_offset 13, -12
 4558              		.cfi_offset 11, -16
 4559              	.LCFI23:
 4560              		.cfi_def_cfa 11, 4
 4561 0cb0 08D04DE2 		sub	sp, sp, #8
 625:../button.c   ****     static uint8_t fila_anterior = 0xFF;
 626:../button.c   **** 
 627:../button.c   ****     if (evento_teclado_digito != 0xFF)
 4562              		.loc 1 627 0
 4563 0cb4 00349FE5 		ldr	r3, .L126
 4564 0cb8 0030D3E5 		ldrb	r3, [r3, #0]
 4565 0cbc FF3003E2 		and	r3, r3, #255
 4566 0cc0 FF0053E3 		cmp	r3, #255
 4567 0cc4 1300000A 		beq	.L103
 628:../button.c   ****     {
 629:../button.c   ****         // Permitir dÃ­gitos del 0 al 9 (0 para salir)
 630:../button.c   ****         if (evento_teclado_digito >= 0 && evento_teclado_digito <= 9)
 4568              		.loc 1 630 0
 4569 0cc8 EC339FE5 		ldr	r3, .L126
 4570 0ccc 0030D3E5 		ldrb	r3, [r3, #0]
 4571 0cd0 E4339FE5 		ldr	r3, .L126
 4572 0cd4 0030D3E5 		ldrb	r3, [r3, #0]
 4573 0cd8 FF3003E2 		and	r3, r3, #255
 4574 0cdc 090053E3 		cmp	r3, #9
 4575 0ce0 F100008A 		bhi	.L125
 631:../button.c   ****         {
 632:../button.c   ****             numero_actual = evento_teclado_digito;
 4576              		.loc 1 632 0
 4577 0ce4 D0339FE5 		ldr	r3, .L126
 4578 0ce8 0030D3E5 		ldrb	r3, [r3, #0]
 4579 0cec FF2003E2 		and	r2, r3, #255
 4580 0cf0 C8339FE5 		ldr	r3, .L126+4
 4581 0cf4 0020C3E5 		strb	r2, [r3, #0]
 633:../button.c   ****             evento_teclado_digito = 0xFF;
 4582              		.loc 1 633 0
 4583 0cf8 BC339FE5 		ldr	r3, .L126
 4584 0cfc 0020E0E3 		mvn	r2, #0
 4585 0d00 0020C3E5 		strb	r2, [r3, #0]
 634:../button.c   ****             D8Led_symbol(numero_actual);
 4586              		.loc 1 634 0
 4587 0d04 B4339FE5 		ldr	r3, .L126+4
 4588 0d08 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4589 0d0c 0300A0E1 		mov	r0, r3
 4590 0d10 FEFFFFEB 		bl	D8Led_symbol
 635:../button.c   ****         }
 636:../button.c   ****         return;
 4591              		.loc 1 636 0
 4592 0d14 E50000EA 		b	.L102
 4593              	.L103:
 637:../button.c   ****     }
 638:../button.c   **** 
 639:../button.c   ****     if (evento_boton_derecho)
 4594              		.loc 1 639 0
 4595 0d18 A4339FE5 		ldr	r3, .L126+8
 4596 0d1c 0030D3E5 		ldrb	r3, [r3, #0]
 4597 0d20 FF3003E2 		and	r3, r3, #255
 4598 0d24 000053E3 		cmp	r3, #0
 4599 0d28 5700000A 		beq	.L106
 640:../button.c   ****     {
 641:../button.c   ****         evento_boton_derecho = 0;
 4600              		.loc 1 641 0
 4601 0d2c 90339FE5 		ldr	r3, .L126+8
 4602 0d30 0020A0E3 		mov	r2, #0
 4603 0d34 0020C3E5 		strb	r2, [r3, #0]
 642:../button.c   **** 
 643:../button.c   ****         // Quitar resaltado de fila anterior si existÃ­a y no era fila 0
 644:../button.c   ****         if (fila_anterior != 0xFF && numero_actual >= 1 && numero_actual <= 9)
 4604              		.loc 1 644 0
 4605 0d38 88339FE5 		ldr	r3, .L126+12
 4606 0d3c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4607 0d40 FF0053E3 		cmp	r3, #255
 4608 0d44 1900000A 		beq	.L107
 4609              		.loc 1 644 0 is_stmt 0 discriminator 1
 4610 0d48 70339FE5 		ldr	r3, .L126+4
 4611 0d4c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4612 0d50 000053E3 		cmp	r3, #0
 4613 0d54 1500000A 		beq	.L107
 4614 0d58 60339FE5 		ldr	r3, .L126+4
 4615 0d5c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4616 0d60 090053E3 		cmp	r3, #9
 4617 0d64 1100008A 		bhi	.L107
 4618              	.LBB2:
 645:../button.c   ****         {
 646:../button.c   ****             uint8_t col;
 647:../button.c   ****             for (col = 0; col < 9; col++)
 4619              		.loc 1 647 0 is_stmt 1
 4620 0d68 0030A0E3 		mov	r3, #0
 4621 0d6c 0D304BE5 		strb	r3, [fp, #-13]
 4622 0d70 0B0000EA 		b	.L108
 4623              	.L109:
 648:../button.c   ****             {
 649:../button.c   ****                 sudoku_resaltar_celda(numero_actual - 1, col, 0);
 4624              		.loc 1 649 0 discriminator 2
 4625 0d74 44339FE5 		ldr	r3, .L126+4
 4626 0d78 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4627 0d7c 013043E2 		sub	r3, r3, #1
 4628 0d80 FF2003E2 		and	r2, r3, #255
 4629 0d84 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 4630 0d88 0200A0E1 		mov	r0, r2
 4631 0d8c 0310A0E1 		mov	r1, r3
 4632 0d90 0020A0E3 		mov	r2, #0
 4633 0d94 FEFFFFEB 		bl	sudoku_resaltar_celda
 647:../button.c   ****             for (col = 0; col < 9; col++)
 4634              		.loc 1 647 0 discriminator 2
 4635 0d98 0D305BE5 		ldrb	r3, [fp, #-13]
 4636 0d9c 013083E2 		add	r3, r3, #1
 4637 0da0 0D304BE5 		strb	r3, [fp, #-13]
 4638              	.L108:
 647:../button.c   ****             for (col = 0; col < 9; col++)
 4639              		.loc 1 647 0 is_stmt 0 discriminator 1
 4640 0da4 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 4641 0da8 080053E3 		cmp	r3, #8
 4642 0dac F0FFFF9A 		bls	.L109
 4643              	.L107:
 4644              	.LBE2:
 650:../button.c   ****             }
 651:../button.c   ****         }
 652:../button.c   **** 
 653:../button.c   ****         numero_actual++;
 4645              		.loc 1 653 0 is_stmt 1
 4646 0db0 08339FE5 		ldr	r3, .L126+4
 4647 0db4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4648 0db8 013083E2 		add	r3, r3, #1
 4649 0dbc FF2003E2 		and	r2, r3, #255
 4650 0dc0 F8329FE5 		ldr	r3, .L126+4
 4651 0dc4 0020C3E5 		strb	r2, [r3, #0]
 654:../button.c   ****         if (numero_actual > 9)
 4652              		.loc 1 654 0
 4653 0dc8 F0329FE5 		ldr	r3, .L126+4
 4654 0dcc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4655 0dd0 090053E3 		cmp	r3, #9
 4656 0dd4 0200009A 		bls	.L110
 655:../button.c   ****             numero_actual = 0; // Cambio: ahora permite ir a 0
 4657              		.loc 1 655 0
 4658 0dd8 E0329FE5 		ldr	r3, .L126+4
 4659 0ddc 0020A0E3 		mov	r2, #0
 4660 0de0 0020C3E5 		strb	r2, [r3, #0]
 4661              	.L110:
 656:../button.c   ****         D8Led_symbol(numero_actual);
 4662              		.loc 1 656 0
 4663 0de4 D4329FE5 		ldr	r3, .L126+4
 4664 0de8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4665 0dec 0300A0E1 		mov	r0, r3
 4666 0df0 FEFFFFEB 		bl	D8Led_symbol
 657:../button.c   **** 
 658:../button.c   ****         // Resaltar nueva fila (solo si no es 0)
 659:../button.c   ****         if (numero_actual >= 1 && numero_actual <= 9)
 4667              		.loc 1 659 0
 4668 0df4 C4329FE5 		ldr	r3, .L126+4
 4669 0df8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4670 0dfc 000053E3 		cmp	r3, #0
 4671 0e00 1D00000A 		beq	.L111
 4672              		.loc 1 659 0 is_stmt 0 discriminator 1
 4673 0e04 B4329FE5 		ldr	r3, .L126+4
 4674 0e08 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4675 0e0c 090053E3 		cmp	r3, #9
 4676 0e10 1900008A 		bhi	.L111
 4677              	.LBB3:
 660:../button.c   ****         {
 661:../button.c   ****             uint8_t col;
 662:../button.c   ****             for (col = 0; col < 9; col++)
 4678              		.loc 1 662 0 is_stmt 1
 4679 0e14 0030A0E3 		mov	r3, #0
 4680 0e18 0E304BE5 		strb	r3, [fp, #-14]
 4681 0e1c 0B0000EA 		b	.L112
 4682              	.L113:
 663:../button.c   ****             {
 664:../button.c   ****                 sudoku_resaltar_celda(numero_actual - 1, col, 1);
 4683              		.loc 1 664 0 discriminator 2
 4684 0e20 98329FE5 		ldr	r3, .L126+4
 4685 0e24 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4686 0e28 013043E2 		sub	r3, r3, #1
 4687 0e2c FF2003E2 		and	r2, r3, #255
 4688 0e30 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 4689 0e34 0200A0E1 		mov	r0, r2
 4690 0e38 0310A0E1 		mov	r1, r3
 4691 0e3c 0120A0E3 		mov	r2, #1
 4692 0e40 FEFFFFEB 		bl	sudoku_resaltar_celda
 662:../button.c   ****             for (col = 0; col < 9; col++)
 4693              		.loc 1 662 0 discriminator 2
 4694 0e44 0E305BE5 		ldrb	r3, [fp, #-14]
 4695 0e48 013083E2 		add	r3, r3, #1
 4696 0e4c 0E304BE5 		strb	r3, [fp, #-14]
 4697              	.L112:
 662:../button.c   ****             for (col = 0; col < 9; col++)
 4698              		.loc 1 662 0 is_stmt 0 discriminator 1
 4699 0e50 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 4700 0e54 080053E3 		cmp	r3, #8
 4701 0e58 F0FFFF9A 		bls	.L113
 665:../button.c   ****             }
 666:../button.c   ****             fila_anterior = numero_actual - 1;
 4702              		.loc 1 666 0 is_stmt 1
 4703 0e5c 5C329FE5 		ldr	r3, .L126+4
 4704 0e60 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4705 0e64 013043E2 		sub	r3, r3, #1
 4706 0e68 FF2003E2 		and	r2, r3, #255
 4707 0e6c 54329FE5 		ldr	r3, .L126+12
 4708 0e70 0020C3E5 		strb	r2, [r3, #0]
 4709              	.LBE3:
 660:../button.c   ****         {
 4710              		.loc 1 660 0
 4711 0e74 0000A0E1 		mov	r0, r0	@ nop
 667:../button.c   ****         }
 668:../button.c   ****         else
 669:../button.c   ****         {
 670:../button.c   ****             fila_anterior = 0xFF; // No hay fila resaltada para fila 0
 671:../button.c   ****         }
 672:../button.c   **** 
 673:../button.c   ****         return;
 4712              		.loc 1 673 0
 4713 0e78 8C0000EA 		b	.L102
 4714              	.L111:
 670:../button.c   ****             fila_anterior = 0xFF; // No hay fila resaltada para fila 0
 4715              		.loc 1 670 0
 4716 0e7c 44329FE5 		ldr	r3, .L126+12
 4717 0e80 0020E0E3 		mvn	r2, #0
 4718 0e84 0020C3E5 		strb	r2, [r3, #0]
 4719              		.loc 1 673 0
 4720 0e88 880000EA 		b	.L102
 4721              	.L106:
 674:../button.c   ****     }
 675:../button.c   **** 
 676:../button.c   ****     if (evento_boton_izquierdo)
 4722              		.loc 1 676 0
 4723 0e8c 38329FE5 		ldr	r3, .L126+16
 4724 0e90 0030D3E5 		ldrb	r3, [r3, #0]
 4725 0e94 FF3003E2 		and	r3, r3, #255
 4726 0e98 000053E3 		cmp	r3, #0
 4727 0e9c 8300000A 		beq	.L102
 4728              	.LBB4:
 677:../button.c   ****     {
 678:../button.c   ****         evento_boton_izquierdo = 0;
 4729              		.loc 1 678 0
 4730 0ea0 24329FE5 		ldr	r3, .L126+16
 4731 0ea4 0020A0E3 		mov	r2, #0
 4732 0ea8 0020C3E5 		strb	r2, [r3, #0]
 679:../button.c   **** 
 680:../button.c   ****         // Si se seleccionÃ³ fila 0, acabar la partida
 681:../button.c   ****         if (numero_actual == 0)
 4733              		.loc 1 681 0
 4734 0eac 0C329FE5 		ldr	r3, .L126+4
 4735 0eb0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4736 0eb4 000053E3 		cmp	r3, #0
 4737 0eb8 5300001A 		bne	.L115
 4738              	.LBB5:
 682:../button.c   ****         {
 683:../button.c   ****             // Limpiar resaltados si los hay
 684:../button.c   ****             if (fila_anterior != 0xFF)
 4739              		.loc 1 684 0
 4740 0ebc 04329FE5 		ldr	r3, .L126+12
 4741 0ec0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4742 0ec4 FF0053E3 		cmp	r3, #255
 4743 0ec8 0F00000A 		beq	.L116
 4744              	.LBB6:
 685:../button.c   ****             {
 686:../button.c   ****                 uint8_t col;
 687:../button.c   ****                 for (col = 0; col < 9; col++)
 4745              		.loc 1 687 0
 4746 0ecc 0030A0E3 		mov	r3, #0
 4747 0ed0 0F304BE5 		strb	r3, [fp, #-15]
 4748 0ed4 090000EA 		b	.L117
 4749              	.L118:
 688:../button.c   ****                 {
 689:../button.c   ****                     sudoku_resaltar_celda(fila_anterior, col, 0);
 4750              		.loc 1 689 0 discriminator 2
 4751 0ed8 E8319FE5 		ldr	r3, .L126+12
 4752 0edc 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 4753 0ee0 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 4754 0ee4 0200A0E1 		mov	r0, r2
 4755 0ee8 0310A0E1 		mov	r1, r3
 4756 0eec 0020A0E3 		mov	r2, #0
 4757 0ef0 FEFFFFEB 		bl	sudoku_resaltar_celda
 687:../button.c   ****                 for (col = 0; col < 9; col++)
 4758              		.loc 1 687 0 discriminator 2
 4759 0ef4 0F305BE5 		ldrb	r3, [fp, #-15]
 4760 0ef8 013083E2 		add	r3, r3, #1
 4761 0efc 0F304BE5 		strb	r3, [fp, #-15]
 4762              	.L117:
 687:../button.c   ****                 for (col = 0; col < 9; col++)
 4763              		.loc 1 687 0 is_stmt 0 discriminator 1
 4764 0f00 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 4765 0f04 080053E3 		cmp	r3, #8
 4766 0f08 F2FFFF9A 		bls	.L118
 4767              	.L116:
 4768              	.LBE6:
 690:../button.c   ****                 }
 691:../button.c   ****             }
 692:../button.c   **** 
 693:../button.c   ****             // Mostrar resultado de partida terminada con tiempo
 694:../button.c   ****             mostrar_partida_terminada();
 4769              		.loc 1 694 0 is_stmt 1
 4770 0f0c 980400EB 		bl	mostrar_partida_terminada
 695:../button.c   **** 
 696:../button.c   ****             // REINICIO COMPLETO igual que en victoria
 697:../button.c   ****             estado_juego = ESTADO_INICIAL;
 4771              		.loc 1 697 0
 4772 0f10 B8319FE5 		ldr	r3, .L126+20
 4773 0f14 0020A0E3 		mov	r2, #0
 4774 0f18 0020C3E5 		strb	r2, [r3, #0]
 698:../button.c   ****             pantalla_inicial_mostrada = 0; // Forzar mostrar pantalla inicial
 4775              		.loc 1 698 0
 4776 0f1c B0319FE5 		ldr	r3, .L126+24
 4777 0f20 0020A0E3 		mov	r2, #0
 4778 0f24 0020C3E5 		strb	r2, [r3, #0]
 699:../button.c   ****             tablero_dibujado = 0;
 4779              		.loc 1 699 0
 4780 0f28 A8319FE5 		ldr	r3, .L126+28
 4781 0f2c 0020A0E3 		mov	r2, #0
 4782 0f30 0020C3E5 		strb	r2, [r3, #0]
 700:../button.c   ****             resetear_tiempo_partida();
 4783              		.loc 1 700 0
 4784 0f34 E40300EB 		bl	resetear_tiempo_partida
 701:../button.c   ****             numero_actual = 0;
 4785              		.loc 1 701 0
 4786 0f38 80319FE5 		ldr	r3, .L126+4
 4787 0f3c 0020A0E3 		mov	r2, #0
 4788 0f40 0020C3E5 		strb	r2, [r3, #0]
 702:../button.c   ****             fila_seleccionada = 0;
 4789              		.loc 1 702 0
 4790 0f44 90319FE5 		ldr	r3, .L126+32
 4791 0f48 0020A0E3 		mov	r2, #0
 4792 0f4c 0020C3E5 		strb	r2, [r3, #0]
 703:../button.c   ****             columna_seleccionada = 0;
 4793              		.loc 1 703 0
 4794 0f50 88319FE5 		ldr	r3, .L126+36
 4795 0f54 0020A0E3 		mov	r2, #0
 4796 0f58 0020C3E5 		strb	r2, [r3, #0]
 704:../button.c   ****             contador_error = 0;
 4797              		.loc 1 704 0
 4798 0f5c 80319FE5 		ldr	r3, .L126+40
 4799 0f60 0020A0E3 		mov	r2, #0
 4800 0f64 002083E5 		str	r2, [r3, #0]
 705:../button.c   ****             fila_anterior = 0xFF;
 4801              		.loc 1 705 0
 4802 0f68 58319FE5 		ldr	r3, .L126+12
 4803 0f6c 0020E0E3 		mvn	r2, #0
 4804 0f70 0020C3E5 		strb	r2, [r3, #0]
 706:../button.c   **** 
 707:../button.c   ****             // LIMPIAR TODOS los eventos y estados
 708:../button.c   ****             limpiar_todos_eventos();
 4805              		.loc 1 708 0
 4806 0f74 500700EB 		bl	limpiar_todos_eventos
 709:../button.c   **** 
 710:../button.c   ****             // RESTAURAR tablero original
 711:../button.c   ****             uint8_t i, j;
 712:../button.c   ****             for (i = 0; i < NUM_FILAS; i++)
 4807              		.loc 1 712 0
 4808 0f78 0030A0E3 		mov	r3, #0
 4809 0f7c 10304BE5 		strb	r3, [fp, #-16]
 4810 0f80 1B0000EA 		b	.L119
 4811              	.L122:
 713:../button.c   ****             {
 714:../button.c   ****                 for (j = 0; j < 9; j++)
 4812              		.loc 1 714 0
 4813 0f84 0030A0E3 		mov	r3, #0
 4814 0f88 11304BE5 		strb	r3, [fp, #-17]
 4815 0f8c 120000EA 		b	.L120
 4816              	.L121:
 715:../button.c   ****                 {
 716:../button.c   ****                     cuadricula_C_C[i][j] = cuadricula_C_ARM[i][j];
 4817              		.loc 1 716 0 discriminator 2
 4818 0f90 10005BE5 		ldrb	r0, [fp, #-16]	@ zero_extendqisi2
 4819 0f94 11305BE5 		ldrb	r3, [fp, #-17]	@ zero_extendqisi2
 4820 0f98 10C05BE5 		ldrb	ip, [fp, #-16]	@ zero_extendqisi2
 4821 0f9c 11205BE5 		ldrb	r2, [fp, #-17]	@ zero_extendqisi2
 4822 0fa0 40119FE5 		ldr	r1, .L126+44
 4823 0fa4 0CC2A0E1 		mov	ip, ip, asl #4
 4824 0fa8 02208CE0 		add	r2, ip, r2
 4825 0fac 8220A0E1 		mov	r2, r2, asl #1
 4826 0fb0 022081E0 		add	r2, r1, r2
 4827 0fb4 B020D2E1 		ldrh	r2, [r2, #0]
 4828 0fb8 2C119FE5 		ldr	r1, .L126+48
 4829 0fbc 0002A0E1 		mov	r0, r0, asl #4
 4830 0fc0 033080E0 		add	r3, r0, r3
 4831 0fc4 8330A0E1 		mov	r3, r3, asl #1
 4832 0fc8 033081E0 		add	r3, r1, r3
 4833 0fcc B020C3E1 		strh	r2, [r3, #0]	@ movhi
 714:../button.c   ****                 for (j = 0; j < 9; j++)
 4834              		.loc 1 714 0 discriminator 2
 4835 0fd0 11305BE5 		ldrb	r3, [fp, #-17]
 4836 0fd4 013083E2 		add	r3, r3, #1
 4837 0fd8 11304BE5 		strb	r3, [fp, #-17]
 4838              	.L120:
 714:../button.c   ****                 for (j = 0; j < 9; j++)
 4839              		.loc 1 714 0 is_stmt 0 discriminator 1
 4840 0fdc 11305BE5 		ldrb	r3, [fp, #-17]	@ zero_extendqisi2
 4841 0fe0 080053E3 		cmp	r3, #8
 4842 0fe4 E9FFFF9A 		bls	.L121
 712:../button.c   ****             for (i = 0; i < NUM_FILAS; i++)
 4843              		.loc 1 712 0 is_stmt 1
 4844 0fe8 10305BE5 		ldrb	r3, [fp, #-16]
 4845 0fec 013083E2 		add	r3, r3, #1
 4846 0ff0 10304BE5 		strb	r3, [fp, #-16]
 4847              	.L119:
 712:../button.c   ****             for (i = 0; i < NUM_FILAS; i++)
 4848              		.loc 1 712 0 is_stmt 0 discriminator 1
 4849 0ff4 10305BE5 		ldrb	r3, [fp, #-16]	@ zero_extendqisi2
 4850 0ff8 080053E3 		cmp	r3, #8
 4851 0ffc E0FFFF9A 		bls	.L122
 717:../button.c   ****                 }
 718:../button.c   ****             }
 719:../button.c   **** 
 720:../button.c   ****             D8Led_symbol(0x0);
 4852              		.loc 1 720 0 is_stmt 1
 4853 1000 0000A0E3 		mov	r0, #0
 4854 1004 FEFFFFEB 		bl	D8Led_symbol
 721:../button.c   ****             return;
 4855              		.loc 1 721 0
 4856 1008 280000EA 		b	.L102
 4857              	.L115:
 4858              	.LBE5:
 722:../button.c   ****         }
 723:../button.c   **** 
 724:../button.c   ****         // Funcionalidad normal para filas 1-9
 725:../button.c   ****         fila_seleccionada = numero_actual - 1;
 4859              		.loc 1 725 0
 4860 100c AC309FE5 		ldr	r3, .L126+4
 4861 1010 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4862 1014 013043E2 		sub	r3, r3, #1
 4863 1018 FF2003E2 		and	r2, r3, #255
 4864 101c B8309FE5 		ldr	r3, .L126+32
 4865 1020 0020C3E5 		strb	r2, [r3, #0]
 726:../button.c   **** 
 727:../button.c   ****         // Quitar resaltado de toda la fila
 728:../button.c   ****         uint8_t col;
 729:../button.c   ****         for (col = 0; col < 9; col++)
 4866              		.loc 1 729 0
 4867 1024 0030A0E3 		mov	r3, #0
 4868 1028 12304BE5 		strb	r3, [fp, #-18]
 4869 102c 090000EA 		b	.L123
 4870              	.L124:
 730:../button.c   ****         {
 731:../button.c   ****             sudoku_resaltar_celda(fila_seleccionada, col, 0);
 4871              		.loc 1 731 0 discriminator 2
 4872 1030 A4309FE5 		ldr	r3, .L126+32
 4873 1034 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 4874 1038 12305BE5 		ldrb	r3, [fp, #-18]	@ zero_extendqisi2
 4875 103c 0200A0E1 		mov	r0, r2
 4876 1040 0310A0E1 		mov	r1, r3
 4877 1044 0020A0E3 		mov	r2, #0
 4878 1048 FEFFFFEB 		bl	sudoku_resaltar_celda
 729:../button.c   ****         for (col = 0; col < 9; col++)
 4879              		.loc 1 729 0 discriminator 2
 4880 104c 12305BE5 		ldrb	r3, [fp, #-18]
 4881 1050 013083E2 		add	r3, r3, #1
 4882 1054 12304BE5 		strb	r3, [fp, #-18]
 4883              	.L123:
 729:../button.c   ****         for (col = 0; col < 9; col++)
 4884              		.loc 1 729 0 is_stmt 0 discriminator 1
 4885 1058 12305BE5 		ldrb	r3, [fp, #-18]	@ zero_extendqisi2
 4886 105c 080053E3 		cmp	r3, #8
 4887 1060 F2FFFF9A 		bls	.L124
 732:../button.c   ****         }
 733:../button.c   ****         fila_anterior = 0xFF;
 4888              		.loc 1 733 0 is_stmt 1
 4889 1064 5C309FE5 		ldr	r3, .L126+12
 4890 1068 0020E0E3 		mvn	r2, #0
 4891 106c 0020C3E5 		strb	r2, [r3, #0]
 734:../button.c   **** 
 735:../button.c   ****         estado_juego = ESTADO_SELEC_COLUMNA;
 4892              		.loc 1 735 0
 4893 1070 58309FE5 		ldr	r3, .L126+20
 4894 1074 0220A0E3 		mov	r2, #2
 4895 1078 0020C3E5 		strb	r2, [r3, #0]
 736:../button.c   ****         numero_actual = 1;
 4896              		.loc 1 736 0
 4897 107c 3C309FE5 		ldr	r3, .L126+4
 4898 1080 0120A0E3 		mov	r2, #1
 4899 1084 0020C3E5 		strb	r2, [r3, #0]
 737:../button.c   ****         D8Led_symbol(0xC);
 4900              		.loc 1 737 0
 4901 1088 0C00A0E3 		mov	r0, #12
 4902 108c FEFFFFEB 		bl	D8Led_symbol
 738:../button.c   **** 
 739:../button.c   ****         // Resaltar primera columna de la fila seleccionada
 740:../button.c   ****         sudoku_resaltar_celda(fila_seleccionada, 0, 1);
 4903              		.loc 1 740 0
 4904 1090 44309FE5 		ldr	r3, .L126+32
 4905 1094 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4906 1098 0300A0E1 		mov	r0, r3
 4907 109c 0010A0E3 		mov	r1, #0
 4908 10a0 0120A0E3 		mov	r2, #1
 4909 10a4 FEFFFFEB 		bl	sudoku_resaltar_celda
 4910 10a8 000000EA 		b	.L102
 4911              	.L125:
 4912              	.LBE4:
 636:../button.c   ****         return;
 4913              		.loc 1 636 0
 4914 10ac 0000A0E1 		mov	r0, r0	@ nop
 4915              	.L102:
 741:../button.c   ****     }
 742:../button.c   **** }
 4916              		.loc 1 742 0
 4917 10b0 0CD04BE2 		sub	sp, fp, #12
 4918 10b4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4919 10b8 1EFF2FE1 		bx	lr
 4920              	.L127:
 4921              		.align	2
 4922              	.L126:
 4923 10bc 31000000 		.word	evento_teclado_digito
 4924 10c0 30000000 		.word	numero_actual
 4925 10c4 17000000 		.word	evento_boton_derecho
 4926 10c8 32000000 		.word	fila_anterior.4463
 4927 10cc 18000000 		.word	evento_boton_izquierdo
 4928 10d0 14000000 		.word	estado_juego
 4929 10d4 20000000 		.word	pantalla_inicial_mostrada
 4930 10d8 21000000 		.word	tablero_dibujado
 4931 10dc 15000000 		.word	fila_seleccionada
 4932 10e0 16000000 		.word	columna_seleccionada
 4933 10e4 1C000000 		.word	contador_error
 4934 10e8 00000000 		.word	cuadricula_C_ARM
 4935 10ec 00000000 		.word	cuadricula_C_C
 4936              		.cfi_endproc
 4937              	.LFE13:
 4939              		.align	2
 4941              	estado_selec_columna:
 4942              	.LFB14:
 743:../button.c   **** 
 744:../button.c   **** /**
 745:../button.c   ****  * Estado: seleccionar columna
 746:../button.c   ****  * Gestiona eventos para elegir la columna y valida precondiciones.
 747:../button.c   ****  */
 748:../button.c   **** static void estado_selec_columna(void)
 749:../button.c   **** {
 4943              		.loc 1 749 0
 4944              		.cfi_startproc
 4945              		@ Function supports interworking.
 4946              		@ args = 0, pretend = 0, frame = 8
 4947              		@ frame_needed = 1, uses_anonymous_args = 0
 4948 10f0 0DC0A0E1 		mov	ip, sp
 4949              	.LCFI24:
 4950              		.cfi_def_cfa_register 12
 4951 10f4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4952 10f8 04B04CE2 		sub	fp, ip, #4
 4953              		.cfi_offset 14, -8
 4954              		.cfi_offset 13, -12
 4955              		.cfi_offset 11, -16
 4956              	.LCFI25:
 4957              		.cfi_def_cfa 11, 4
 4958 10fc 08D04DE2 		sub	sp, sp, #8
 750:../button.c   ****     uint8_t valor_previo;
 751:../button.c   ****     uint16_t candidatos;
 752:../button.c   ****     uint8_t es_pista;
 753:../button.c   ****     static uint8_t columna_anterior = 0;
 754:../button.c   **** 
 755:../button.c   ****     if (evento_teclado_digito != 0xFF)
 4959              		.loc 1 755 0
 4960 1100 0C339FE5 		ldr	r3, .L140
 4961 1104 0030D3E5 		ldrb	r3, [r3, #0]
 4962 1108 FF3003E2 		and	r3, r3, #255
 4963 110c FF0053E3 		cmp	r3, #255
 4964 1110 1600000A 		beq	.L129
 756:../button.c   ****     {
 757:../button.c   ****         if (evento_teclado_digito >= 1 && evento_teclado_digito <= 9)
 4965              		.loc 1 757 0
 4966 1114 F8329FE5 		ldr	r3, .L140
 4967 1118 0030D3E5 		ldrb	r3, [r3, #0]
 4968 111c FF3003E2 		and	r3, r3, #255
 4969 1120 000053E3 		cmp	r3, #0
 4970 1124 B200000A 		beq	.L137
 4971              		.loc 1 757 0 is_stmt 0 discriminator 1
 4972 1128 E4329FE5 		ldr	r3, .L140
 4973 112c 0030D3E5 		ldrb	r3, [r3, #0]
 4974 1130 FF3003E2 		and	r3, r3, #255
 4975 1134 090053E3 		cmp	r3, #9
 4976 1138 AF00008A 		bhi	.L138
 758:../button.c   ****         {
 759:../button.c   ****             numero_actual = evento_teclado_digito;
 4977              		.loc 1 759 0 is_stmt 1
 4978 113c D0329FE5 		ldr	r3, .L140
 4979 1140 0030D3E5 		ldrb	r3, [r3, #0]
 4980 1144 FF2003E2 		and	r2, r3, #255
 4981 1148 C8329FE5 		ldr	r3, .L140+4
 4982 114c 0020C3E5 		strb	r2, [r3, #0]
 760:../button.c   ****             evento_teclado_digito = 0xFF;
 4983              		.loc 1 760 0
 4984 1150 BC329FE5 		ldr	r3, .L140
 4985 1154 0020E0E3 		mvn	r2, #0
 4986 1158 0020C3E5 		strb	r2, [r3, #0]
 761:../button.c   ****             D8Led_symbol(numero_actual);
 4987              		.loc 1 761 0
 4988 115c B4329FE5 		ldr	r3, .L140+4
 4989 1160 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 4990 1164 0300A0E1 		mov	r0, r3
 4991 1168 FEFFFFEB 		bl	D8Led_symbol
 762:../button.c   ****         }
 763:../button.c   ****         return;
 4992              		.loc 1 763 0
 4993 116c A50000EA 		b	.L128
 4994              	.L129:
 764:../button.c   ****     }
 765:../button.c   **** 
 766:../button.c   ****     if (evento_boton_derecho)
 4995              		.loc 1 766 0
 4996 1170 A4329FE5 		ldr	r3, .L140+8
 4997 1174 0030D3E5 		ldrb	r3, [r3, #0]
 4998 1178 FF3003E2 		and	r3, r3, #255
 4999 117c 000053E3 		cmp	r3, #0
 5000 1180 2A00000A 		beq	.L132
 767:../button.c   ****     {
 768:../button.c   ****         evento_boton_derecho = 0;
 5001              		.loc 1 768 0
 5002 1184 90329FE5 		ldr	r3, .L140+8
 5003 1188 0020A0E3 		mov	r2, #0
 5004 118c 0020C3E5 		strb	r2, [r3, #0]
 769:../button.c   **** 
 770:../button.c   ****         // Quitar resaltado de columna anterior
 771:../button.c   ****         sudoku_resaltar_celda(fila_seleccionada, columna_anterior, 0);
 5005              		.loc 1 771 0
 5006 1190 88329FE5 		ldr	r3, .L140+12
 5007 1194 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5008 1198 84329FE5 		ldr	r3, .L140+16
 5009 119c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5010 11a0 0200A0E1 		mov	r0, r2
 5011 11a4 0310A0E1 		mov	r1, r3
 5012 11a8 0020A0E3 		mov	r2, #0
 5013 11ac FEFFFFEB 		bl	sudoku_resaltar_celda
 772:../button.c   **** 
 773:../button.c   ****         numero_actual++;
 5014              		.loc 1 773 0
 5015 11b0 60329FE5 		ldr	r3, .L140+4
 5016 11b4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5017 11b8 013083E2 		add	r3, r3, #1
 5018 11bc FF2003E2 		and	r2, r3, #255
 5019 11c0 50329FE5 		ldr	r3, .L140+4
 5020 11c4 0020C3E5 		strb	r2, [r3, #0]
 774:../button.c   ****         if (numero_actual > 9)
 5021              		.loc 1 774 0
 5022 11c8 48329FE5 		ldr	r3, .L140+4
 5023 11cc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5024 11d0 090053E3 		cmp	r3, #9
 5025 11d4 0200009A 		bls	.L133
 775:../button.c   ****             numero_actual = 1;
 5026              		.loc 1 775 0
 5027 11d8 38329FE5 		ldr	r3, .L140+4
 5028 11dc 0120A0E3 		mov	r2, #1
 5029 11e0 0020C3E5 		strb	r2, [r3, #0]
 5030              	.L133:
 776:../button.c   ****         D8Led_symbol(numero_actual);
 5031              		.loc 1 776 0
 5032 11e4 2C329FE5 		ldr	r3, .L140+4
 5033 11e8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5034 11ec 0300A0E1 		mov	r0, r3
 5035 11f0 FEFFFFEB 		bl	D8Led_symbol
 777:../button.c   **** 
 778:../button.c   ****         // Resaltar nueva columna
 779:../button.c   ****         columna_anterior = numero_actual - 1;
 5036              		.loc 1 779 0
 5037 11f4 1C329FE5 		ldr	r3, .L140+4
 5038 11f8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5039 11fc 013043E2 		sub	r3, r3, #1
 5040 1200 FF2003E2 		and	r2, r3, #255
 5041 1204 18329FE5 		ldr	r3, .L140+16
 5042 1208 0020C3E5 		strb	r2, [r3, #0]
 780:../button.c   ****         sudoku_resaltar_celda(fila_seleccionada, columna_anterior, 1);
 5043              		.loc 1 780 0
 5044 120c 0C329FE5 		ldr	r3, .L140+12
 5045 1210 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5046 1214 08329FE5 		ldr	r3, .L140+16
 5047 1218 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5048 121c 0200A0E1 		mov	r0, r2
 5049 1220 0310A0E1 		mov	r1, r3
 5050 1224 0120A0E3 		mov	r2, #1
 5051 1228 FEFFFFEB 		bl	sudoku_resaltar_celda
 781:../button.c   **** 
 782:../button.c   ****         return;
 5052              		.loc 1 782 0
 5053 122c 750000EA 		b	.L128
 5054              	.L132:
 783:../button.c   ****     }
 784:../button.c   **** 
 785:../button.c   ****     if (!evento_boton_izquierdo)
 5055              		.loc 1 785 0
 5056 1230 F0319FE5 		ldr	r3, .L140+20
 5057 1234 0030D3E5 		ldrb	r3, [r3, #0]
 5058 1238 FF3003E2 		and	r3, r3, #255
 5059 123c 000053E3 		cmp	r3, #0
 5060 1240 6F00000A 		beq	.L139
 5061              	.L134:
 786:../button.c   ****         return;
 787:../button.c   **** 
 788:../button.c   ****     evento_boton_izquierdo = 0;
 5062              		.loc 1 788 0
 5063 1244 DC319FE5 		ldr	r3, .L140+20
 5064 1248 0020A0E3 		mov	r2, #0
 5065 124c 0020C3E5 		strb	r2, [r3, #0]
 789:../button.c   ****     columna_seleccionada = numero_actual - 1;
 5066              		.loc 1 789 0
 5067 1250 C0319FE5 		ldr	r3, .L140+4
 5068 1254 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5069 1258 013043E2 		sub	r3, r3, #1
 5070 125c FF2003E2 		and	r2, r3, #255
 5071 1260 C4319FE5 		ldr	r3, .L140+24
 5072 1264 0020C3E5 		strb	r2, [r3, #0]
 790:../button.c   **** 
 791:../button.c   ****     // Quitar resaltado
 792:../button.c   ****     sudoku_resaltar_celda(fila_seleccionada, columna_seleccionada, 0);
 5073              		.loc 1 792 0
 5074 1268 B0319FE5 		ldr	r3, .L140+12
 5075 126c 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5076 1270 B4319FE5 		ldr	r3, .L140+24
 5077 1274 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5078 1278 0200A0E1 		mov	r0, r2
 5079 127c 0310A0E1 		mov	r1, r3
 5080 1280 0020A0E3 		mov	r2, #0
 5081 1284 FEFFFFEB 		bl	sudoku_resaltar_celda
 793:../button.c   **** 
 794:../button.c   ****     // Verificar si la celda es una pista (bit 4 = 1)
 795:../button.c   ****     es_pista = (cuadricula_C_C[fila_seleccionada][columna_seleccionada] & (1 << 4)) ? 1 : 0;
 5082              		.loc 1 795 0
 5083 1288 90319FE5 		ldr	r3, .L140+12
 5084 128c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5085 1290 0310A0E1 		mov	r1, r3
 5086 1294 90319FE5 		ldr	r3, .L140+24
 5087 1298 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5088 129c 8C219FE5 		ldr	r2, .L140+28
 5089 12a0 0112A0E1 		mov	r1, r1, asl #4
 5090 12a4 033081E0 		add	r3, r1, r3
 5091 12a8 8330A0E1 		mov	r3, r3, asl #1
 5092 12ac 033082E0 		add	r3, r2, r3
 5093 12b0 B030D3E1 		ldrh	r3, [r3, #0]
 5094 12b4 103003E2 		and	r3, r3, #16
 5095 12b8 000053E3 		cmp	r3, #0
 5096 12bc 0030A003 		moveq	r3, #0
 5097 12c0 0130A013 		movne	r3, #1
 5098 12c4 0D304BE5 		strb	r3, [fp, #-13]
 796:../button.c   **** 
 797:../button.c   ****     // Si es pista, no se puede modificar - volver a selecciÃ³n de fila
 798:../button.c   ****     if (es_pista)
 5099              		.loc 1 798 0
 5100 12c8 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 5101 12cc 000053E3 		cmp	r3, #0
 5102 12d0 0800000A 		beq	.L135
 799:../button.c   ****     {
 800:../button.c   ****         estado_juego = ESTADO_SELEC_FILA;
 5103              		.loc 1 800 0
 5104 12d4 58319FE5 		ldr	r3, .L140+32
 5105 12d8 0120A0E3 		mov	r2, #1
 5106 12dc 0020C3E5 		strb	r2, [r3, #0]
 801:../button.c   ****         numero_actual = 1;
 5107              		.loc 1 801 0
 5108 12e0 30319FE5 		ldr	r3, .L140+4
 5109 12e4 0120A0E3 		mov	r2, #1
 5110 12e8 0020C3E5 		strb	r2, [r3, #0]
 802:../button.c   ****         D8Led_symbol(0xF);
 5111              		.loc 1 802 0
 5112 12ec 0F00A0E3 		mov	r0, #15
 5113 12f0 FEFFFFEB 		bl	D8Led_symbol
 803:../button.c   ****         return;
 5114              		.loc 1 803 0
 5115 12f4 430000EA 		b	.L128
 5116              	.L135:
 804:../button.c   ****     }
 805:../button.c   **** 
 806:../button.c   ****     valor_previo = celda_leer_valor(cuadricula_C_C[fila_seleccionada][columna_seleccionada]);
 5117              		.loc 1 806 0
 5118 12f8 20319FE5 		ldr	r3, .L140+12
 5119 12fc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5120 1300 0310A0E1 		mov	r1, r3
 5121 1304 20319FE5 		ldr	r3, .L140+24
 5122 1308 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5123 130c 1C219FE5 		ldr	r2, .L140+28
 5124 1310 0112A0E1 		mov	r1, r1, asl #4
 5125 1314 033081E0 		add	r3, r1, r3
 5126 1318 8330A0E1 		mov	r3, r3, asl #1
 5127 131c 033082E0 		add	r3, r2, r3
 5128 1320 B030D3E1 		ldrh	r3, [r3, #0]
 5129 1324 0300A0E1 		mov	r0, r3
 5130 1328 FEFFFFEB 		bl	celda_leer_valor
 5131 132c 0030A0E1 		mov	r3, r0
 5132 1330 0E304BE5 		strb	r3, [fp, #-14]
 807:../button.c   ****     candidatos = (cuadricula_C_C[fila_seleccionada][columna_seleccionada] >> BIT_CANDIDATOS) & 0x1F
 5133              		.loc 1 807 0
 5134 1334 E4309FE5 		ldr	r3, .L140+12
 5135 1338 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5136 133c 0310A0E1 		mov	r1, r3
 5137 1340 E4309FE5 		ldr	r3, .L140+24
 5138 1344 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5139 1348 E0209FE5 		ldr	r2, .L140+28
 5140 134c 0112A0E1 		mov	r1, r1, asl #4
 5141 1350 033081E0 		add	r3, r1, r3
 5142 1354 8330A0E1 		mov	r3, r3, asl #1
 5143 1358 033082E0 		add	r3, r2, r3
 5144 135c B030D3E1 		ldrh	r3, [r3, #0]
 5145 1360 A333A0E1 		mov	r3, r3, lsr #7
 5146 1364 B0314BE1 		strh	r3, [fp, #-16]	@ movhi
 808:../button.c   **** 
 809:../button.c   ****     // Esta verificaciÃ³n adicional es para celdas que tienen un valor pero no son pistas
 810:../button.c   ****     // (valores introducidos por el usuario anteriormente)
 811:../button.c   ****     if (valor_previo > 0 && candidatos == 0x1FF)
 5147              		.loc 1 811 0
 5148 1368 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5149 136c 000053E3 		cmp	r3, #0
 5150 1370 0C00000A 		beq	.L136
 5151              		.loc 1 811 0 is_stmt 0 discriminator 1
 5152 1374 B0215BE1 		ldrh	r2, [fp, #-16]
 5153 1378 B8309FE5 		ldr	r3, .L140+36
 5154 137c 030052E1 		cmp	r2, r3
 5155 1380 0800001A 		bne	.L136
 812:../button.c   ****     {
 813:../button.c   ****         estado_juego = ESTADO_SELEC_FILA;
 5156              		.loc 1 813 0 is_stmt 1
 5157 1384 A8309FE5 		ldr	r3, .L140+32
 5158 1388 0120A0E3 		mov	r2, #1
 5159 138c 0020C3E5 		strb	r2, [r3, #0]
 814:../button.c   ****         numero_actual = 1;
 5160              		.loc 1 814 0
 5161 1390 80309FE5 		ldr	r3, .L140+4
 5162 1394 0120A0E3 		mov	r2, #1
 5163 1398 0020C3E5 		strb	r2, [r3, #0]
 815:../button.c   ****         D8Led_symbol(0xF);
 5164              		.loc 1 815 0
 5165 139c 0F00A0E3 		mov	r0, #15
 5166 13a0 FEFFFFEB 		bl	D8Led_symbol
 816:../button.c   ****         return;
 5167              		.loc 1 816 0
 5168 13a4 170000EA 		b	.L128
 5169              	.L136:
 817:../button.c   ****     }
 818:../button.c   **** 
 819:../button.c   ****     // Resaltar celda seleccionada para ediciÃ³n
 820:../button.c   ****     sudoku_resaltar_celda(fila_seleccionada, columna_seleccionada, 1);
 5170              		.loc 1 820 0
 5171 13a8 70309FE5 		ldr	r3, .L140+12
 5172 13ac 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5173 13b0 74309FE5 		ldr	r3, .L140+24
 5174 13b4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5175 13b8 0200A0E1 		mov	r0, r2
 5176 13bc 0310A0E1 		mov	r1, r3
 5177 13c0 0120A0E3 		mov	r2, #1
 5178 13c4 FEFFFFEB 		bl	sudoku_resaltar_celda
 821:../button.c   **** 
 822:../button.c   ****     estado_juego = ESTADO_SELEC_VALOR;
 5179              		.loc 1 822 0
 5180 13c8 64309FE5 		ldr	r3, .L140+32
 5181 13cc 0320A0E3 		mov	r2, #3
 5182 13d0 0020C3E5 		strb	r2, [r3, #0]
 823:../button.c   ****     numero_actual = 0;
 5183              		.loc 1 823 0
 5184 13d4 3C309FE5 		ldr	r3, .L140+4
 5185 13d8 0020A0E3 		mov	r2, #0
 5186 13dc 0020C3E5 		strb	r2, [r3, #0]
 824:../button.c   ****     D8Led_symbol(numero_actual);
 5187              		.loc 1 824 0
 5188 13e0 30309FE5 		ldr	r3, .L140+4
 5189 13e4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5190 13e8 0300A0E1 		mov	r0, r3
 5191 13ec FEFFFFEB 		bl	D8Led_symbol
 5192 13f0 040000EA 		b	.L128
 5193              	.L137:
 763:../button.c   ****         return;
 5194              		.loc 1 763 0
 5195 13f4 0000A0E1 		mov	r0, r0	@ nop
 5196 13f8 020000EA 		b	.L128
 5197              	.L138:
 5198 13fc 0000A0E1 		mov	r0, r0	@ nop
 5199 1400 000000EA 		b	.L128
 5200              	.L139:
 786:../button.c   ****         return;
 5201              		.loc 1 786 0
 5202 1404 0000A0E1 		mov	r0, r0	@ nop
 5203              	.L128:
 825:../button.c   **** }
 5204              		.loc 1 825 0
 5205 1408 0CD04BE2 		sub	sp, fp, #12
 5206 140c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5207 1410 1EFF2FE1 		bx	lr
 5208              	.L141:
 5209              		.align	2
 5210              	.L140:
 5211 1414 31000000 		.word	evento_teclado_digito
 5212 1418 30000000 		.word	numero_actual
 5213 141c 17000000 		.word	evento_boton_derecho
 5214 1420 15000000 		.word	fila_seleccionada
 5215 1424 40000000 		.word	columna_anterior.4494
 5216 1428 18000000 		.word	evento_boton_izquierdo
 5217 142c 16000000 		.word	columna_seleccionada
 5218 1430 00000000 		.word	cuadricula_C_C
 5219 1434 14000000 		.word	estado_juego
 5220 1438 FF010000 		.word	511
 5221              		.cfi_endproc
 5222              	.LFE14:
 5224              		.align	2
 5226              	estado_selec_valor:
 5227              	.LFB15:
 826:../button.c   **** 
 827:../button.c   **** /**
 828:../button.c   ****  * Estado: seleccionar valor
 829:../button.c   ****  * Gestiona la inserciÃ³n de un valor en la celda seleccionada,
 830:../button.c   ****  * detecta errores y verifica si la partida estÃ¡ completa.
 831:../button.c   ****  */
 832:../button.c   **** static void estado_selec_valor(void)
 833:../button.c   **** {
 5228              		.loc 1 833 0
 5229              		.cfi_startproc
 5230              		@ Function supports interworking.
 5231              		@ args = 0, pretend = 0, frame = 8
 5232              		@ frame_needed = 1, uses_anonymous_args = 0
 5233 143c 0DC0A0E1 		mov	ip, sp
 5234              	.LCFI26:
 5235              		.cfi_def_cfa_register 12
 5236 1440 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5237 1444 04B04CE2 		sub	fp, ip, #4
 5238              		.cfi_offset 14, -8
 5239              		.cfi_offset 13, -12
 5240              		.cfi_offset 11, -16
 5241              	.LCFI27:
 5242              		.cfi_def_cfa 11, 4
 5243 1448 08D04DE2 		sub	sp, sp, #8
 834:../button.c   ****     uint8_t valor_previo;
 835:../button.c   ****     int error_detectado = 0;
 5244              		.loc 1 835 0
 5245 144c 0030A0E3 		mov	r3, #0
 5246 1450 10300BE5 		str	r3, [fp, #-16]
 836:../button.c   **** 
 837:../button.c   ****     // --- Manejo de Entrada (Teclado y BotÃ³n Derecho) ---
 838:../button.c   ****     if (evento_teclado_digito != 0xFF)
 5247              		.loc 1 838 0
 5248 1454 FC339FE5 		ldr	r3, .L154
 5249 1458 0030D3E5 		ldrb	r3, [r3, #0]
 5250 145c FF3003E2 		and	r3, r3, #255
 5251 1460 FF0053E3 		cmp	r3, #255
 5252 1464 0C00000A 		beq	.L143
 839:../button.c   ****     {
 840:../button.c   ****         numero_actual = evento_teclado_digito;
 5253              		.loc 1 840 0
 5254 1468 E8339FE5 		ldr	r3, .L154
 5255 146c 0030D3E5 		ldrb	r3, [r3, #0]
 5256 1470 FF2003E2 		and	r2, r3, #255
 5257 1474 E0339FE5 		ldr	r3, .L154+4
 5258 1478 0020C3E5 		strb	r2, [r3, #0]
 841:../button.c   ****         evento_teclado_digito = 0xFF;
 5259              		.loc 1 841 0
 5260 147c D4339FE5 		ldr	r3, .L154
 5261 1480 0020E0E3 		mvn	r2, #0
 5262 1484 0020C3E5 		strb	r2, [r3, #0]
 842:../button.c   ****         D8Led_symbol(numero_actual);
 5263              		.loc 1 842 0
 5264 1488 CC339FE5 		ldr	r3, .L154+4
 5265 148c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5266 1490 0300A0E1 		mov	r0, r3
 5267 1494 FEFFFFEB 		bl	D8Led_symbol
 843:../button.c   ****         return;
 5268              		.loc 1 843 0
 5269 1498 EB0000EA 		b	.L142
 5270              	.L143:
 844:../button.c   ****     }
 845:../button.c   **** 
 846:../button.c   ****     if (evento_boton_derecho)
 5271              		.loc 1 846 0
 5272 149c BC339FE5 		ldr	r3, .L154+8
 5273 14a0 0030D3E5 		ldrb	r3, [r3, #0]
 5274 14a4 FF3003E2 		and	r3, r3, #255
 5275 14a8 000053E3 		cmp	r3, #0
 5276 14ac 1400000A 		beq	.L145
 847:../button.c   ****     {
 848:../button.c   ****         evento_boton_derecho = 0;
 5277              		.loc 1 848 0
 5278 14b0 A8339FE5 		ldr	r3, .L154+8
 5279 14b4 0020A0E3 		mov	r2, #0
 5280 14b8 0020C3E5 		strb	r2, [r3, #0]
 849:../button.c   ****         numero_actual++;
 5281              		.loc 1 849 0
 5282 14bc 98339FE5 		ldr	r3, .L154+4
 5283 14c0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5284 14c4 013083E2 		add	r3, r3, #1
 5285 14c8 FF2003E2 		and	r2, r3, #255
 5286 14cc 88339FE5 		ldr	r3, .L154+4
 5287 14d0 0020C3E5 		strb	r2, [r3, #0]
 850:../button.c   ****         if (numero_actual > 9)
 5288              		.loc 1 850 0
 5289 14d4 80339FE5 		ldr	r3, .L154+4
 5290 14d8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5291 14dc 090053E3 		cmp	r3, #9
 5292 14e0 0200009A 		bls	.L146
 851:../button.c   ****             numero_actual = 0;
 5293              		.loc 1 851 0
 5294 14e4 70339FE5 		ldr	r3, .L154+4
 5295 14e8 0020A0E3 		mov	r2, #0
 5296 14ec 0020C3E5 		strb	r2, [r3, #0]
 5297              	.L146:
 852:../button.c   ****         D8Led_symbol(numero_actual);
 5298              		.loc 1 852 0
 5299 14f0 64339FE5 		ldr	r3, .L154+4
 5300 14f4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5301 14f8 0300A0E1 		mov	r0, r3
 5302 14fc FEFFFFEB 		bl	D8Led_symbol
 853:../button.c   ****         return;
 5303              		.loc 1 853 0
 5304 1500 D10000EA 		b	.L142
 5305              	.L145:
 854:../button.c   ****     }
 855:../button.c   **** 
 856:../button.c   ****     // --- ConfirmaciÃ³n (BotÃ³n Izquierdo) ---
 857:../button.c   ****     if (!evento_boton_izquierdo)
 5306              		.loc 1 857 0
 5307 1504 58339FE5 		ldr	r3, .L154+12
 5308 1508 0030D3E5 		ldrb	r3, [r3, #0]
 5309 150c FF3003E2 		and	r3, r3, #255
 5310 1510 000053E3 		cmp	r3, #0
 5311 1514 CB00000A 		beq	.L153
 5312              	.L147:
 858:../button.c   ****         return;
 859:../button.c   **** 
 860:../button.c   ****     evento_boton_izquierdo = 0;
 5313              		.loc 1 860 0
 5314 1518 44339FE5 		ldr	r3, .L154+12
 5315 151c 0020A0E3 		mov	r2, #0
 5316 1520 0020C3E5 		strb	r2, [r3, #0]
 861:../button.c   ****     valor_previo = celda_leer_valor(cuadricula_C_C[fila_seleccionada][columna_seleccionada]);
 5317              		.loc 1 861 0
 5318 1524 3C339FE5 		ldr	r3, .L154+16
 5319 1528 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5320 152c 0310A0E1 		mov	r1, r3
 5321 1530 34339FE5 		ldr	r3, .L154+20
 5322 1534 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5323 1538 30239FE5 		ldr	r2, .L154+24
 5324 153c 0112A0E1 		mov	r1, r1, asl #4
 5325 1540 033081E0 		add	r3, r1, r3
 5326 1544 8330A0E1 		mov	r3, r3, asl #1
 5327 1548 033082E0 		add	r3, r2, r3
 5328 154c B030D3E1 		ldrh	r3, [r3, #0]
 5329 1550 0300A0E1 		mov	r0, r3
 5330 1554 FEFFFFEB 		bl	celda_leer_valor
 5331 1558 0030A0E1 		mov	r3, r0
 5332 155c 11304BE5 		strb	r3, [fp, #-17]
 862:../button.c   **** 
 863:../button.c   ****     // Caso A: Borrar celda (Valor 0)
 864:../button.c   ****     if (numero_actual == 0)
 5333              		.loc 1 864 0
 5334 1560 F4329FE5 		ldr	r3, .L154+4
 5335 1564 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5336 1568 000053E3 		cmp	r3, #0
 5337 156c 2A00001A 		bne	.L148
 865:../button.c   ****     {
 866:../button.c   ****         cuadricula_C_C[fila_seleccionada][columna_seleccionada] &= 0xFF80; // Borrar valor y candid
 5338              		.loc 1 866 0
 5339 1570 F0329FE5 		ldr	r3, .L154+16
 5340 1574 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5341 1578 0300A0E1 		mov	r0, r3
 5342 157c E8329FE5 		ldr	r3, .L154+20
 5343 1580 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5344 1584 DC229FE5 		ldr	r2, .L154+16
 5345 1588 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5346 158c 02C0A0E1 		mov	ip, r2
 5347 1590 D4229FE5 		ldr	r2, .L154+20
 5348 1594 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5349 1598 D0129FE5 		ldr	r1, .L154+24
 5350 159c 0CC2A0E1 		mov	ip, ip, asl #4
 5351 15a0 02208CE0 		add	r2, ip, r2
 5352 15a4 8220A0E1 		mov	r2, r2, asl #1
 5353 15a8 022081E0 		add	r2, r1, r2
 5354 15ac B020D2E1 		ldrh	r2, [r2, #0]
 5355 15b0 7F20C2E3 		bic	r2, r2, #127
 5356 15b4 0228A0E1 		mov	r2, r2, asl #16
 5357 15b8 2228A0E1 		mov	r2, r2, lsr #16
 5358 15bc AC129FE5 		ldr	r1, .L154+24
 5359 15c0 0002A0E1 		mov	r0, r0, asl #4
 5360 15c4 033080E0 		add	r3, r0, r3
 5361 15c8 8330A0E1 		mov	r3, r3, asl #1
 5362 15cc 033081E0 		add	r3, r1, r3
 5363 15d0 B020C3E1 		strh	r2, [r3, #0]	@ movhi
 867:../button.c   **** 
 868:../button.c   ****         // CORRECCIÃ“N: Actualizar todos los candidatos del tablero cuando se borra un valor
 869:../button.c   ****         candidatos_actualizar_c(cuadricula_C_C);
 5364              		.loc 1 869 0
 5365 15d4 94029FE5 		ldr	r0, .L154+24
 5366 15d8 FEFFFFEB 		bl	candidatos_actualizar_c
 870:../button.c   **** 
 871:../button.c   ****         // CORRECCIÃ“N: Redibujar TODO el tablero para actualizar candidatos visualmente
 872:../button.c   ****         sudoku_dibujar_tablero_completo(cuadricula_C_C);
 5367              		.loc 1 872 0
 5368 15dc 8C029FE5 		ldr	r0, .L154+24
 5369 15e0 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
 873:../button.c   **** 
 874:../button.c   ****         // Quitar resaltado de selecciÃ³n
 875:../button.c   ****         sudoku_resaltar_celda(fila_seleccionada, columna_seleccionada, 0);
 5370              		.loc 1 875 0
 5371 15e4 7C329FE5 		ldr	r3, .L154+16
 5372 15e8 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5373 15ec 78329FE5 		ldr	r3, .L154+20
 5374 15f0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5375 15f4 0200A0E1 		mov	r0, r2
 5376 15f8 0310A0E1 		mov	r1, r3
 5377 15fc 0020A0E3 		mov	r2, #0
 5378 1600 FEFFFFEB 		bl	sudoku_resaltar_celda
 876:../button.c   **** 
 877:../button.c   ****         // Volver a pedir fila
 878:../button.c   ****         estado_juego = ESTADO_SELEC_FILA;
 5379              		.loc 1 878 0
 5380 1604 68329FE5 		ldr	r3, .L154+28
 5381 1608 0120A0E3 		mov	r2, #1
 5382 160c 0020C3E5 		strb	r2, [r3, #0]
 879:../button.c   ****         D8Led_symbol(0x0);
 5383              		.loc 1 879 0
 5384 1610 0000A0E3 		mov	r0, #0
 5385 1614 FEFFFFEB 		bl	D8Led_symbol
 880:../button.c   ****         return;
 5386              		.loc 1 880 0
 5387 1618 8B0000EA 		b	.L142
 5388              	.L148:
 881:../button.c   ****     }
 882:../button.c   **** 
 883:../button.c   ****     // Caso B: Introducir valor (1-9) - VERIFICACIÃ“N DE ERROR
 884:../button.c   ****     // Primero comprobamos si este valor choca con otros
 885:../button.c   ****     error_detectado = detectar_y_marcar_errores_celda(fila_seleccionada, columna_seleccionada, nume
 5389              		.loc 1 885 0
 5390 161c 44329FE5 		ldr	r3, .L154+16
 5391 1620 0010D3E5 		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 5392 1624 40329FE5 		ldr	r3, .L154+20
 5393 1628 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5394 162c 28329FE5 		ldr	r3, .L154+4
 5395 1630 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5396 1634 0100A0E1 		mov	r0, r1
 5397 1638 0210A0E1 		mov	r1, r2
 5398 163c 0320A0E1 		mov	r2, r3
 5399 1640 DB0500EB 		bl	detectar_y_marcar_errores_celda
 5400 1644 10000BE5 		str	r0, [fp, #-16]
 886:../button.c   **** 
 887:../button.c   ****     if (error_detectado)
 5401              		.loc 1 887 0
 5402 1648 10301BE5 		ldr	r3, [fp, #-16]
 5403 164c 000053E3 		cmp	r3, #0
 5404 1650 4700000A 		beq	.L149
 888:../button.c   ****     {
 889:../button.c   ****         // 1. Marcar tambiÃ©n la celda actual como error
 890:../button.c   ****         cuadricula_C_C[fila_seleccionada][columna_seleccionada] |= 0x0020;
 5405              		.loc 1 890 0
 5406 1654 0C329FE5 		ldr	r3, .L154+16
 5407 1658 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5408 165c 0300A0E1 		mov	r0, r3
 5409 1660 04329FE5 		ldr	r3, .L154+20
 5410 1664 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5411 1668 F8219FE5 		ldr	r2, .L154+16
 5412 166c 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5413 1670 02C0A0E1 		mov	ip, r2
 5414 1674 F0219FE5 		ldr	r2, .L154+20
 5415 1678 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5416 167c EC119FE5 		ldr	r1, .L154+24
 5417 1680 0CC2A0E1 		mov	ip, ip, asl #4
 5418 1684 02208CE0 		add	r2, ip, r2
 5419 1688 8220A0E1 		mov	r2, r2, asl #1
 5420 168c 022081E0 		add	r2, r1, r2
 5421 1690 B020D2E1 		ldrh	r2, [r2, #0]
 5422 1694 202082E3 		orr	r2, r2, #32
 5423 1698 0228A0E1 		mov	r2, r2, asl #16
 5424 169c 2228A0E1 		mov	r2, r2, lsr #16
 5425 16a0 C8119FE5 		ldr	r1, .L154+24
 5426 16a4 0002A0E1 		mov	r0, r0, asl #4
 5427 16a8 033080E0 		add	r3, r0, r3
 5428 16ac 8330A0E1 		mov	r3, r3, asl #1
 5429 16b0 033081E0 		add	r3, r1, r3
 5430 16b4 B020C3E1 		strh	r2, [r3, #0]	@ movhi
 891:../button.c   **** 
 892:../button.c   ****         // 2. Escribir el numero temporalmente para que se vea (en estilo error)
 893:../button.c   ****         celda_poner_valor(&cuadricula_C_C[fila_seleccionada][columna_seleccionada], numero_actual);
 5431              		.loc 1 893 0
 5432 16b8 B0219FE5 		ldr	r2, .L154+24
 5433 16bc A4319FE5 		ldr	r3, .L154+16
 5434 16c0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5435 16c4 0312A0E1 		mov	r1, r3, asl #4
 5436 16c8 9C319FE5 		ldr	r3, .L154+20
 5437 16cc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5438 16d0 033081E0 		add	r3, r1, r3
 5439 16d4 8330A0E1 		mov	r3, r3, asl #1
 5440 16d8 032082E0 		add	r2, r2, r3
 5441 16dc 78319FE5 		ldr	r3, .L154+4
 5442 16e0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5443 16e4 0200A0E1 		mov	r0, r2
 5444 16e8 0310A0E1 		mov	r1, r3
 5445 16ec 43FAFFEB 		bl	celda_poner_valor
 894:../button.c   **** 
 895:../button.c   ****         // 3. Quitar el recuadro de selecciÃ³n azul/verde para que se vea bien el rojo/negro de e
 896:../button.c   ****         sudoku_resaltar_celda(fila_seleccionada, columna_seleccionada, 0);
 5446              		.loc 1 896 0
 5447 16f0 70319FE5 		ldr	r3, .L154+16
 5448 16f4 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5449 16f8 6C319FE5 		ldr	r3, .L154+20
 5450 16fc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5451 1700 0200A0E1 		mov	r0, r2
 5452 1704 0310A0E1 		mov	r1, r3
 5453 1708 0020A0E3 		mov	r2, #0
 5454 170c FEFFFFEB 		bl	sudoku_resaltar_celda
 897:../button.c   **** 
 898:../button.c   ****         // 4. Actualizar visualmente la celda actual
 899:../button.c   ****         sudoku_actualizar_celda(cuadricula_C_C, fila_seleccionada, columna_seleccionada);
 5455              		.loc 1 899 0
 5456 1710 50319FE5 		ldr	r3, .L154+16
 5457 1714 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5458 1718 4C319FE5 		ldr	r3, .L154+20
 5459 171c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5460 1720 48019FE5 		ldr	r0, .L154+24
 5461 1724 0210A0E1 		mov	r1, r2
 5462 1728 0320A0E1 		mov	r2, r3
 5463 172c FEFFFFEB 		bl	sudoku_actualizar_celda
 900:../button.c   **** 
 901:../button.c   ****         // 5. Cambiar a estado de error para esperar un tiempo y luego limpiar
 902:../button.c   ****         contador_error = TICKS_MOSTRAR_ERROR;
 5464              		.loc 1 902 0
 5465 1730 40319FE5 		ldr	r3, .L154+32
 5466 1734 4B2FA0E3 		mov	r2, #300
 5467 1738 002083E5 		str	r2, [r3, #0]
 903:../button.c   ****         estado_juego = ESTADO_MOSTRANDO_ERROR;
 5468              		.loc 1 903 0
 5469 173c 30319FE5 		ldr	r3, .L154+28
 5470 1740 0420A0E3 		mov	r2, #4
 5471 1744 0020C3E5 		strb	r2, [r3, #0]
 904:../button.c   **** 
 905:../button.c   ****         // Feedback MEJORADO en 8Led - mÃ¡s tiempo de parpadeo
 906:../button.c   ****         D8Led_symbol(0xE);
 5472              		.loc 1 906 0
 5473 1748 0E00A0E3 		mov	r0, #14
 5474 174c FEFFFFEB 		bl	D8Led_symbol
 907:../button.c   ****         Delay(30000); // Mayor duraciÃ³n inicial
 5475              		.loc 1 907 0
 5476 1750 24019FE5 		ldr	r0, .L154+36
 5477 1754 FEFFFFEB 		bl	Delay
 908:../button.c   ****         D8Led_symbol(0x0);
 5478              		.loc 1 908 0
 5479 1758 0000A0E3 		mov	r0, #0
 5480 175c FEFFFFEB 		bl	D8Led_symbol
 909:../button.c   ****         Delay(15000);
 5481              		.loc 1 909 0
 5482 1760 18019FE5 		ldr	r0, .L154+40
 5483 1764 FEFFFFEB 		bl	Delay
 910:../button.c   ****         D8Led_symbol(0xE);
 5484              		.loc 1 910 0
 5485 1768 0E00A0E3 		mov	r0, #14
 5486 176c FEFFFFEB 		bl	D8Led_symbol
 911:../button.c   ****         return;
 5487              		.loc 1 911 0
 5488 1770 350000EA 		b	.L142
 5489              	.L149:
 912:../button.c   ****     }
 913:../button.c   **** 
 914:../button.c   ****     // Caso C: Valor VÃ¡lido
 915:../button.c   ****     celda_poner_valor(&cuadricula_C_C[fila_seleccionada][columna_seleccionada], numero_actual);
 5490              		.loc 1 915 0
 5491 1774 F4209FE5 		ldr	r2, .L154+24
 5492 1778 E8309FE5 		ldr	r3, .L154+16
 5493 177c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5494 1780 0312A0E1 		mov	r1, r3, asl #4
 5495 1784 E0309FE5 		ldr	r3, .L154+20
 5496 1788 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5497 178c 033081E0 		add	r3, r1, r3
 5498 1790 8330A0E1 		mov	r3, r3, asl #1
 5499 1794 032082E0 		add	r2, r2, r3
 5500 1798 BC309FE5 		ldr	r3, .L154+4
 5501 179c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5502 17a0 0200A0E1 		mov	r0, r2
 5503 17a4 0310A0E1 		mov	r1, r3
 5504 17a8 14FAFFEB 		bl	celda_poner_valor
 916:../button.c   **** 
 917:../button.c   ****     // CORRECCIÃ“N: Actualizar candidatos correctamente
 918:../button.c   ****     if (valor_previo != 0)
 5505              		.loc 1 918 0
 5506 17ac 11305BE5 		ldrb	r3, [fp, #-17]	@ zero_extendqisi2
 5507 17b0 000053E3 		cmp	r3, #0
 5508 17b4 0200000A 		beq	.L150
 919:../button.c   ****     {
 920:../button.c   ****         // Si habÃ­a un valor previo, recalcular todos los candidatos
 921:../button.c   ****         candidatos_actualizar_c(cuadricula_C_C);
 5509              		.loc 1 921 0
 5510 17b8 B0009FE5 		ldr	r0, .L154+24
 5511 17bc FEFFFFEB 		bl	candidatos_actualizar_c
 5512 17c0 070000EA 		b	.L151
 5513              	.L150:
 922:../button.c   ****     }
 923:../button.c   ****     else
 924:../button.c   ****     {
 925:../button.c   ****         // Si era una celda vacÃ­a, propagar la eliminaciÃ³n de candidatos
 926:../button.c   ****         candidatos_propagar_c(cuadricula_C_C, fila_seleccionada, columna_seleccionada);
 5514              		.loc 1 926 0
 5515 17c4 9C309FE5 		ldr	r3, .L154+16
 5516 17c8 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5517 17cc 98309FE5 		ldr	r3, .L154+20
 5518 17d0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5519 17d4 94009FE5 		ldr	r0, .L154+24
 5520 17d8 0210A0E1 		mov	r1, r2
 5521 17dc 0320A0E1 		mov	r2, r3
 5522 17e0 FEFFFFEB 		bl	candidatos_propagar_c
 5523              	.L151:
 927:../button.c   ****     }
 928:../button.c   **** 
 929:../button.c   ****     // CORRECCIÃ“N: Redibujar TODO el tablero para mostrar cambios en candidatos
 930:../button.c   ****     sudoku_dibujar_tablero_completo(cuadricula_C_C);
 5524              		.loc 1 930 0
 5525 17e4 84009FE5 		ldr	r0, .L154+24
 5526 17e8 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
 931:../button.c   **** 
 932:../button.c   ****     // Quitar resaltado
 933:../button.c   ****     sudoku_resaltar_celda(fila_seleccionada, columna_seleccionada, 0);
 5527              		.loc 1 933 0
 5528 17ec 74309FE5 		ldr	r3, .L154+16
 5529 17f0 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 5530 17f4 70309FE5 		ldr	r3, .L154+20
 5531 17f8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5532 17fc 0200A0E1 		mov	r0, r2
 5533 1800 0310A0E1 		mov	r1, r3
 5534 1804 0020A0E3 		mov	r2, #0
 5535 1808 FEFFFFEB 		bl	sudoku_resaltar_celda
 934:../button.c   **** 
 935:../button.c   ****     // Verificar Victoria
 936:../button.c   ****     if (verificar_tablero_completo())
 5536              		.loc 1 936 0
 5537 180c 9B0400EB 		bl	verificar_tablero_completo
 5538 1810 0030A0E1 		mov	r3, r0
 5539 1814 000053E3 		cmp	r3, #0
 5540 1818 0100000A 		beq	.L152
 937:../button.c   ****     {
 938:../button.c   ****         finalizar_partida_completa();
 5541              		.loc 1 938 0
 5542 181c C40400EB 		bl	finalizar_partida_completa
 939:../button.c   ****         return;
 5543              		.loc 1 939 0
 5544 1820 090000EA 		b	.L142
 5545              	.L152:
 940:../button.c   ****     }
 941:../button.c   **** 
 942:../button.c   ****     // Siguiente jugada
 943:../button.c   ****     estado_juego = ESTADO_SELEC_FILA;
 5546              		.loc 1 943 0
 5547 1824 48309FE5 		ldr	r3, .L154+28
 5548 1828 0120A0E3 		mov	r2, #1
 5549 182c 0020C3E5 		strb	r2, [r3, #0]
 944:../button.c   ****     numero_actual = 0;
 5550              		.loc 1 944 0
 5551 1830 24309FE5 		ldr	r3, .L154+4
 5552 1834 0020A0E3 		mov	r2, #0
 5553 1838 0020C3E5 		strb	r2, [r3, #0]
 945:../button.c   ****     D8Led_symbol(0x0);
 5554              		.loc 1 945 0
 5555 183c 0000A0E3 		mov	r0, #0
 5556 1840 FEFFFFEB 		bl	D8Led_symbol
 5557 1844 000000EA 		b	.L142
 5558              	.L153:
 858:../button.c   ****         return;
 5559              		.loc 1 858 0
 5560 1848 0000A0E1 		mov	r0, r0	@ nop
 5561              	.L142:
 946:../button.c   **** }
 5562              		.loc 1 946 0
 5563 184c 0CD04BE2 		sub	sp, fp, #12
 5564 1850 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5565 1854 1EFF2FE1 		bx	lr
 5566              	.L155:
 5567              		.align	2
 5568              	.L154:
 5569 1858 31000000 		.word	evento_teclado_digito
 5570 185c 30000000 		.word	numero_actual
 5571 1860 17000000 		.word	evento_boton_derecho
 5572 1864 18000000 		.word	evento_boton_izquierdo
 5573 1868 15000000 		.word	fila_seleccionada
 5574 186c 16000000 		.word	columna_seleccionada
 5575 1870 00000000 		.word	cuadricula_C_C
 5576 1874 14000000 		.word	estado_juego
 5577 1878 1C000000 		.word	contador_error
 5578 187c 30750000 		.word	30000
 5579 1880 983A0000 		.word	15000
 5580              		.cfi_endproc
 5581              	.LFE15:
 5583              		.align	2
 5585              	estado_mostrando_error:
 5586              	.LFB16:
 947:../button.c   **** 
 948:../button.c   **** /**
 949:../button.c   ****  * Estado: mostrando error
 950:../button.c   ****  * Temporiza la visualizaciÃ³n del error y vuelve al estado de selecciÃ³n.
 951:../button.c   ****  */
 952:../button.c   **** static void estado_mostrando_error(void)
 953:../button.c   **** {
 5587              		.loc 1 953 0
 5588              		.cfi_startproc
 5589              		@ Function supports interworking.
 5590              		@ args = 0, pretend = 0, frame = 0
 5591              		@ frame_needed = 1, uses_anonymous_args = 0
 5592 1884 0DC0A0E1 		mov	ip, sp
 5593              	.LCFI28:
 5594              		.cfi_def_cfa_register 12
 5595 1888 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5596 188c 04B04CE2 		sub	fp, ip, #4
 5597              		.cfi_offset 14, -8
 5598              		.cfi_offset 13, -12
 5599              		.cfi_offset 11, -16
 5600              	.LCFI29:
 5601              		.cfi_def_cfa 11, 4
 954:../button.c   ****     if (contador_error > 0)
 5602              		.loc 1 954 0
 5603 1890 54319FE5 		ldr	r3, .L162
 5604 1894 003093E5 		ldr	r3, [r3, #0]
 5605 1898 000053E3 		cmp	r3, #0
 5606 189c 270000DA 		ble	.L157
 955:../button.c   ****     {
 956:../button.c   ****         contador_error--;
 5607              		.loc 1 956 0
 5608 18a0 44319FE5 		ldr	r3, .L162
 5609 18a4 003093E5 		ldr	r3, [r3, #0]
 5610 18a8 012043E2 		sub	r2, r3, #1
 5611 18ac 38319FE5 		ldr	r3, .L162
 5612 18b0 002083E5 		str	r2, [r3, #0]
 957:../button.c   **** 
 958:../button.c   ****         // Efecto visual MEJORADO en LEDs con mÃ¡s tiempo visible
 959:../button.c   ****         if ((contador_error % 30) == 0) // Cambiado de 20 a 30
 5613              		.loc 1 959 0
 5614 18b4 30319FE5 		ldr	r3, .L162
 5615 18b8 001093E5 		ldr	r1, [r3, #0]
 5616 18bc 2C319FE5 		ldr	r3, .L162+4
 5617 18c0 9123C3E0 		smull	r2, r3, r1, r3
 5618 18c4 013083E0 		add	r3, r3, r1
 5619 18c8 4322A0E1 		mov	r2, r3, asr #4
 5620 18cc C13FA0E1 		mov	r3, r1, asr #31
 5621 18d0 022063E0 		rsb	r2, r3, r2
 5622 18d4 0230A0E1 		mov	r3, r2
 5623 18d8 0332A0E1 		mov	r3, r3, asl #4
 5624 18dc 033062E0 		rsb	r3, r2, r3
 5625 18e0 8330A0E1 		mov	r3, r3, asl #1
 5626 18e4 012063E0 		rsb	r2, r3, r1
 5627 18e8 000052E3 		cmp	r2, #0
 5628 18ec 0200001A 		bne	.L158
 960:../button.c   ****             D8Led_symbol(0xE);
 5629              		.loc 1 960 0
 5630 18f0 0E00A0E3 		mov	r0, #14
 5631 18f4 FEFFFFEB 		bl	D8Led_symbol
 961:../button.c   ****         else if ((contador_error % 15) == 0) // Cambiado de 10 a 15
 962:../button.c   ****             D8Led_symbol(0x0);
 963:../button.c   **** 
 964:../button.c   ****         return;
 5632              		.loc 1 964 0
 5633 18f8 380000EA 		b	.L156
 5634              	.L158:
 961:../button.c   ****         else if ((contador_error % 15) == 0) // Cambiado de 10 a 15
 5635              		.loc 1 961 0
 5636 18fc E8309FE5 		ldr	r3, .L162
 5637 1900 001093E5 		ldr	r1, [r3, #0]
 5638 1904 E4309FE5 		ldr	r3, .L162+4
 5639 1908 9123C3E0 		smull	r2, r3, r1, r3
 5640 190c 013083E0 		add	r3, r3, r1
 5641 1910 C321A0E1 		mov	r2, r3, asr #3
 5642 1914 C13FA0E1 		mov	r3, r1, asr #31
 5643 1918 022063E0 		rsb	r2, r3, r2
 5644 191c 0230A0E1 		mov	r3, r2
 5645 1920 0332A0E1 		mov	r3, r3, asl #4
 5646 1924 033062E0 		rsb	r3, r2, r3
 5647 1928 012063E0 		rsb	r2, r3, r1
 5648 192c 000052E3 		cmp	r2, #0
 5649 1930 2900001A 		bne	.L161
 962:../button.c   ****             D8Led_symbol(0x0);
 5650              		.loc 1 962 0
 5651 1934 0000A0E3 		mov	r0, #0
 5652 1938 FEFFFFEB 		bl	D8Led_symbol
 5653              		.loc 1 964 0
 5654 193c 270000EA 		b	.L156
 5655              	.L157:
 965:../button.c   ****     }
 966:../button.c   **** 
 967:../button.c   ****     // Cuando acaba el tiempo de mostrar error:
 968:../button.c   **** 
 969:../button.c   ****     // 1. Limpiar TODAS las celdas marcadas con error (la actual y las que chocaban)
 970:../button.c   ****     limpiar_errores_visuales();
 5656              		.loc 1 970 0
 5657 1940 FF0500EB 		bl	limpiar_errores_visuales
 971:../button.c   **** 
 972:../button.c   ****     // 2. Revertir el valor invÃ¡lido de la celda del usuario a 0 (o al valor previo si prefieres
 973:../button.c   ****     // AquÃ­ asumimos que si fallÃ³, se vacÃ­a.
 974:../button.c   ****     cuadricula_C_C[fila_seleccionada][columna_seleccionada] &= 0xFF80; // Limpiar valor
 5658              		.loc 1 974 0
 5659 1944 A8309FE5 		ldr	r3, .L162+8
 5660 1948 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5661 194c 0300A0E1 		mov	r0, r3
 5662 1950 A0309FE5 		ldr	r3, .L162+12
 5663 1954 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5664 1958 94209FE5 		ldr	r2, .L162+8
 5665 195c 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5666 1960 02C0A0E1 		mov	ip, r2
 5667 1964 8C209FE5 		ldr	r2, .L162+12
 5668 1968 0020D2E5 		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5669 196c 88109FE5 		ldr	r1, .L162+16
 5670 1970 0CC2A0E1 		mov	ip, ip, asl #4
 5671 1974 02208CE0 		add	r2, ip, r2
 5672 1978 8220A0E1 		mov	r2, r2, asl #1
 5673 197c 022081E0 		add	r2, r1, r2
 5674 1980 B020D2E1 		ldrh	r2, [r2, #0]
 5675 1984 7F20C2E3 		bic	r2, r2, #127
 5676 1988 0228A0E1 		mov	r2, r2, asl #16
 5677 198c 2228A0E1 		mov	r2, r2, lsr #16
 5678 1990 64109FE5 		ldr	r1, .L162+16
 5679 1994 0002A0E1 		mov	r0, r0, asl #4
 5680 1998 033080E0 		add	r3, r0, r3
 5681 199c 8330A0E1 		mov	r3, r3, asl #1
 5682 19a0 033081E0 		add	r3, r1, r3
 5683 19a4 B020C3E1 		strh	r2, [r3, #0]	@ movhi
 975:../button.c   **** 
 976:../button.c   ****     // CORRECCIÃ“N: Actualizar candidatos despuÃ©s de limpiar el valor errÃ³neo
 977:../button.c   ****     candidatos_actualizar_c(cuadricula_C_C);
 5684              		.loc 1 977 0
 5685 19a8 4C009FE5 		ldr	r0, .L162+16
 5686 19ac FEFFFFEB 		bl	candidatos_actualizar_c
 978:../button.c   **** 
 979:../button.c   ****     // CORRECCIÃ“N: Redibujar todo el tablero para actualizar candidatos
 980:../button.c   ****     sudoku_dibujar_tablero_completo(cuadricula_C_C);
 5687              		.loc 1 980 0
 5688 19b0 44009FE5 		ldr	r0, .L162+16
 5689 19b4 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
 981:../button.c   **** 
 982:../button.c   ****     // 3. Volver al juego
 983:../button.c   ****     estado_juego = ESTADO_SELEC_FILA;
 5690              		.loc 1 983 0
 5691 19b8 40309FE5 		ldr	r3, .L162+20
 5692 19bc 0120A0E3 		mov	r2, #1
 5693 19c0 0020C3E5 		strb	r2, [r3, #0]
 984:../button.c   ****     numero_actual = 0;
 5694              		.loc 1 984 0
 5695 19c4 38309FE5 		ldr	r3, .L162+24
 5696 19c8 0020A0E3 		mov	r2, #0
 5697 19cc 0020C3E5 		strb	r2, [r3, #0]
 985:../button.c   ****     D8Led_symbol(0x0);
 5698              		.loc 1 985 0
 5699 19d0 0000A0E3 		mov	r0, #0
 5700 19d4 FEFFFFEB 		bl	D8Led_symbol
 5701 19d8 000000EA 		b	.L156
 5702              	.L161:
 964:../button.c   ****         return;
 5703              		.loc 1 964 0
 5704 19dc 0000A0E1 		mov	r0, r0	@ nop
 5705              	.L156:
 986:../button.c   **** }
 5706              		.loc 1 986 0
 5707 19e0 0CD04BE2 		sub	sp, fp, #12
 5708 19e4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5709 19e8 1EFF2FE1 		bx	lr
 5710              	.L163:
 5711              		.align	2
 5712              	.L162:
 5713 19ec 1C000000 		.word	contador_error
 5714 19f0 89888888 		.word	-2004318071
 5715 19f4 15000000 		.word	fila_seleccionada
 5716 19f8 16000000 		.word	columna_seleccionada
 5717 19fc 00000000 		.word	cuadricula_C_C
 5718 1a00 14000000 		.word	estado_juego
 5719 1a04 30000000 		.word	numero_actual
 5720              		.cfi_endproc
 5721              	.LFE16:
 5723              		.align	2
 5725              	teclado_leer_columnas:
 5726              	.LFB17:
 987:../button.c   **** 
 988:../button.c   **** /**
 989:../button.c   ****  * TECLADO MATRICIAL - FUNCIONES
 990:../button.c   ****  */
 991:../button.c   **** static inline uint8_t teclado_leer_columnas(volatile uint8_t *addr)
 992:../button.c   **** {
 5727              		.loc 1 992 0
 5728              		.cfi_startproc
 5729              		@ Function supports interworking.
 5730              		@ args = 0, pretend = 0, frame = 8
 5731              		@ frame_needed = 1, uses_anonymous_args = 0
 5732 1a08 0DC0A0E1 		mov	ip, sp
 5733              	.LCFI30:
 5734              		.cfi_def_cfa_register 12
 5735 1a0c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5736 1a10 04B04CE2 		sub	fp, ip, #4
 5737              		.cfi_offset 14, -8
 5738              		.cfi_offset 13, -12
 5739              		.cfi_offset 11, -16
 5740              	.LCFI31:
 5741              		.cfi_def_cfa 11, 4
 5742 1a14 08D04DE2 		sub	sp, sp, #8
 5743 1a18 10000BE5 		str	r0, [fp, #-16]
 993:../button.c   ****     return (*addr) & 0x0F;
 5744              		.loc 1 993 0
 5745 1a1c 10301BE5 		ldr	r3, [fp, #-16]
 5746 1a20 0030D3E5 		ldrb	r3, [r3, #0]
 5747 1a24 FF3003E2 		and	r3, r3, #255
 5748 1a28 0F3003E2 		and	r3, r3, #15
 5749 1a2c FF3003E2 		and	r3, r3, #255
 994:../button.c   **** }
 5750              		.loc 1 994 0
 5751 1a30 0300A0E1 		mov	r0, r3
 5752 1a34 0CD04BE2 		sub	sp, fp, #12
 5753 1a38 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5754 1a3c 1EFF2FE1 		bx	lr
 5755              		.cfi_endproc
 5756              	.LFE17:
 5758              		.align	2
 5759              		.global	teclado_soltado
 5761              	teclado_soltado:
 5762              	.LFB18:
 995:../button.c   **** 
 996:../button.c   **** /**
 997:../button.c   ****  * Indica si el teclado estÃ¡ suelto (pin de fila 1)
 998:../button.c   ****  * Retorno:
 999:../button.c   ****  *  - 1 si suelto, 0 si pulsado
1000:../button.c   ****  */
1001:../button.c   **** inline int teclado_soltado(void)
1002:../button.c   **** {
 5763              		.loc 1 1002 0
 5764              		.cfi_startproc
 5765              		@ Function supports interworking.
 5766              		@ args = 0, pretend = 0, frame = 0
 5767              		@ frame_needed = 1, uses_anonymous_args = 0
 5768 1a40 0DC0A0E1 		mov	ip, sp
 5769              	.LCFI32:
 5770              		.cfi_def_cfa_register 12
 5771 1a44 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5772 1a48 04B04CE2 		sub	fp, ip, #4
 5773              		.cfi_offset 14, -8
 5774              		.cfi_offset 13, -12
 5775              		.cfi_offset 11, -16
 5776              	.LCFI33:
 5777              		.cfi_def_cfa 11, 4
1003:../button.c   ****     return (rPDATG & (1 << 1)) ? 1 : 0;
 5778              		.loc 1 1003 0
 5779 1a4c 20309FE5 		ldr	r3, .L166
 5780 1a50 003093E5 		ldr	r3, [r3, #0]
 5781 1a54 023003E2 		and	r3, r3, #2
 5782 1a58 000053E3 		cmp	r3, #0
 5783 1a5c 0030A003 		moveq	r3, #0
 5784 1a60 0130A013 		movne	r3, #1
1004:../button.c   **** }
 5785              		.loc 1 1004 0
 5786 1a64 0300A0E1 		mov	r0, r3
 5787 1a68 0CD04BE2 		sub	sp, fp, #12
 5788 1a6c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5789 1a70 1EFF2FE1 		bx	lr
 5790              	.L167:
 5791              		.align	2
 5792              	.L166:
 5793 1a74 4400D201 		.word	30539844
 5794              		.cfi_endproc
 5795              	.LFE18:
 5797              		.align	2
 5799              	teclado_escanear:
 5800              	.LFB19:
1005:../button.c   **** 
1006:../button.c   **** /**
1007:../button.c   ****  * Escanear teclado matricial.
1008:../button.c   ****  *
1009:../button.c   ****  * Recorre las filas y compara el valor leÃ­do de las columnas con
1010:../button.c   ****  * mÃ¡scaras para identificar la columna activa. Devuelve el dÃ­gito
1011:../button.c   ****  * correspondiente segÃºn tecla_mapa, o 0xFF si no hay tecla detectada.
1012:../button.c   ****  *
1013:../button.c   ****  * Retorno:
1014:../button.c   ****  *  - dÃ­gito (0..9) si hay tecla detectable, 0xFF si no hay tecla.
1015:../button.c   ****  */
1016:../button.c   **** static uint8_t teclado_escanear(void)
1017:../button.c   **** {
 5801              		.loc 1 1017 0
 5802              		.cfi_startproc
 5803              		@ Function supports interworking.
 5804              		@ args = 0, pretend = 0, frame = 24
 5805              		@ frame_needed = 1, uses_anonymous_args = 0
 5806 1a78 0DC0A0E1 		mov	ip, sp
 5807              	.LCFI34:
 5808              		.cfi_def_cfa_register 12
 5809 1a7c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5810 1a80 04B04CE2 		sub	fp, ip, #4
 5811              		.cfi_offset 14, -8
 5812              		.cfi_offset 13, -12
 5813              		.cfi_offset 11, -16
 5814              	.LCFI35:
 5815              		.cfi_def_cfa 11, 4
 5816 1a84 18D04DE2 		sub	sp, sp, #24
1018:../button.c   ****     uint8_t fila, col, columnas_leidas;
1019:../button.c   ****     volatile uint8_t *direcciones[4] = {
 5817              		.loc 1 1019 0
 5818 1a88 00319FE5 		ldr	r3, .L176
 5819 1a8c 20C04BE2 		sub	ip, fp, #32
 5820 1a90 0F0093E8 		ldmia	r3, {r0, r1, r2, r3}
 5821 1a94 0F008CE8 		stmia	ip, {r0, r1, r2, r3}
1020:../button.c   ****         (volatile uint8_t *)TECLADO_FILA0,
1021:../button.c   ****         (volatile uint8_t *)TECLADO_FILA1,
1022:../button.c   ****         (volatile uint8_t *)TECLADO_FILA2,
1023:../button.c   ****         (volatile uint8_t *)TECLADO_FILA3};
1024:../button.c   **** 
1025:../button.c   ****     for (fila = 0; fila < 4; fila++)
 5822              		.loc 1 1025 0
 5823 1a98 0030A0E3 		mov	r3, #0
 5824 1a9c 0D304BE5 		strb	r3, [fp, #-13]
 5825 1aa0 320000EA 		b	.L169
 5826              	.L175:
1026:../button.c   ****     {
1027:../button.c   ****         columnas_leidas = teclado_leer_columnas(direcciones[fila]);
 5827              		.loc 1 1027 0
 5828 1aa4 0D205BE5 		ldrb	r2, [fp, #-13]	@ zero_extendqisi2
 5829 1aa8 1330E0E3 		mvn	r3, #19
 5830 1aac 0221A0E1 		mov	r2, r2, asl #2
 5831 1ab0 0C104BE2 		sub	r1, fp, #12
 5832 1ab4 022081E0 		add	r2, r1, r2
 5833 1ab8 033082E0 		add	r3, r2, r3
 5834 1abc 003093E5 		ldr	r3, [r3, #0]
 5835 1ac0 0300A0E1 		mov	r0, r3
 5836 1ac4 CFFFFFEB 		bl	teclado_leer_columnas
 5837 1ac8 0030A0E1 		mov	r3, r0
 5838 1acc 0F304BE5 		strb	r3, [fp, #-15]
1028:../button.c   **** 
1029:../button.c   ****         if (columnas_leidas != 0x0F)
 5839              		.loc 1 1029 0
 5840 1ad0 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 5841 1ad4 0F0053E3 		cmp	r3, #15
 5842 1ad8 2100000A 		beq	.L170
 5843              	.LBB7:
1030:../button.c   ****         {
1031:../button.c   ****             uint8_t mask_col[4] = {0x7, 0xB, 0xD, 0xE};
 5844              		.loc 1 1031 0
 5845 1adc B0309FE5 		ldr	r3, .L176+4
 5846 1ae0 003093E5 		ldr	r3, [r3, #0]
 5847 1ae4 24300BE5 		str	r3, [fp, #-36]
1032:../button.c   ****             for (col = 0; col < 4; col++)
 5848              		.loc 1 1032 0
 5849 1ae8 0030A0E3 		mov	r3, #0
 5850 1aec 0E304BE5 		strb	r3, [fp, #-14]
 5851 1af0 180000EA 		b	.L171
 5852              	.L174:
1033:../button.c   ****             {
1034:../button.c   ****                 if (columnas_leidas == mask_col[col])
 5853              		.loc 1 1034 0
 5854 1af4 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 5855 1af8 1730E0E3 		mvn	r3, #23
 5856 1afc 0C104BE2 		sub	r1, fp, #12
 5857 1b00 022081E0 		add	r2, r1, r2
 5858 1b04 033082E0 		add	r3, r2, r3
 5859 1b08 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 5860 1b0c 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 5861 1b10 030052E1 		cmp	r2, r3
 5862 1b14 0C00001A 		bne	.L172
 5863              	.LBB8:
1035:../button.c   ****                 {
1036:../button.c   ****                     uint8_t digito = tecla_mapa[fila][col];
 5864              		.loc 1 1036 0
 5865 1b18 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 5866 1b1c 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5867 1b20 70209FE5 		ldr	r2, .L176+8
 5868 1b24 0111A0E1 		mov	r1, r1, asl #2
 5869 1b28 033081E0 		add	r3, r1, r3
 5870 1b2c 033082E0 		add	r3, r2, r3
 5871 1b30 0030D3E5 		ldrb	r3, [r3, #0]
 5872 1b34 10304BE5 		strb	r3, [fp, #-16]
1037:../button.c   ****                     if (digito != 0xFF)
 5873              		.loc 1 1037 0
 5874 1b38 10305BE5 		ldrb	r3, [fp, #-16]	@ zero_extendqisi2
 5875 1b3c FF0053E3 		cmp	r3, #255
 5876 1b40 0100000A 		beq	.L172
1038:../button.c   ****                         return digito;
 5877              		.loc 1 1038 0
 5878 1b44 10305BE5 		ldrb	r3, [fp, #-16]	@ zero_extendqisi2
 5879 1b48 0C0000EA 		b	.L173
 5880              	.L172:
 5881              	.LBE8:
1032:../button.c   ****             for (col = 0; col < 4; col++)
 5882              		.loc 1 1032 0
 5883 1b4c 0E305BE5 		ldrb	r3, [fp, #-14]
 5884 1b50 013083E2 		add	r3, r3, #1
 5885 1b54 0E304BE5 		strb	r3, [fp, #-14]
 5886              	.L171:
1032:../button.c   ****             for (col = 0; col < 4; col++)
 5887              		.loc 1 1032 0 is_stmt 0 discriminator 1
 5888 1b58 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5889 1b5c 030053E3 		cmp	r3, #3
 5890 1b60 E3FFFF9A 		bls	.L174
 5891              	.L170:
 5892              	.LBE7:
1025:../button.c   ****     for (fila = 0; fila < 4; fila++)
 5893              		.loc 1 1025 0 is_stmt 1
 5894 1b64 0D305BE5 		ldrb	r3, [fp, #-13]
 5895 1b68 013083E2 		add	r3, r3, #1
 5896 1b6c 0D304BE5 		strb	r3, [fp, #-13]
 5897              	.L169:
1025:../button.c   ****     for (fila = 0; fila < 4; fila++)
 5898              		.loc 1 1025 0 is_stmt 0 discriminator 1
 5899 1b70 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 5900 1b74 030053E3 		cmp	r3, #3
 5901 1b78 C9FFFF9A 		bls	.L175
1039:../button.c   ****                 }
1040:../button.c   ****             }
1041:../button.c   ****         }
1042:../button.c   ****     }
1043:../button.c   ****     return 0xFF;
 5902              		.loc 1 1043 0 is_stmt 1
 5903 1b7c FF30A0E3 		mov	r3, #255
 5904              	.L173:
1044:../button.c   **** }
 5905              		.loc 1 1044 0
 5906 1b80 0300A0E1 		mov	r0, r3
 5907 1b84 0CD04BE2 		sub	sp, fp, #12
 5908 1b88 00689DE8 		ldmfd	sp, {fp, sp, lr}
 5909 1b8c 1EFF2FE1 		bx	lr
 5910              	.L177:
 5911              		.align	2
 5912              	.L176:
 5913 1b90 88000000 		.word	C.58.6312
 5914 1b94 98000000 		.word	C.59.6317
 5915 1b98 00000000 		.word	tecla_mapa
 5916              		.cfi_endproc
 5917              	.LFE19:
 5919              		.align	2
 5920              		.global	marcar_pistas_iniciales
 5922              	marcar_pistas_iniciales:
 5923              	.LFB20:
1045:../button.c   **** 
1046:../button.c   **** /**
1047:../button.c   ****  * Marca como pistas todas las celdas que tienen valor inicial
1048:../button.c   ****  */
1049:../button.c   **** void marcar_pistas_iniciales(CELDA cuadricula[NUM_FILAS][NUM_COLUMNAS])
1050:../button.c   **** {
 5924              		.loc 1 1050 0
 5925              		.cfi_startproc
 5926              		@ Function supports interworking.
 5927              		@ args = 0, pretend = 0, frame = 16
 5928              		@ frame_needed = 1, uses_anonymous_args = 0
 5929 1b9c 0DC0A0E1 		mov	ip, sp
 5930              	.LCFI36:
 5931              		.cfi_def_cfa_register 12
 5932 1ba0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5933 1ba4 04B04CE2 		sub	fp, ip, #4
 5934              		.cfi_offset 14, -8
 5935              		.cfi_offset 13, -12
 5936              		.cfi_offset 11, -16
 5937              	.LCFI37:
 5938              		.cfi_def_cfa 11, 4
 5939 1ba8 10D04DE2 		sub	sp, sp, #16
 5940 1bac 18000BE5 		str	r0, [fp, #-24]
1051:../button.c   ****     uint8_t i, j;
1052:../button.c   **** 
1053:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 5941              		.loc 1 1053 0
 5942 1bb0 0030A0E3 		mov	r3, #0
 5943 1bb4 0D304BE5 		strb	r3, [fp, #-13]
 5944 1bb8 2B0000EA 		b	.L179
 5945              	.L183:
1054:../button.c   ****     {
1055:../button.c   ****         for (j = 0; j < 9; j++) // Solo las 9 primeras columnas
 5946              		.loc 1 1055 0
 5947 1bbc 0030A0E3 		mov	r3, #0
 5948 1bc0 0E304BE5 		strb	r3, [fp, #-14]
 5949 1bc4 220000EA 		b	.L180
 5950              	.L182:
1056:../button.c   ****         {
1057:../button.c   ****             // Si la celda tiene un valor (no es 0), marcarla como pista
1058:../button.c   ****             if (celda_leer_valor(cuadricula[i][j]) > 0)
 5951              		.loc 1 1058 0
 5952 1bc8 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 5953 1bcc 8332A0E1 		mov	r3, r3, asl #5
 5954 1bd0 18201BE5 		ldr	r2, [fp, #-24]
 5955 1bd4 032082E0 		add	r2, r2, r3
 5956 1bd8 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5957 1bdc 8330A0E1 		mov	r3, r3, asl #1
 5958 1be0 033082E0 		add	r3, r2, r3
 5959 1be4 B030D3E1 		ldrh	r3, [r3, #0]
 5960 1be8 0300A0E1 		mov	r0, r3
 5961 1bec FEFFFFEB 		bl	celda_leer_valor
 5962 1bf0 0030A0E1 		mov	r3, r0
 5963 1bf4 000053E3 		cmp	r3, #0
 5964 1bf8 1200000A 		beq	.L181
1059:../button.c   ****             {
1060:../button.c   ****                 cuadricula[i][j] |= (1 << 4); // Activar bit de pista
 5965              		.loc 1 1060 0
 5966 1bfc 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 5967 1c00 8332A0E1 		mov	r3, r3, asl #5
 5968 1c04 18201BE5 		ldr	r2, [fp, #-24]
 5969 1c08 031082E0 		add	r1, r2, r3
 5970 1c0c 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5971 1c10 0D205BE5 		ldrb	r2, [fp, #-13]	@ zero_extendqisi2
 5972 1c14 8222A0E1 		mov	r2, r2, asl #5
 5973 1c18 18001BE5 		ldr	r0, [fp, #-24]
 5974 1c1c 020080E0 		add	r0, r0, r2
 5975 1c20 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 5976 1c24 8220A0E1 		mov	r2, r2, asl #1
 5977 1c28 022080E0 		add	r2, r0, r2
 5978 1c2c B020D2E1 		ldrh	r2, [r2, #0]
 5979 1c30 102082E3 		orr	r2, r2, #16
 5980 1c34 0228A0E1 		mov	r2, r2, asl #16
 5981 1c38 2228A0E1 		mov	r2, r2, lsr #16
 5982 1c3c 8330A0E1 		mov	r3, r3, asl #1
 5983 1c40 033081E0 		add	r3, r1, r3
 5984 1c44 B020C3E1 		strh	r2, [r3, #0]	@ movhi
 5985              	.L181:
1055:../button.c   ****         for (j = 0; j < 9; j++) // Solo las 9 primeras columnas
 5986              		.loc 1 1055 0
 5987 1c48 0E305BE5 		ldrb	r3, [fp, #-14]
 5988 1c4c 013083E2 		add	r3, r3, #1
 5989 1c50 0E304BE5 		strb	r3, [fp, #-14]
 5990              	.L180:
1055:../button.c   ****         for (j = 0; j < 9; j++) // Solo las 9 primeras columnas
 5991              		.loc 1 1055 0 is_stmt 0 discriminator 1
 5992 1c54 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 5993 1c58 080053E3 		cmp	r3, #8
 5994 1c5c D9FFFF9A 		bls	.L182
1053:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 5995              		.loc 1 1053 0 is_stmt 1
 5996 1c60 0D305BE5 		ldrb	r3, [fp, #-13]
 5997 1c64 013083E2 		add	r3, r3, #1
 5998 1c68 0D304BE5 		strb	r3, [fp, #-13]
 5999              	.L179:
1053:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 6000              		.loc 1 1053 0 is_stmt 0 discriminator 1
 6001 1c6c 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 6002 1c70 080053E3 		cmp	r3, #8
 6003 1c74 D0FFFF9A 		bls	.L183
1061:../button.c   ****             }
1062:../button.c   ****         }
1063:../button.c   ****     }
1064:../button.c   **** }
 6004              		.loc 1 1064 0 is_stmt 1
 6005 1c78 0CD04BE2 		sub	sp, fp, #12
 6006 1c7c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 6007 1c80 1EFF2FE1 		bx	lr
 6008              		.cfi_endproc
 6009              	.LFE20:
 6011              		.align	2
 6013              	mostrar_tiempo_partida:
 6014              	.LFB21:
1065:../button.c   **** 
1066:../button.c   **** /**
1067:../button.c   ****  * Muestra el tiempo transcurrido de la partida en la esquina superior derecha
1068:../button.c   ****  */
1069:../button.c   **** static void mostrar_tiempo_partida(void)
1070:../button.c   **** {
 6015              		.loc 1 1070 0
 6016              		.cfi_startproc
 6017              		@ Function supports interworking.
 6018              		@ args = 0, pretend = 0, frame = 32
 6019              		@ frame_needed = 1, uses_anonymous_args = 0
 6020 1c84 0DC0A0E1 		mov	ip, sp
 6021              	.LCFI38:
 6022              		.cfi_def_cfa_register 12
 6023 1c88 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 6024 1c8c 04B04CE2 		sub	fp, ip, #4
 6025              		.cfi_offset 14, -8
 6026              		.cfi_offset 13, -12
 6027              		.cfi_offset 11, -16
 6028              	.LCFI39:
 6029              		.cfi_def_cfa 11, 4
 6030 1c90 28D04DE2 		sub	sp, sp, #40
1071:../button.c   ****     static uint32_t ultimo_segundo_mostrado = 0;
1072:../button.c   **** 
1073:../button.c   ****     // CORRECCIÃ“N: Verificar que el tiempo de inicio es vÃ¡lido
1074:../button.c   ****     if (tiempo_inicio_partida == 0)
 6031              		.loc 1 1074 0
 6032 1c94 0C329FE5 		ldr	r3, .L192
 6033 1c98 003093E5 		ldr	r3, [r3, #0]
 6034 1c9c 000053E3 		cmp	r3, #0
 6035 1ca0 7A00000A 		beq	.L190
 6036              	.L185:
1075:../button.c   ****         return;
1076:../button.c   **** 
1077:../button.c   ****     uint32_t tiempo_actual = timer2_count();
 6037              		.loc 1 1077 0
 6038 1ca4 FEFFFFEB 		bl	timer2_count
 6039 1ca8 1C000BE5 		str	r0, [fp, #-28]
1078:../button.c   **** 
1079:../button.c   ****     // CORRECCIÃ“N: Verificar que el tiempo actual es mayor que el de inicio
1080:../button.c   ****     if (tiempo_actual < tiempo_inicio_partida)
 6040              		.loc 1 1080 0
 6041 1cac F4319FE5 		ldr	r3, .L192
 6042 1cb0 003093E5 		ldr	r3, [r3, #0]
 6043 1cb4 1C201BE5 		ldr	r2, [fp, #-28]
 6044 1cb8 030052E1 		cmp	r2, r3
 6045 1cbc 7500003A 		bcc	.L191
 6046              	.L187:
1081:../button.c   ****         return;
1082:../button.c   **** 
1083:../button.c   ****     uint32_t tiempo_transcurrido_us = tiempo_actual - tiempo_inicio_partida;
 6047              		.loc 1 1083 0
 6048 1cc0 E0319FE5 		ldr	r3, .L192
 6049 1cc4 003093E5 		ldr	r3, [r3, #0]
 6050 1cc8 1C201BE5 		ldr	r2, [fp, #-28]
 6051 1ccc 023063E0 		rsb	r3, r3, r2
 6052 1cd0 10300BE5 		str	r3, [fp, #-16]
1084:../button.c   **** 
1085:../button.c   ****     // Limitar el tiempo máximo para evitar overflow (10 minutos máximo para juego normal)
1086:../button.c   ****     if (tiempo_transcurrido_us > 600000000UL) // 10 minutos en microsegundos
 6053              		.loc 1 1086 0
 6054 1cd4 10201BE5 		ldr	r2, [fp, #-16]
 6055 1cd8 CC319FE5 		ldr	r3, .L192+4
 6056 1cdc 030052E1 		cmp	r2, r3
 6057 1ce0 0100009A 		bls	.L188
1087:../button.c   ****         tiempo_transcurrido_us = 600000000UL;
 6058              		.loc 1 1087 0
 6059 1ce4 C0319FE5 		ldr	r3, .L192+4
 6060 1ce8 10300BE5 		str	r3, [fp, #-16]
 6061              	.L188:
1088:../button.c   **** 
1089:../button.c   ****     uint32_t segundos_actuales = tiempo_transcurrido_us / 1000000UL;
 6062              		.loc 1 1089 0
 6063 1cec 10201BE5 		ldr	r2, [fp, #-16]
 6064 1cf0 B8319FE5 		ldr	r3, .L192+8
 6065 1cf4 921383E0 		umull	r1, r3, r2, r3
 6066 1cf8 2339A0E1 		mov	r3, r3, lsr #18
 6067 1cfc 20300BE5 		str	r3, [fp, #-32]
1090:../button.c   **** 
1091:../button.c   ****     // Solo actualizar si ha cambiado el segundo
1092:../button.c   ****     if (segundos_actuales != ultimo_segundo_mostrado)
 6068              		.loc 1 1092 0
 6069 1d00 AC319FE5 		ldr	r3, .L192+12
 6070 1d04 003093E5 		ldr	r3, [r3, #0]
 6071 1d08 20201BE5 		ldr	r2, [fp, #-32]
 6072 1d0c 030052E1 		cmp	r2, r3
 6073 1d10 6100000A 		beq	.L184
 6074              	.LBB9:
1093:../button.c   ****     {
1094:../button.c   ****         uint32_t minutos = segundos_actuales / 60;
 6075              		.loc 1 1094 0
 6076 1d14 20201BE5 		ldr	r2, [fp, #-32]
 6077 1d18 98319FE5 		ldr	r3, .L192+16
 6078 1d1c 921383E0 		umull	r1, r3, r2, r3
 6079 1d20 A332A0E1 		mov	r3, r3, lsr #5
 6080 1d24 14300BE5 		str	r3, [fp, #-20]
1095:../button.c   ****         uint32_t segundos = segundos_actuales % 60;
 6081              		.loc 1 1095 0
 6082 1d28 20201BE5 		ldr	r2, [fp, #-32]
 6083 1d2c 84319FE5 		ldr	r3, .L192+16
 6084 1d30 921383E0 		umull	r1, r3, r2, r3
 6085 1d34 A312A0E1 		mov	r1, r3, lsr #5
 6086 1d38 0130A0E1 		mov	r3, r1
 6087 1d3c 0332A0E1 		mov	r3, r3, asl #4
 6088 1d40 033061E0 		rsb	r3, r1, r3
 6089 1d44 0331A0E1 		mov	r3, r3, asl #2
 6090 1d48 023063E0 		rsb	r3, r3, r2
 6091 1d4c 18300BE5 		str	r3, [fp, #-24]
1096:../button.c   **** 
1097:../button.c   ****         char tiempo_str[8];
1098:../button.c   **** 
1099:../button.c   ****         // Formatear tiempo como MM:SS
1100:../button.c   ****         if (minutos > 9)
 6092              		.loc 1 1100 0
 6093 1d50 14301BE5 		ldr	r3, [fp, #-20]
 6094 1d54 090053E3 		cmp	r3, #9
 6095 1d58 0300009A 		bls	.L189
1101:../button.c   ****         {
1102:../button.c   ****             // Si pasa de 9 minutos, mostrar solo "09:59"
1103:../button.c   ****             minutos = 9;
 6096              		.loc 1 1103 0
 6097 1d5c 0930A0E3 		mov	r3, #9
 6098 1d60 14300BE5 		str	r3, [fp, #-20]
1104:../button.c   ****             segundos = 59;
 6099              		.loc 1 1104 0
 6100 1d64 3B30A0E3 		mov	r3, #59
 6101 1d68 18300BE5 		str	r3, [fp, #-24]
 6102              	.L189:
1105:../button.c   ****         }
1106:../button.c   **** 
1107:../button.c   ****         // CORRECCIÃ“N: Validar valores antes de formatear
1108:../button.c   ****         if (minutos <= 9 && segundos < 60 && segundos_actuales < 600) // Máximo 09:59
 6103              		.loc 1 1108 0
 6104 1d6c 14301BE5 		ldr	r3, [fp, #-20]
 6105 1d70 090053E3 		cmp	r3, #9
 6106 1d74 4800008A 		bhi	.L184
 6107              		.loc 1 1108 0 is_stmt 0 discriminator 1
 6108 1d78 18301BE5 		ldr	r3, [fp, #-24]
 6109 1d7c 3B0053E3 		cmp	r3, #59
 6110 1d80 4500008A 		bhi	.L184
 6111 1d84 20201BE5 		ldr	r2, [fp, #-32]
 6112 1d88 2C319FE5 		ldr	r3, .L192+20
 6113 1d8c 030052E1 		cmp	r2, r3
 6114 1d90 4100008A 		bhi	.L184
1109:../button.c   ****         {
1110:../button.c   ****             // Crear string manualmente (sin sprintf por compatibilidad)
1111:../button.c   ****             tiempo_str[0] = (minutos / 10) + '0';
 6115              		.loc 1 1111 0 is_stmt 1
 6116 1d94 14201BE5 		ldr	r2, [fp, #-20]
 6117 1d98 20319FE5 		ldr	r3, .L192+24
 6118 1d9c 921383E0 		umull	r1, r3, r2, r3
 6119 1da0 A331A0E1 		mov	r3, r3, lsr #3
 6120 1da4 FF3003E2 		and	r3, r3, #255
 6121 1da8 303083E2 		add	r3, r3, #48
 6122 1dac FF3003E2 		and	r3, r3, #255
 6123 1db0 28304BE5 		strb	r3, [fp, #-40]
1112:../button.c   ****             tiempo_str[1] = (minutos % 10) + '0';
 6124              		.loc 1 1112 0
 6125 1db4 14101BE5 		ldr	r1, [fp, #-20]
 6126 1db8 00319FE5 		ldr	r3, .L192+24
 6127 1dbc 912383E0 		umull	r2, r3, r1, r3
 6128 1dc0 A321A0E1 		mov	r2, r3, lsr #3
 6129 1dc4 0230A0E1 		mov	r3, r2
 6130 1dc8 0331A0E1 		mov	r3, r3, asl #2
 6131 1dcc 023083E0 		add	r3, r3, r2
 6132 1dd0 8330A0E1 		mov	r3, r3, asl #1
 6133 1dd4 012063E0 		rsb	r2, r3, r1
 6134 1dd8 FF3002E2 		and	r3, r2, #255
 6135 1ddc 303083E2 		add	r3, r3, #48
 6136 1de0 FF3003E2 		and	r3, r3, #255
 6137 1de4 27304BE5 		strb	r3, [fp, #-39]
1113:../button.c   ****             tiempo_str[2] = ':';
 6138              		.loc 1 1113 0
 6139 1de8 3A30A0E3 		mov	r3, #58
 6140 1dec 26304BE5 		strb	r3, [fp, #-38]
1114:../button.c   ****             tiempo_str[3] = (segundos / 10) + '0';
 6141              		.loc 1 1114 0
 6142 1df0 18201BE5 		ldr	r2, [fp, #-24]
 6143 1df4 C4309FE5 		ldr	r3, .L192+24
 6144 1df8 921383E0 		umull	r1, r3, r2, r3
 6145 1dfc A331A0E1 		mov	r3, r3, lsr #3
 6146 1e00 FF3003E2 		and	r3, r3, #255
 6147 1e04 303083E2 		add	r3, r3, #48
 6148 1e08 FF3003E2 		and	r3, r3, #255
 6149 1e0c 25304BE5 		strb	r3, [fp, #-37]
1115:../button.c   ****             tiempo_str[4] = (segundos % 10) + '0';
 6150              		.loc 1 1115 0
 6151 1e10 18101BE5 		ldr	r1, [fp, #-24]
 6152 1e14 A4309FE5 		ldr	r3, .L192+24
 6153 1e18 912383E0 		umull	r2, r3, r1, r3
 6154 1e1c A321A0E1 		mov	r2, r3, lsr #3
 6155 1e20 0230A0E1 		mov	r3, r2
 6156 1e24 0331A0E1 		mov	r3, r3, asl #2
 6157 1e28 023083E0 		add	r3, r3, r2
 6158 1e2c 8330A0E1 		mov	r3, r3, asl #1
 6159 1e30 012063E0 		rsb	r2, r3, r1
 6160 1e34 FF3002E2 		and	r3, r2, #255
 6161 1e38 303083E2 		add	r3, r3, #48
 6162 1e3c FF3003E2 		and	r3, r3, #255
 6163 1e40 24304BE5 		strb	r3, [fp, #-36]
1116:../button.c   ****             tiempo_str[5] = '\0';
 6164              		.loc 1 1116 0
 6165 1e44 0030A0E3 		mov	r3, #0
 6166 1e48 23304BE5 		strb	r3, [fp, #-35]
1117:../button.c   **** 
1118:../button.c   ****             // Limpiar Ã¡rea del tiempo (solo el Ã¡rea del tiempo, no la etiqueta)
1119:../button.c   ****             LcdClrRect(275, 12, 315, 20, WHITE);
 6167              		.loc 1 1119 0
 6168 1e4c 0030A0E3 		mov	r3, #0
 6169 1e50 00308DE5 		str	r3, [sp, #0]
 6170 1e54 68009FE5 		ldr	r0, .L192+28
 6171 1e58 0C10A0E3 		mov	r1, #12
 6172 1e5c 64209FE5 		ldr	r2, .L192+32
 6173 1e60 1430A0E3 		mov	r3, #20
 6174 1e64 FEFFFFEB 		bl	LcdClrRect
1120:../button.c   **** 
1121:../button.c   ****             // Mostrar el tiempo actualizado
1122:../button.c   ****             Lcd_DspAscII6x8(275, 12, BLACK, (INT8U *)tiempo_str);
 6175              		.loc 1 1122 0
 6176 1e68 28304BE2 		sub	r3, fp, #40
 6177 1e6c 50009FE5 		ldr	r0, .L192+28
 6178 1e70 0C10A0E3 		mov	r1, #12
 6179 1e74 0F20A0E3 		mov	r2, #15
 6180 1e78 FEFFFFEB 		bl	Lcd_DspAscII6x8
1123:../button.c   **** 
1124:../button.c   ****             // Transferir al LCD
1125:../button.c   ****             Lcd_Dma_Trans();
 6181              		.loc 1 1125 0
 6182 1e7c FEFFFFEB 		bl	Lcd_Dma_Trans
1126:../button.c   **** 
1127:../button.c   ****             ultimo_segundo_mostrado = segundos_actuales;
 6183              		.loc 1 1127 0
 6184 1e80 2C309FE5 		ldr	r3, .L192+12
 6185 1e84 20201BE5 		ldr	r2, [fp, #-32]
 6186 1e88 002083E5 		str	r2, [r3, #0]
 6187 1e8c 020000EA 		b	.L184
 6188              	.L190:
 6189              	.LBE9:
1075:../button.c   ****         return;
 6190              		.loc 1 1075 0
 6191 1e90 0000A0E1 		mov	r0, r0	@ nop
 6192 1e94 000000EA 		b	.L184
 6193              	.L191:
1081:../button.c   ****         return;
 6194              		.loc 1 1081 0
 6195 1e98 0000A0E1 		mov	r0, r0	@ nop
 6196              	.L184:
1128:../button.c   ****         }
1129:../button.c   ****     }
1130:../button.c   **** }
 6197              		.loc 1 1130 0
 6198 1e9c 0CD04BE2 		sub	sp, fp, #12
 6199 1ea0 00689DE8 		ldmfd	sp, {fp, sp, lr}
 6200 1ea4 1EFF2FE1 		bx	lr
 6201              	.L193:
 6202              		.align	2
 6203              	.L192:
 6204 1ea8 34000000 		.word	tiempo_inicio_partida
 6205 1eac 0046C323 		.word	600000000
 6206 1eb0 83DE1B43 		.word	1125899907
 6207 1eb4 3C000000 		.word	ultimo_segundo_mostrado.4538
 6208 1eb8 89888888 		.word	-2004318071
 6209 1ebc 57020000 		.word	599
 6210 1ec0 CDCCCCCC 		.word	-858993459
 6211 1ec4 13010000 		.word	275
 6212 1ec8 3B010000 		.word	315
 6213              		.cfi_endproc
 6214              	.LFE21:
 6216              		.align	2
 6218              	resetear_tiempo_partida:
 6219              	.LFB22:
1131:../button.c   **** 
1132:../button.c   **** /**
1133:../button.c   ****  * Resetea las variables de tiempo de partida
1134:../button.c   ****  */
1135:../button.c   **** static void resetear_tiempo_partida(void)
1136:../button.c   **** {
 6220              		.loc 1 1136 0
 6221              		.cfi_startproc
 6222              		@ Function supports interworking.
 6223              		@ args = 0, pretend = 0, frame = 0
 6224              		@ frame_needed = 1, uses_anonymous_args = 0
 6225 1ecc 0DC0A0E1 		mov	ip, sp
 6226              	.LCFI40:
 6227              		.cfi_def_cfa_register 12
 6228 1ed0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 6229 1ed4 04B04CE2 		sub	fp, ip, #4
 6230              		.cfi_offset 14, -8
 6231              		.cfi_offset 13, -12
 6232              		.cfi_offset 11, -16
 6233              	.LCFI41:
 6234              		.cfi_def_cfa 11, 4
1137:../button.c   ****     tiempo_inicio_partida = 0;
 6235              		.loc 1 1137 0
 6236 1ed8 1C309FE5 		ldr	r3, .L195
 6237 1edc 0020A0E3 		mov	r2, #0
 6238 1ee0 002083E5 		str	r2, [r3, #0]
1138:../button.c   ****     ultimo_tiempo_mostrado = 0;
 6239              		.loc 1 1138 0
 6240 1ee4 14309FE5 		ldr	r3, .L195+4
 6241 1ee8 0020A0E3 		mov	r2, #0
 6242 1eec 002083E5 		str	r2, [r3, #0]
1139:../button.c   ****     // Resetear también la variable static de mostrar_tiempo_partida
1140:../button.c   ****     // (se hace automáticamente al ser static)
1141:../button.c   **** }
 6243              		.loc 1 1141 0
 6244 1ef0 0CD04BE2 		sub	sp, fp, #12
 6245 1ef4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 6246 1ef8 1EFF2FE1 		bx	lr
 6247              	.L196:
 6248              		.align	2
 6249              	.L195:
 6250 1efc 34000000 		.word	tiempo_inicio_partida
 6251 1f00 38000000 		.word	ultimo_tiempo_mostrado
 6252              		.cfi_endproc
 6253              	.LFE22:
 6255              		.section	.rodata
 6256              		.align	2
 6257              	.LC0:
 6258 0010 46454C49 		.ascii	"FELICIDADES!\000"
 6258      43494441 
 6258      44455321 
 6258      00
 6259 001d 000000   		.align	2
 6260              	.LC1:
 6261 0020 5375646F 		.ascii	"Sudoku completado\000"
 6261      6B752063 
 6261      6F6D706C 
 6261      65746164 
 6261      6F00
 6262 0032 0000     		.align	2
 6263              	.LC2:
 6264 0034 50756C73 		.ascii	"Pulse un boton\000"
 6264      6520756E 
 6264      20626F74 
 6264      6F6E00
 6265 0043 00       		.align	2
 6266              	.LC3:
 6267 0044 70617261 		.ascii	"para jugar\000"
 6267      206A7567 
 6267      617200
 6268              		.text
 6269              		.align	2
 6271              	mostrar_victoria_con_tiempo:
 6272              	.LFB23:
1142:../button.c   **** 
1143:../button.c   **** /**
1144:../button.c   ****  * Muestra mensaje de victoria incluyendo el tiempo final
1145:../button.c   ****  */
1146:../button.c   **** static void mostrar_victoria_con_tiempo(void)
1147:../button.c   **** {
 6273              		.loc 1 1147 0
 6274              		.cfi_startproc
 6275              		@ Function supports interworking.
 6276              		@ args = 0, pretend = 0, frame = 48
 6277              		@ frame_needed = 1, uses_anonymous_args = 0
 6278 1f04 0DC0A0E1 		mov	ip, sp
 6279              	.LCFI42:
 6280              		.cfi_def_cfa_register 12
 6281 1f08 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 6282 1f0c 04B04CE2 		sub	fp, ip, #4
 6283              		.cfi_offset 14, -8
 6284              		.cfi_offset 13, -12
 6285              		.cfi_offset 11, -16
 6286              	.LCFI43:
 6287              		.cfi_def_cfa 11, 4
 6288 1f10 30D04DE2 		sub	sp, sp, #48
1148:../button.c   ****     uint32_t tiempo_actual = timer2_count();
 6289              		.loc 1 1148 0
 6290 1f14 FEFFFFEB 		bl	timer2_count
 6291 1f18 1C000BE5 		str	r0, [fp, #-28]
1149:../button.c   ****     uint32_t tiempo_transcurrido_us;
1150:../button.c   **** 
1151:../button.c   ****     // Protección contra overflow del timer
1152:../button.c   ****     if (tiempo_actual < tiempo_inicio_partida)
 6292              		.loc 1 1152 0
 6293 1f1c 28329FE5 		ldr	r3, .L202
 6294 1f20 003093E5 		ldr	r3, [r3, #0]
 6295 1f24 1C201BE5 		ldr	r2, [fp, #-28]
 6296 1f28 030052E1 		cmp	r2, r3
 6297 1f2c 0200002A 		bcs	.L198
1153:../button.c   ****     {
1154:../button.c   ****         tiempo_transcurrido_us = 0;
 6298              		.loc 1 1154 0
 6299 1f30 0030A0E3 		mov	r3, #0
 6300 1f34 10300BE5 		str	r3, [fp, #-16]
 6301 1f38 040000EA 		b	.L199
 6302              	.L198:
1155:../button.c   ****     }
1156:../button.c   ****     else
1157:../button.c   ****     {
1158:../button.c   ****         tiempo_transcurrido_us = tiempo_actual - tiempo_inicio_partida;
 6303              		.loc 1 1158 0
 6304 1f3c 08329FE5 		ldr	r3, .L202
 6305 1f40 003093E5 		ldr	r3, [r3, #0]
 6306 1f44 1C201BE5 		ldr	r2, [fp, #-28]
 6307 1f48 023063E0 		rsb	r3, r3, r2
 6308 1f4c 10300BE5 		str	r3, [fp, #-16]
 6309              	.L199:
1159:../button.c   ****     }
1160:../button.c   **** 
1161:../button.c   ****     // Limitar a 10 minutos máximo (600000000 microsegundos)
1162:../button.c   ****     if (tiempo_transcurrido_us > 600000000UL)
 6310              		.loc 1 1162 0
 6311 1f50 10201BE5 		ldr	r2, [fp, #-16]
 6312 1f54 F4319FE5 		ldr	r3, .L202+4
 6313 1f58 030052E1 		cmp	r2, r3
 6314 1f5c 0100009A 		bls	.L200
1163:../button.c   ****     {
1164:../button.c   ****         tiempo_transcurrido_us = 600000000UL;
 6315              		.loc 1 1164 0
 6316 1f60 E8319FE5 		ldr	r3, .L202+4
 6317 1f64 10300BE5 		str	r3, [fp, #-16]
 6318              	.L200:
1165:../button.c   ****     }
1166:../button.c   **** 
1167:../button.c   ****     uint32_t segundos_totales = tiempo_transcurrido_us / 1000000;
 6319              		.loc 1 1167 0
 6320 1f68 10201BE5 		ldr	r2, [fp, #-16]
 6321 1f6c E0319FE5 		ldr	r3, .L202+8
 6322 1f70 921383E0 		umull	r1, r3, r2, r3
 6323 1f74 2339A0E1 		mov	r3, r3, lsr #18
 6324 1f78 20300BE5 		str	r3, [fp, #-32]
1168:../button.c   ****     uint32_t minutos = segundos_totales / 60;
 6325              		.loc 1 1168 0
 6326 1f7c 20201BE5 		ldr	r2, [fp, #-32]
 6327 1f80 D0319FE5 		ldr	r3, .L202+12
 6328 1f84 921383E0 		umull	r1, r3, r2, r3
 6329 1f88 A332A0E1 		mov	r3, r3, lsr #5
 6330 1f8c 14300BE5 		str	r3, [fp, #-20]
1169:../button.c   ****     uint32_t segundos = segundos_totales % 60;
 6331              		.loc 1 1169 0
 6332 1f90 20201BE5 		ldr	r2, [fp, #-32]
 6333 1f94 BC319FE5 		ldr	r3, .L202+12
 6334 1f98 921383E0 		umull	r1, r3, r2, r3
 6335 1f9c A312A0E1 		mov	r1, r3, lsr #5
 6336 1fa0 0130A0E1 		mov	r3, r1
 6337 1fa4 0332A0E1 		mov	r3, r3, asl #4
 6338 1fa8 033061E0 		rsb	r3, r1, r3
 6339 1fac 0331A0E1 		mov	r3, r3, asl #2
 6340 1fb0 023063E0 		rsb	r3, r3, r2
 6341 1fb4 18300BE5 		str	r3, [fp, #-24]
1170:../button.c   **** 
1171:../button.c   ****     // Limitar la visualización a 09:59
1172:../button.c   ****     if (minutos > 9)
 6342              		.loc 1 1172 0
 6343 1fb8 14301BE5 		ldr	r3, [fp, #-20]
 6344 1fbc 090053E3 		cmp	r3, #9
 6345 1fc0 0300009A 		bls	.L201
1173:../button.c   ****     {
1174:../button.c   ****         minutos = 9;
 6346              		.loc 1 1174 0
 6347 1fc4 0930A0E3 		mov	r3, #9
 6348 1fc8 14300BE5 		str	r3, [fp, #-20]
1175:../button.c   ****         segundos = 59;
 6349              		.loc 1 1175 0
 6350 1fcc 3B30A0E3 		mov	r3, #59
 6351 1fd0 18300BE5 		str	r3, [fp, #-24]
 6352              	.L201:
1176:../button.c   ****     }
1177:../button.c   **** 
1178:../button.c   ****     char tiempo_final_str[25];
1179:../button.c   **** 
1180:../button.c   ****     // Crear mensaje de tiempo final
1181:../button.c   ****     tiempo_final_str[0] = 'T';
 6353              		.loc 1 1181 0
 6354 1fd4 5430A0E3 		mov	r3, #84
 6355 1fd8 3C304BE5 		strb	r3, [fp, #-60]
1182:../button.c   ****     tiempo_final_str[1] = 'i';
 6356              		.loc 1 1182 0
 6357 1fdc 6930A0E3 		mov	r3, #105
 6358 1fe0 3B304BE5 		strb	r3, [fp, #-59]
1183:../button.c   ****     tiempo_final_str[2] = 'e';
 6359              		.loc 1 1183 0
 6360 1fe4 6530A0E3 		mov	r3, #101
 6361 1fe8 3A304BE5 		strb	r3, [fp, #-58]
1184:../button.c   ****     tiempo_final_str[3] = 'm';
 6362              		.loc 1 1184 0
 6363 1fec 6D30A0E3 		mov	r3, #109
 6364 1ff0 39304BE5 		strb	r3, [fp, #-57]
1185:../button.c   ****     tiempo_final_str[4] = 'p';
 6365              		.loc 1 1185 0
 6366 1ff4 7030A0E3 		mov	r3, #112
 6367 1ff8 38304BE5 		strb	r3, [fp, #-56]
1186:../button.c   ****     tiempo_final_str[5] = 'o';
 6368              		.loc 1 1186 0
 6369 1ffc 6F30A0E3 		mov	r3, #111
 6370 2000 37304BE5 		strb	r3, [fp, #-55]
1187:../button.c   ****     tiempo_final_str[6] = ':';
 6371              		.loc 1 1187 0
 6372 2004 3A30A0E3 		mov	r3, #58
 6373 2008 36304BE5 		strb	r3, [fp, #-54]
1188:../button.c   ****     tiempo_final_str[7] = ' ';
 6374              		.loc 1 1188 0
 6375 200c 2030A0E3 		mov	r3, #32
 6376 2010 35304BE5 		strb	r3, [fp, #-53]
1189:../button.c   ****     tiempo_final_str[8] = (minutos / 10) + '0';
 6377              		.loc 1 1189 0
 6378 2014 14201BE5 		ldr	r2, [fp, #-20]
 6379 2018 3C319FE5 		ldr	r3, .L202+16
 6380 201c 921383E0 		umull	r1, r3, r2, r3
 6381 2020 A331A0E1 		mov	r3, r3, lsr #3
 6382 2024 FF3003E2 		and	r3, r3, #255
 6383 2028 303083E2 		add	r3, r3, #48
 6384 202c FF3003E2 		and	r3, r3, #255
 6385 2030 34304BE5 		strb	r3, [fp, #-52]
1190:../button.c   ****     tiempo_final_str[9] = (minutos % 10) + '0';
 6386              		.loc 1 1190 0
 6387 2034 14101BE5 		ldr	r1, [fp, #-20]
 6388 2038 1C319FE5 		ldr	r3, .L202+16
 6389 203c 912383E0 		umull	r2, r3, r1, r3
 6390 2040 A321A0E1 		mov	r2, r3, lsr #3
 6391 2044 0230A0E1 		mov	r3, r2
 6392 2048 0331A0E1 		mov	r3, r3, asl #2
 6393 204c 023083E0 		add	r3, r3, r2
 6394 2050 8330A0E1 		mov	r3, r3, asl #1
 6395 2054 012063E0 		rsb	r2, r3, r1
 6396 2058 FF3002E2 		and	r3, r2, #255
 6397 205c 303083E2 		add	r3, r3, #48
 6398 2060 FF3003E2 		and	r3, r3, #255
 6399 2064 33304BE5 		strb	r3, [fp, #-51]
1191:../button.c   ****     tiempo_final_str[10] = ':';
 6400              		.loc 1 1191 0
 6401 2068 3A30A0E3 		mov	r3, #58
 6402 206c 32304BE5 		strb	r3, [fp, #-50]
1192:../button.c   ****     tiempo_final_str[11] = (segundos / 10) + '0';
 6403              		.loc 1 1192 0
 6404 2070 18201BE5 		ldr	r2, [fp, #-24]
 6405 2074 E0309FE5 		ldr	r3, .L202+16
 6406 2078 921383E0 		umull	r1, r3, r2, r3
 6407 207c A331A0E1 		mov	r3, r3, lsr #3
 6408 2080 FF3003E2 		and	r3, r3, #255
 6409 2084 303083E2 		add	r3, r3, #48
 6410 2088 FF3003E2 		and	r3, r3, #255
 6411 208c 31304BE5 		strb	r3, [fp, #-49]
1193:../button.c   ****     tiempo_final_str[12] = (segundos % 10) + '0';
 6412              		.loc 1 1193 0
 6413 2090 18101BE5 		ldr	r1, [fp, #-24]
 6414 2094 C0309FE5 		ldr	r3, .L202+16
 6415 2098 912383E0 		umull	r2, r3, r1, r3
 6416 209c A321A0E1 		mov	r2, r3, lsr #3
 6417 20a0 0230A0E1 		mov	r3, r2
 6418 20a4 0331A0E1 		mov	r3, r3, asl #2
 6419 20a8 023083E0 		add	r3, r3, r2
 6420 20ac 8330A0E1 		mov	r3, r3, asl #1
 6421 20b0 012063E0 		rsb	r2, r3, r1
 6422 20b4 FF3002E2 		and	r3, r2, #255
 6423 20b8 303083E2 		add	r3, r3, #48
 6424 20bc FF3003E2 		and	r3, r3, #255
 6425 20c0 30304BE5 		strb	r3, [fp, #-48]
1194:../button.c   ****     tiempo_final_str[13] = '\0';
 6426              		.loc 1 1194 0
 6427 20c4 0030A0E3 		mov	r3, #0
 6428 20c8 2F304BE5 		strb	r3, [fp, #-47]
1195:../button.c   **** 
1196:../button.c   ****     // Limpiar pantalla
1197:../button.c   ****     Lcd_Clr();
 6429              		.loc 1 1197 0
 6430 20cc FEFFFFEB 		bl	Lcd_Clr
1198:../button.c   **** 
1199:../button.c   ****     /* Mensaje de victoria MÃ�S GRANDE */
1200:../button.c   ****     Lcd_DspAscII8x16(60, 60, BLACK, (INT8U *)"FELICIDADES!");
 6431              		.loc 1 1200 0
 6432 20d0 3C00A0E3 		mov	r0, #60
 6433 20d4 3C10A0E3 		mov	r1, #60
 6434 20d8 0F20A0E3 		mov	r2, #15
 6435 20dc 7C309FE5 		ldr	r3, .L202+20
 6436 20e0 FEFFFFEB 		bl	Lcd_DspAscII8x16
1201:../button.c   ****     Lcd_DspAscII8x16(40, 90, BLACK, (INT8U *)"Sudoku completado");
 6437              		.loc 1 1201 0
 6438 20e4 2800A0E3 		mov	r0, #40
 6439 20e8 5A10A0E3 		mov	r1, #90
 6440 20ec 0F20A0E3 		mov	r2, #15
 6441 20f0 6C309FE5 		ldr	r3, .L202+24
 6442 20f4 FEFFFFEB 		bl	Lcd_DspAscII8x16
1202:../button.c   **** 
1203:../button.c   ****     /* Mostrar tiempo final MÃ�S GRANDE */
1204:../button.c   ****     Lcd_DspAscII8x16(80, 120, BLACK, (INT8U *)tiempo_final_str);
 6443              		.loc 1 1204 0
 6444 20f8 3C304BE2 		sub	r3, fp, #60
 6445 20fc 5000A0E3 		mov	r0, #80
 6446 2100 7810A0E3 		mov	r1, #120
 6447 2104 0F20A0E3 		mov	r2, #15
 6448 2108 FEFFFFEB 		bl	Lcd_DspAscII8x16
1205:../button.c   **** 
1206:../button.c   ****     /* InstrucciÃ³n para continuar MÃ�S VISIBLE */
1207:../button.c   ****     Lcd_DspAscII8x16(50, 160, BLACK, (INT8U *)"Pulse un boton");
 6449              		.loc 1 1207 0
 6450 210c 3200A0E3 		mov	r0, #50
 6451 2110 A010A0E3 		mov	r1, #160
 6452 2114 0F20A0E3 		mov	r2, #15
 6453 2118 48309FE5 		ldr	r3, .L202+28
 6454 211c FEFFFFEB 		bl	Lcd_DspAscII8x16
1208:../button.c   ****     Lcd_DspAscII8x16(70, 180, BLACK, (INT8U *)"para jugar");
 6455              		.loc 1 1208 0
 6456 2120 4600A0E3 		mov	r0, #70
 6457 2124 B410A0E3 		mov	r1, #180
 6458 2128 0F20A0E3 		mov	r2, #15
 6459 212c 38309FE5 		ldr	r3, .L202+32
 6460 2130 FEFFFFEB 		bl	Lcd_DspAscII8x16
1209:../button.c   **** 
1210:../button.c   ****     Lcd_Dma_Trans();
 6461              		.loc 1 1210 0
 6462 2134 FEFFFFEB 		bl	Lcd_Dma_Trans
1211:../button.c   **** 
1212:../button.c   ****     // ESPERAR MÃ�S TIEMPO antes de permitir continuar
1213:../button.c   ****     Delay(50000); // Pausa para poder leer el mensaje
 6463              		.loc 1 1213 0
 6464 2138 30009FE5 		ldr	r0, .L202+36
 6465 213c FEFFFFEB 		bl	Delay
1214:../button.c   **** }
 6466              		.loc 1 1214 0
 6467 2140 0CD04BE2 		sub	sp, fp, #12
 6468 2144 00689DE8 		ldmfd	sp, {fp, sp, lr}
 6469 2148 1EFF2FE1 		bx	lr
 6470              	.L203:
 6471              		.align	2
 6472              	.L202:
 6473 214c 34000000 		.word	tiempo_inicio_partida
 6474 2150 0046C323 		.word	600000000
 6475 2154 83DE1B43 		.word	1125899907
 6476 2158 89888888 		.word	-2004318071
 6477 215c CDCCCCCC 		.word	-858993459
 6478 2160 10000000 		.word	.LC0
 6479 2164 20000000 		.word	.LC1
 6480 2168 34000000 		.word	.LC2
 6481 216c 44000000 		.word	.LC3
 6482 2170 50C30000 		.word	50000
 6483              		.cfi_endproc
 6484              	.LFE23:
 6486              		.section	.rodata
 6487 004f 00       		.align	2
 6488              	.LC4:
 6489 0050 50617274 		.ascii	"Partida terminada\000"
 6489      69646120 
 6489      7465726D 
 6489      696E6164 
 6489      6100
 6490 0062 0000     		.align	2
 6491              	.LC5:
 6492 0064 53616C69 		.ascii	"Salida por el usuario\000"
 6492      64612070 
 6492      6F722065 
 6492      6C207573 
 6492      75617269 
 6493              		.text
 6494              		.align	2
 6496              	mostrar_partida_terminada:
 6497              	.LFB24:
1215:../button.c   **** 
1216:../button.c   **** /**
1217:../button.c   ****  * Muestra mensaje cuando la partida termina prematuramente (fila 0)
1218:../button.c   ****  */
1219:../button.c   **** static void mostrar_partida_terminada(void)
1220:../button.c   **** {
 6498              		.loc 1 1220 0
 6499              		.cfi_startproc
 6500              		@ Function supports interworking.
 6501              		@ args = 0, pretend = 0, frame = 48
 6502              		@ frame_needed = 1, uses_anonymous_args = 0
 6503 2174 0DC0A0E1 		mov	ip, sp
 6504              	.LCFI44:
 6505              		.cfi_def_cfa_register 12
 6506 2178 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 6507 217c 04B04CE2 		sub	fp, ip, #4
 6508              		.cfi_offset 14, -8
 6509              		.cfi_offset 13, -12
 6510              		.cfi_offset 11, -16
 6511              	.LCFI45:
 6512              		.cfi_def_cfa 11, 4
 6513 2180 30D04DE2 		sub	sp, sp, #48
1221:../button.c   ****     uint32_t tiempo_actual = timer2_count();
 6514              		.loc 1 1221 0
 6515 2184 FEFFFFEB 		bl	timer2_count
 6516 2188 1C000BE5 		str	r0, [fp, #-28]
1222:../button.c   ****     uint32_t tiempo_transcurrido_us;
1223:../button.c   **** 
1224:../button.c   ****     // Protección contra overflow del timer
1225:../button.c   ****     if (tiempo_actual < tiempo_inicio_partida)
 6517              		.loc 1 1225 0
 6518 218c 28329FE5 		ldr	r3, .L209
 6519 2190 003093E5 		ldr	r3, [r3, #0]
 6520 2194 1C201BE5 		ldr	r2, [fp, #-28]
 6521 2198 030052E1 		cmp	r2, r3
 6522 219c 0200002A 		bcs	.L205
1226:../button.c   ****     {
1227:../button.c   ****         tiempo_transcurrido_us = 0;
 6523              		.loc 1 1227 0
 6524 21a0 0030A0E3 		mov	r3, #0
 6525 21a4 10300BE5 		str	r3, [fp, #-16]
 6526 21a8 040000EA 		b	.L206
 6527              	.L205:
1228:../button.c   ****     }
1229:../button.c   ****     else
1230:../button.c   ****     {
1231:../button.c   ****         tiempo_transcurrido_us = tiempo_actual - tiempo_inicio_partida;
 6528              		.loc 1 1231 0
 6529 21ac 08329FE5 		ldr	r3, .L209
 6530 21b0 003093E5 		ldr	r3, [r3, #0]
 6531 21b4 1C201BE5 		ldr	r2, [fp, #-28]
 6532 21b8 023063E0 		rsb	r3, r3, r2
 6533 21bc 10300BE5 		str	r3, [fp, #-16]
 6534              	.L206:
1232:../button.c   ****     }
1233:../button.c   **** 
1234:../button.c   ****     // Limitar a 10 minutos máximo (600000000 microsegundos)
1235:../button.c   ****     if (tiempo_transcurrido_us > 600000000UL)
 6535              		.loc 1 1235 0
 6536 21c0 10201BE5 		ldr	r2, [fp, #-16]
 6537 21c4 F4319FE5 		ldr	r3, .L209+4
 6538 21c8 030052E1 		cmp	r2, r3
 6539 21cc 0100009A 		bls	.L207
1236:../button.c   ****     {
1237:../button.c   ****         tiempo_transcurrido_us = 600000000UL;
 6540              		.loc 1 1237 0
 6541 21d0 E8319FE5 		ldr	r3, .L209+4
 6542 21d4 10300BE5 		str	r3, [fp, #-16]
 6543              	.L207:
1238:../button.c   ****     }
1239:../button.c   **** 
1240:../button.c   ****     uint32_t segundos_totales = tiempo_transcurrido_us / 1000000;
 6544              		.loc 1 1240 0
 6545 21d8 10201BE5 		ldr	r2, [fp, #-16]
 6546 21dc E0319FE5 		ldr	r3, .L209+8
 6547 21e0 921383E0 		umull	r1, r3, r2, r3
 6548 21e4 2339A0E1 		mov	r3, r3, lsr #18
 6549 21e8 20300BE5 		str	r3, [fp, #-32]
1241:../button.c   ****     uint32_t minutos = segundos_totales / 60;
 6550              		.loc 1 1241 0
 6551 21ec 20201BE5 		ldr	r2, [fp, #-32]
 6552 21f0 D0319FE5 		ldr	r3, .L209+12
 6553 21f4 921383E0 		umull	r1, r3, r2, r3
 6554 21f8 A332A0E1 		mov	r3, r3, lsr #5
 6555 21fc 14300BE5 		str	r3, [fp, #-20]
1242:../button.c   ****     uint32_t segundos = segundos_totales % 60;
 6556              		.loc 1 1242 0
 6557 2200 20201BE5 		ldr	r2, [fp, #-32]
 6558 2204 BC319FE5 		ldr	r3, .L209+12
 6559 2208 921383E0 		umull	r1, r3, r2, r3
 6560 220c A312A0E1 		mov	r1, r3, lsr #5
 6561 2210 0130A0E1 		mov	r3, r1
 6562 2214 0332A0E1 		mov	r3, r3, asl #4
 6563 2218 033061E0 		rsb	r3, r1, r3
 6564 221c 0331A0E1 		mov	r3, r3, asl #2
 6565 2220 023063E0 		rsb	r3, r3, r2
 6566 2224 18300BE5 		str	r3, [fp, #-24]
1243:../button.c   **** 
1244:../button.c   ****     // Limitar la visualización a 09:59
1245:../button.c   ****     if (minutos > 9)
 6567              		.loc 1 1245 0
 6568 2228 14301BE5 		ldr	r3, [fp, #-20]
 6569 222c 090053E3 		cmp	r3, #9
 6570 2230 0300009A 		bls	.L208
1246:../button.c   ****     {
1247:../button.c   ****         minutos = 9;
 6571              		.loc 1 1247 0
 6572 2234 0930A0E3 		mov	r3, #9
 6573 2238 14300BE5 		str	r3, [fp, #-20]
1248:../button.c   ****         segundos = 59;
 6574              		.loc 1 1248 0
 6575 223c 3B30A0E3 		mov	r3, #59
 6576 2240 18300BE5 		str	r3, [fp, #-24]
 6577              	.L208:
1249:../button.c   ****     }
1250:../button.c   **** 
1251:../button.c   ****     char tiempo_final_str[25];
1252:../button.c   **** 
1253:../button.c   ****     // Crear mensaje de tiempo final
1254:../button.c   ****     tiempo_final_str[0] = 'T';
 6578              		.loc 1 1254 0
 6579 2244 5430A0E3 		mov	r3, #84
 6580 2248 3C304BE5 		strb	r3, [fp, #-60]
1255:../button.c   ****     tiempo_final_str[1] = 'i';
 6581              		.loc 1 1255 0
 6582 224c 6930A0E3 		mov	r3, #105
 6583 2250 3B304BE5 		strb	r3, [fp, #-59]
1256:../button.c   ****     tiempo_final_str[2] = 'e';
 6584              		.loc 1 1256 0
 6585 2254 6530A0E3 		mov	r3, #101
 6586 2258 3A304BE5 		strb	r3, [fp, #-58]
1257:../button.c   ****     tiempo_final_str[3] = 'm';
 6587              		.loc 1 1257 0
 6588 225c 6D30A0E3 		mov	r3, #109
 6589 2260 39304BE5 		strb	r3, [fp, #-57]
1258:../button.c   ****     tiempo_final_str[4] = 'p';
 6590              		.loc 1 1258 0
 6591 2264 7030A0E3 		mov	r3, #112
 6592 2268 38304BE5 		strb	r3, [fp, #-56]
1259:../button.c   ****     tiempo_final_str[5] = 'o';
 6593              		.loc 1 1259 0
 6594 226c 6F30A0E3 		mov	r3, #111
 6595 2270 37304BE5 		strb	r3, [fp, #-55]
1260:../button.c   ****     tiempo_final_str[6] = ':';
 6596              		.loc 1 1260 0
 6597 2274 3A30A0E3 		mov	r3, #58
 6598 2278 36304BE5 		strb	r3, [fp, #-54]
1261:../button.c   ****     tiempo_final_str[7] = ' ';
 6599              		.loc 1 1261 0
 6600 227c 2030A0E3 		mov	r3, #32
 6601 2280 35304BE5 		strb	r3, [fp, #-53]
1262:../button.c   ****     tiempo_final_str[8] = (minutos / 10) + '0';
 6602              		.loc 1 1262 0
 6603 2284 14201BE5 		ldr	r2, [fp, #-20]
 6604 2288 3C319FE5 		ldr	r3, .L209+16
 6605 228c 921383E0 		umull	r1, r3, r2, r3
 6606 2290 A331A0E1 		mov	r3, r3, lsr #3
 6607 2294 FF3003E2 		and	r3, r3, #255
 6608 2298 303083E2 		add	r3, r3, #48
 6609 229c FF3003E2 		and	r3, r3, #255
 6610 22a0 34304BE5 		strb	r3, [fp, #-52]
1263:../button.c   ****     tiempo_final_str[9] = (minutos % 10) + '0';
 6611              		.loc 1 1263 0
 6612 22a4 14101BE5 		ldr	r1, [fp, #-20]
 6613 22a8 1C319FE5 		ldr	r3, .L209+16
 6614 22ac 912383E0 		umull	r2, r3, r1, r3
 6615 22b0 A321A0E1 		mov	r2, r3, lsr #3
 6616 22b4 0230A0E1 		mov	r3, r2
 6617 22b8 0331A0E1 		mov	r3, r3, asl #2
 6618 22bc 023083E0 		add	r3, r3, r2
 6619 22c0 8330A0E1 		mov	r3, r3, asl #1
 6620 22c4 012063E0 		rsb	r2, r3, r1
 6621 22c8 FF3002E2 		and	r3, r2, #255
 6622 22cc 303083E2 		add	r3, r3, #48
 6623 22d0 FF3003E2 		and	r3, r3, #255
 6624 22d4 33304BE5 		strb	r3, [fp, #-51]
1264:../button.c   ****     tiempo_final_str[10] = ':';
 6625              		.loc 1 1264 0
 6626 22d8 3A30A0E3 		mov	r3, #58
 6627 22dc 32304BE5 		strb	r3, [fp, #-50]
1265:../button.c   ****     tiempo_final_str[11] = (segundos / 10) + '0';
 6628              		.loc 1 1265 0
 6629 22e0 18201BE5 		ldr	r2, [fp, #-24]
 6630 22e4 E0309FE5 		ldr	r3, .L209+16
 6631 22e8 921383E0 		umull	r1, r3, r2, r3
 6632 22ec A331A0E1 		mov	r3, r3, lsr #3
 6633 22f0 FF3003E2 		and	r3, r3, #255
 6634 22f4 303083E2 		add	r3, r3, #48
 6635 22f8 FF3003E2 		and	r3, r3, #255
 6636 22fc 31304BE5 		strb	r3, [fp, #-49]
1266:../button.c   ****     tiempo_final_str[12] = (segundos % 10) + '0';
 6637              		.loc 1 1266 0
 6638 2300 18101BE5 		ldr	r1, [fp, #-24]
 6639 2304 C0309FE5 		ldr	r3, .L209+16
 6640 2308 912383E0 		umull	r2, r3, r1, r3
 6641 230c A321A0E1 		mov	r2, r3, lsr #3
 6642 2310 0230A0E1 		mov	r3, r2
 6643 2314 0331A0E1 		mov	r3, r3, asl #2
 6644 2318 023083E0 		add	r3, r3, r2
 6645 231c 8330A0E1 		mov	r3, r3, asl #1
 6646 2320 012063E0 		rsb	r2, r3, r1
 6647 2324 FF3002E2 		and	r3, r2, #255
 6648 2328 303083E2 		add	r3, r3, #48
 6649 232c FF3003E2 		and	r3, r3, #255
 6650 2330 30304BE5 		strb	r3, [fp, #-48]
1267:../button.c   ****     tiempo_final_str[13] = '\0';
 6651              		.loc 1 1267 0
 6652 2334 0030A0E3 		mov	r3, #0
 6653 2338 2F304BE5 		strb	r3, [fp, #-47]
1268:../button.c   **** 
1269:../button.c   ****     // Limpiar pantalla
1270:../button.c   ****     Lcd_Clr();
 6654              		.loc 1 1270 0
 6655 233c FEFFFFEB 		bl	Lcd_Clr
1271:../button.c   **** 
1272:../button.c   ****     /* Mensaje de partida terminada */
1273:../button.c   ****     Lcd_DspAscII8x16(40, 60, BLACK, (INT8U *)"Partida terminada");
 6656              		.loc 1 1273 0
 6657 2340 2800A0E3 		mov	r0, #40
 6658 2344 3C10A0E3 		mov	r1, #60
 6659 2348 0F20A0E3 		mov	r2, #15
 6660 234c 7C309FE5 		ldr	r3, .L209+20
 6661 2350 FEFFFFEB 		bl	Lcd_DspAscII8x16
1274:../button.c   ****     Lcd_DspAscII6x8(60, 90, BLACK, (INT8U *)"Salida por el usuario");
 6662              		.loc 1 1274 0
 6663 2354 3C00A0E3 		mov	r0, #60
 6664 2358 5A10A0E3 		mov	r1, #90
 6665 235c 0F20A0E3 		mov	r2, #15
 6666 2360 6C309FE5 		ldr	r3, .L209+24
 6667 2364 FEFFFFEB 		bl	Lcd_DspAscII6x8
1275:../button.c   **** 
1276:../button.c   ****     /* Mostrar tiempo transcurrido MÃ�S GRANDE */
1277:../button.c   ****     Lcd_DspAscII8x16(80, 120, BLACK, (INT8U *)tiempo_final_str);
 6668              		.loc 1 1277 0
 6669 2368 3C304BE2 		sub	r3, fp, #60
 6670 236c 5000A0E3 		mov	r0, #80
 6671 2370 7810A0E3 		mov	r1, #120
 6672 2374 0F20A0E3 		mov	r2, #15
 6673 2378 FEFFFFEB 		bl	Lcd_DspAscII8x16
1278:../button.c   **** 
1279:../button.c   ****     /* InstrucciÃ³n para continuar */
1280:../button.c   ****     Lcd_DspAscII8x16(50, 160, BLACK, (INT8U *)"Pulse un boton");
 6674              		.loc 1 1280 0
 6675 237c 3200A0E3 		mov	r0, #50
 6676 2380 A010A0E3 		mov	r1, #160
 6677 2384 0F20A0E3 		mov	r2, #15
 6678 2388 48309FE5 		ldr	r3, .L209+28
 6679 238c FEFFFFEB 		bl	Lcd_DspAscII8x16
1281:../button.c   ****     Lcd_DspAscII8x16(70, 180, BLACK, (INT8U *)"para jugar");
 6680              		.loc 1 1281 0
 6681 2390 4600A0E3 		mov	r0, #70
 6682 2394 B410A0E3 		mov	r1, #180
 6683 2398 0F20A0E3 		mov	r2, #15
 6684 239c 38309FE5 		ldr	r3, .L209+32
 6685 23a0 FEFFFFEB 		bl	Lcd_DspAscII8x16
1282:../button.c   **** 
1283:../button.c   ****     Lcd_Dma_Trans();
 6686              		.loc 1 1283 0
 6687 23a4 FEFFFFEB 		bl	Lcd_Dma_Trans
1284:../button.c   **** 
1285:../button.c   ****     // ESPERAR MÃ�S TIEMPO antes de permitir continuar
1286:../button.c   ****     Delay(50000); // Pausa para poder leer el mensaje
 6688              		.loc 1 1286 0
 6689 23a8 30009FE5 		ldr	r0, .L209+36
 6690 23ac FEFFFFEB 		bl	Delay
1287:../button.c   **** }
 6691              		.loc 1 1287 0
 6692 23b0 0CD04BE2 		sub	sp, fp, #12
 6693 23b4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 6694 23b8 1EFF2FE1 		bx	lr
 6695              	.L210:
 6696              		.align	2
 6697              	.L209:
 6698 23bc 34000000 		.word	tiempo_inicio_partida
 6699 23c0 0046C323 		.word	600000000
 6700 23c4 83DE1B43 		.word	1125899907
 6701 23c8 89888888 		.word	-2004318071
 6702 23cc CDCCCCCC 		.word	-858993459
 6703 23d0 50000000 		.word	.LC4
 6704 23d4 64000000 		.word	.LC5
 6705 23d8 34000000 		.word	.LC2
 6706 23dc 44000000 		.word	.LC3
 6707 23e0 50C30000 		.word	50000
 6708              		.cfi_endproc
 6709              	.LFE24:
 6711              		.align	2
 6713              	detectar_y_marcar_errores:
 6714              	.LFB25:
1288:../button.c   **** 
1289:../button.c   **** /**
1290:../button.c   ****  * Detectar y marcar errores en el tablero
1291:../button.c   ****  * Recorre el tablero y marca las celdas con errores evidentes
1292:../button.c   ****  * (por ejemplo, celdas con valores fuera de rango o duplicados en fila/columna)
1293:../button.c   ****  */
1294:../button.c   **** static void detectar_y_marcar_errores(void)
1295:../button.c   **** {
 6715              		.loc 1 1295 0
 6716              		.cfi_startproc
 6717              		@ Function supports interworking.
 6718              		@ args = 0, pretend = 0, frame = 56
 6719              		@ frame_needed = 1, uses_anonymous_args = 0
 6720 23e4 0DC0A0E1 		mov	ip, sp
 6721              	.LCFI46:
 6722              		.cfi_def_cfa_register 12
 6723 23e8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 6724 23ec 04B04CE2 		sub	fp, ip, #4
 6725              		.cfi_offset 14, -8
 6726              		.cfi_offset 13, -12
 6727              		.cfi_offset 11, -16
 6728              	.LCFI47:
 6729              		.cfi_def_cfa 11, 4
 6730 23f0 38D04DE2 		sub	sp, sp, #56
1296:../button.c   ****     uint8_t i, j, k, l;
1297:../button.c   ****     uint8_t fila[9], columna[9];
1298:../button.c   ****     uint16_t bloque[3][3];
1299:../button.c   **** 
1300:../button.c   ****     // Limpiar marcas de error anteriores
1301:../button.c   ****     limpiar_marcas_error();
 6731              		.loc 1 1301 0
 6732 23f4 740100EB 		bl	limpiar_marcas_error
1302:../button.c   **** 
1303:../button.c   ****     // Recorre todas las celdas
1304:../button.c   ****     for (i = 0; i < 9; i++)
 6733              		.loc 1 1304 0
 6734 23f8 0030A0E3 		mov	r3, #0
 6735 23fc 0D304BE5 		strb	r3, [fp, #-13]
 6736 2400 690100EA 		b	.L212
 6737              	.L231:
1305:../button.c   ****     {
1306:../button.c   ****         for (j = 0; j < 9; j++)
 6738              		.loc 1 1306 0
 6739 2404 0030A0E3 		mov	r3, #0
 6740 2408 0E304BE5 		strb	r3, [fp, #-14]
 6741 240c 600100EA 		b	.L213
 6742              	.L230:
 6743              	.LBB10:
1307:../button.c   ****         {
1308:../button.c   ****             // Leer valor y verificar si es pista (bit 4 = 1)
1309:../button.c   ****             uint8_t valor = celda_leer_valor(cuadricula_C_C[i][j]);
 6744              		.loc 1 1309 0
 6745 2410 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 6746 2414 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 6747 2418 A4259FE5 		ldr	r2, .L233
 6748 241c 0112A0E1 		mov	r1, r1, asl #4
 6749 2420 033081E0 		add	r3, r1, r3
 6750 2424 8330A0E1 		mov	r3, r3, asl #1
 6751 2428 033082E0 		add	r3, r2, r3
 6752 242c B030D3E1 		ldrh	r3, [r3, #0]
 6753 2430 0300A0E1 		mov	r0, r3
 6754 2434 FEFFFFEB 		bl	celda_leer_valor
 6755 2438 0030A0E1 		mov	r3, r0
 6756 243c 11304BE5 		strb	r3, [fp, #-17]
1310:../button.c   ****             uint8_t es_pista = (cuadricula_C_C[i][j] & (1 << 4)) ? 1 : 0;
 6757              		.loc 1 1310 0
 6758 2440 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 6759 2444 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 6760 2448 74259FE5 		ldr	r2, .L233
 6761 244c 0112A0E1 		mov	r1, r1, asl #4
 6762 2450 033081E0 		add	r3, r1, r3
 6763 2454 8330A0E1 		mov	r3, r3, asl #1
 6764 2458 033082E0 		add	r3, r2, r3
 6765 245c B030D3E1 		ldrh	r3, [r3, #0]
 6766 2460 103003E2 		and	r3, r3, #16
 6767 2464 000053E3 		cmp	r3, #0
 6768 2468 0030A003 		moveq	r3, #0
 6769 246c 0130A013 		movne	r3, #1
 6770 2470 12304BE5 		strb	r3, [fp, #-18]
1311:../button.c   **** 
1312:../button.c   ****             // Si la celda es una pista, continuar (no marcar error)
1313:../button.c   ****             if (es_pista)
 6771              		.loc 1 1313 0
 6772 2474 12305BE5 		ldrb	r3, [fp, #-18]	@ zero_extendqisi2
 6773 2478 000053E3 		cmp	r3, #0
 6774 247c 4001001A 		bne	.L232
 6775              	.L214:
1314:../button.c   ****                 continue;
1315:../button.c   **** 
1316:../button.c   ****             // Reiniciar datos de fila, columna y bloque
1317:../button.c   ****             for (k = 0; k < 9; k++)
 6776              		.loc 1 1317 0
 6777 2480 0030A0E3 		mov	r3, #0
 6778 2484 0F304BE5 		strb	r3, [fp, #-15]
 6779 2488 100000EA 		b	.L216
 6780              	.L217:
1318:../button.c   ****             {
1319:../button.c   ****                 fila[k] = 0;
 6781              		.loc 1 1319 0 discriminator 2
 6782 248c 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 6783 2490 1330E0E3 		mvn	r3, #19
 6784 2494 0C004BE2 		sub	r0, fp, #12
 6785 2498 022080E0 		add	r2, r0, r2
 6786 249c 033082E0 		add	r3, r2, r3
 6787 24a0 0020A0E3 		mov	r2, #0
 6788 24a4 0020C3E5 		strb	r2, [r3, #0]
1320:../button.c   ****                 columna[k] = 0;
 6789              		.loc 1 1320 0 discriminator 2
 6790 24a8 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 6791 24ac 1F30E0E3 		mvn	r3, #31
 6792 24b0 0C104BE2 		sub	r1, fp, #12
 6793 24b4 022081E0 		add	r2, r1, r2
 6794 24b8 033082E0 		add	r3, r2, r3
 6795 24bc 0020A0E3 		mov	r2, #0
 6796 24c0 0020C3E5 		strb	r2, [r3, #0]
1317:../button.c   ****             for (k = 0; k < 9; k++)
 6797              		.loc 1 1317 0 discriminator 2
 6798 24c4 0F305BE5 		ldrb	r3, [fp, #-15]
 6799 24c8 013083E2 		add	r3, r3, #1
 6800 24cc 0F304BE5 		strb	r3, [fp, #-15]
 6801              	.L216:
1317:../button.c   ****             for (k = 0; k < 9; k++)
 6802              		.loc 1 1317 0 is_stmt 0 discriminator 1
 6803 24d0 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 6804 24d4 080053E3 		cmp	r3, #8
 6805 24d8 EBFFFF9A 		bls	.L217
1321:../button.c   ****             }
1322:../button.c   ****             for (k = 0; k < 3; k++)
 6806              		.loc 1 1322 0 is_stmt 1
 6807 24dc 0030A0E3 		mov	r3, #0
 6808 24e0 0F304BE5 		strb	r3, [fp, #-15]
 6809 24e4 180000EA 		b	.L218
 6810              	.L221:
1323:../button.c   ****                 for (l = 0; l < 3; l++)
 6811              		.loc 1 1323 0
 6812 24e8 0030A0E3 		mov	r3, #0
 6813 24ec 10304BE5 		strb	r3, [fp, #-16]
 6814 24f0 0F0000EA 		b	.L219
 6815              	.L220:
1324:../button.c   ****                     bloque[k][l] = 0;
 6816              		.loc 1 1324 0 discriminator 2
 6817 24f4 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 6818 24f8 10105BE5 		ldrb	r1, [fp, #-16]	@ zero_extendqisi2
 6819 24fc 0230A0E1 		mov	r3, r2
 6820 2500 8330A0E1 		mov	r3, r3, asl #1
 6821 2504 023083E0 		add	r3, r3, r2
 6822 2508 012083E0 		add	r2, r3, r1
 6823 250c 3330E0E3 		mvn	r3, #51
 6824 2510 8220A0E1 		mov	r2, r2, asl #1
 6825 2514 0C004BE2 		sub	r0, fp, #12
 6826 2518 022080E0 		add	r2, r0, r2
 6827 251c 033082E0 		add	r3, r2, r3
 6828 2520 0020A0E3 		mov	r2, #0
 6829 2524 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1323:../button.c   ****                 for (l = 0; l < 3; l++)
 6830              		.loc 1 1323 0 discriminator 2
 6831 2528 10305BE5 		ldrb	r3, [fp, #-16]
 6832 252c 013083E2 		add	r3, r3, #1
 6833 2530 10304BE5 		strb	r3, [fp, #-16]
 6834              	.L219:
1323:../button.c   ****                 for (l = 0; l < 3; l++)
 6835              		.loc 1 1323 0 is_stmt 0 discriminator 1
 6836 2534 10305BE5 		ldrb	r3, [fp, #-16]	@ zero_extendqisi2
 6837 2538 020053E3 		cmp	r3, #2
 6838 253c ECFFFF9A 		bls	.L220
1322:../button.c   ****             for (k = 0; k < 3; k++)
 6839              		.loc 1 1322 0 is_stmt 1
 6840 2540 0F305BE5 		ldrb	r3, [fp, #-15]
 6841 2544 013083E2 		add	r3, r3, #1
 6842 2548 0F304BE5 		strb	r3, [fp, #-15]
 6843              	.L218:
1322:../button.c   ****             for (k = 0; k < 3; k++)
 6844              		.loc 1 1322 0 is_stmt 0 discriminator 1
 6845 254c 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 6846 2550 020053E3 		cmp	r3, #2
 6847 2554 E3FFFF9A 		bls	.L221
1325:../button.c   **** 
1326:../button.c   ****             // Volver a recorrer para detectar errores
1327:../button.c   ****             for (k = 0; k < 9; k++)
 6848              		.loc 1 1327 0 is_stmt 1
 6849 2558 0030A0E3 		mov	r3, #0
 6850 255c 0F304BE5 		strb	r3, [fp, #-15]
 6851 2560 030100EA 		b	.L222
 6852              	.L229:
 6853              	.LBB11:
1328:../button.c   ****             {
1329:../button.c   ****                 // Verificar fila
1330:../button.c   ****                 uint8_t valor_fila = celda_leer_valor(cuadricula_C_C[i][k]);
 6854              		.loc 1 1330 0
 6855 2564 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 6856 2568 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 6857 256c 50249FE5 		ldr	r2, .L233
 6858 2570 0112A0E1 		mov	r1, r1, asl #4
 6859 2574 033081E0 		add	r3, r1, r3
 6860 2578 8330A0E1 		mov	r3, r3, asl #1
 6861 257c 033082E0 		add	r3, r2, r3
 6862 2580 B030D3E1 		ldrh	r3, [r3, #0]
 6863 2584 0300A0E1 		mov	r0, r3
 6864 2588 FEFFFFEB 		bl	celda_leer_valor
 6865 258c 0030A0E1 		mov	r3, r0
 6866 2590 13304BE5 		strb	r3, [fp, #-19]
1331:../button.c   ****                 if (valor_fila > 0 && valor_fila < 10)
 6867              		.loc 1 1331 0
 6868 2594 13305BE5 		ldrb	r3, [fp, #-19]	@ zero_extendqisi2
 6869 2598 000053E3 		cmp	r3, #0
 6870 259c 2D00000A 		beq	.L223
 6871              		.loc 1 1331 0 is_stmt 0 discriminator 1
 6872 25a0 13305BE5 		ldrb	r3, [fp, #-19]	@ zero_extendqisi2
 6873 25a4 090053E3 		cmp	r3, #9
 6874 25a8 2A00008A 		bhi	.L223
1332:../button.c   ****                 {
1333:../button.c   ****                     if (fila[valor_fila - 1] == 0)
 6875              		.loc 1 1333 0 is_stmt 1
 6876 25ac 13305BE5 		ldrb	r3, [fp, #-19]	@ zero_extendqisi2
 6877 25b0 012043E2 		sub	r2, r3, #1
 6878 25b4 1330E0E3 		mvn	r3, #19
 6879 25b8 0C104BE2 		sub	r1, fp, #12
 6880 25bc 022081E0 		add	r2, r1, r2
 6881 25c0 033082E0 		add	r3, r2, r3
 6882 25c4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 6883 25c8 000053E3 		cmp	r3, #0
 6884 25cc 0800001A 		bne	.L224
1334:../button.c   ****                         fila[valor_fila - 1] = 1;
 6885              		.loc 1 1334 0
 6886 25d0 13305BE5 		ldrb	r3, [fp, #-19]	@ zero_extendqisi2
 6887 25d4 012043E2 		sub	r2, r3, #1
 6888 25d8 1330E0E3 		mvn	r3, #19
 6889 25dc 0C004BE2 		sub	r0, fp, #12
 6890 25e0 022080E0 		add	r2, r0, r2
 6891 25e4 033082E0 		add	r3, r2, r3
 6892 25e8 0120A0E3 		mov	r2, #1
 6893 25ec 0020C3E5 		strb	r2, [r3, #0]
 6894 25f0 180000EA 		b	.L223
 6895              	.L224:
1335:../button.c   ****                     else
1336:../button.c   ****                     {
1337:../button.c   ****                         cuadricula_C_C[i][k] |= 0x0020;
 6896              		.loc 1 1337 0
 6897 25f4 0D005BE5 		ldrb	r0, [fp, #-13]	@ zero_extendqisi2
 6898 25f8 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 6899 25fc 0DC05BE5 		ldrb	ip, [fp, #-13]	@ zero_extendqisi2
 6900 2600 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 6901 2604 B8139FE5 		ldr	r1, .L233
 6902 2608 0CC2A0E1 		mov	ip, ip, asl #4
 6903 260c 02208CE0 		add	r2, ip, r2
 6904 2610 8220A0E1 		mov	r2, r2, asl #1
 6905 2614 022081E0 		add	r2, r1, r2
 6906 2618 B020D2E1 		ldrh	r2, [r2, #0]
 6907 261c 202082E3 		orr	r2, r2, #32
 6908 2620 0228A0E1 		mov	r2, r2, asl #16
 6909 2624 2228A0E1 		mov	r2, r2, lsr #16
 6910 2628 94139FE5 		ldr	r1, .L233
 6911 262c 0002A0E1 		mov	r0, r0, asl #4
 6912 2630 033080E0 		add	r3, r0, r3
 6913 2634 8330A0E1 		mov	r3, r3, asl #1
 6914 2638 033081E0 		add	r3, r1, r3
 6915 263c B020C3E1 		strh	r2, [r3, #0]	@ movhi
1338:../button.c   ****                         sudoku_actualizar_celda(cuadricula_C_C, i, k);
 6916              		.loc 1 1338 0
 6917 2640 0D205BE5 		ldrb	r2, [fp, #-13]	@ zero_extendqisi2
 6918 2644 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 6919 2648 74039FE5 		ldr	r0, .L233
 6920 264c 0210A0E1 		mov	r1, r2
 6921 2650 0320A0E1 		mov	r2, r3
 6922 2654 FEFFFFEB 		bl	sudoku_actualizar_celda
 6923              	.L223:
1339:../button.c   ****                     }
1340:../button.c   ****                 }
1341:../button.c   **** 
1342:../button.c   ****                 // Verificar columna
1343:../button.c   ****                 uint8_t valor_columna = celda_leer_valor(cuadricula_C_C[k][j]);
 6924              		.loc 1 1343 0
 6925 2658 0F105BE5 		ldrb	r1, [fp, #-15]	@ zero_extendqisi2
 6926 265c 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 6927 2660 5C239FE5 		ldr	r2, .L233
 6928 2664 0112A0E1 		mov	r1, r1, asl #4
 6929 2668 033081E0 		add	r3, r1, r3
 6930 266c 8330A0E1 		mov	r3, r3, asl #1
 6931 2670 033082E0 		add	r3, r2, r3
 6932 2674 B030D3E1 		ldrh	r3, [r3, #0]
 6933 2678 0300A0E1 		mov	r0, r3
 6934 267c FEFFFFEB 		bl	celda_leer_valor
 6935 2680 0030A0E1 		mov	r3, r0
 6936 2684 14304BE5 		strb	r3, [fp, #-20]
1344:../button.c   ****                 if (valor_columna > 0 && valor_columna < 10)
 6937              		.loc 1 1344 0
 6938 2688 14305BE5 		ldrb	r3, [fp, #-20]	@ zero_extendqisi2
 6939 268c 000053E3 		cmp	r3, #0
 6940 2690 2D00000A 		beq	.L225
 6941              		.loc 1 1344 0 is_stmt 0 discriminator 1
 6942 2694 14305BE5 		ldrb	r3, [fp, #-20]	@ zero_extendqisi2
 6943 2698 090053E3 		cmp	r3, #9
 6944 269c 2A00008A 		bhi	.L225
1345:../button.c   ****                 {
1346:../button.c   ****                     if (columna[valor_columna - 1] == 0)
 6945              		.loc 1 1346 0 is_stmt 1
 6946 26a0 14305BE5 		ldrb	r3, [fp, #-20]	@ zero_extendqisi2
 6947 26a4 012043E2 		sub	r2, r3, #1
 6948 26a8 1F30E0E3 		mvn	r3, #31
 6949 26ac 0C104BE2 		sub	r1, fp, #12
 6950 26b0 022081E0 		add	r2, r1, r2
 6951 26b4 033082E0 		add	r3, r2, r3
 6952 26b8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 6953 26bc 000053E3 		cmp	r3, #0
 6954 26c0 0800001A 		bne	.L226
1347:../button.c   ****                         columna[valor_columna - 1] = 1;
 6955              		.loc 1 1347 0
 6956 26c4 14305BE5 		ldrb	r3, [fp, #-20]	@ zero_extendqisi2
 6957 26c8 012043E2 		sub	r2, r3, #1
 6958 26cc 1F30E0E3 		mvn	r3, #31
 6959 26d0 0C004BE2 		sub	r0, fp, #12
 6960 26d4 022080E0 		add	r2, r0, r2
 6961 26d8 033082E0 		add	r3, r2, r3
 6962 26dc 0120A0E3 		mov	r2, #1
 6963 26e0 0020C3E5 		strb	r2, [r3, #0]
 6964 26e4 180000EA 		b	.L225
 6965              	.L226:
1348:../button.c   ****                     else
1349:../button.c   ****                     {
1350:../button.c   ****                         cuadricula_C_C[k][j] |= 0x0020;
 6966              		.loc 1 1350 0
 6967 26e8 0F005BE5 		ldrb	r0, [fp, #-15]	@ zero_extendqisi2
 6968 26ec 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 6969 26f0 0FC05BE5 		ldrb	ip, [fp, #-15]	@ zero_extendqisi2
 6970 26f4 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 6971 26f8 C4129FE5 		ldr	r1, .L233
 6972 26fc 0CC2A0E1 		mov	ip, ip, asl #4
 6973 2700 02208CE0 		add	r2, ip, r2
 6974 2704 8220A0E1 		mov	r2, r2, asl #1
 6975 2708 022081E0 		add	r2, r1, r2
 6976 270c B020D2E1 		ldrh	r2, [r2, #0]
 6977 2710 202082E3 		orr	r2, r2, #32
 6978 2714 0228A0E1 		mov	r2, r2, asl #16
 6979 2718 2228A0E1 		mov	r2, r2, lsr #16
 6980 271c A0129FE5 		ldr	r1, .L233
 6981 2720 0002A0E1 		mov	r0, r0, asl #4
 6982 2724 033080E0 		add	r3, r0, r3
 6983 2728 8330A0E1 		mov	r3, r3, asl #1
 6984 272c 033081E0 		add	r3, r1, r3
 6985 2730 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1351:../button.c   ****                         sudoku_actualizar_celda(cuadricula_C_C, k, j);
 6986              		.loc 1 1351 0
 6987 2734 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 6988 2738 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 6989 273c 80029FE5 		ldr	r0, .L233
 6990 2740 0210A0E1 		mov	r1, r2
 6991 2744 0320A0E1 		mov	r2, r3
 6992 2748 FEFFFFEB 		bl	sudoku_actualizar_celda
 6993              	.L225:
1352:../button.c   ****                     }
1353:../button.c   ****                 }
1354:../button.c   **** 
1355:../button.c   ****                 // Verificar bloque 3x3
1356:../button.c   ****                 uint8_t fila_bloque = i / 3 * 3 + k / 3;
 6994              		.loc 1 1356 0
 6995 274c 0D205BE5 		ldrb	r2, [fp, #-13]	@ zero_extendqisi2
 6996 2750 70329FE5 		ldr	r3, .L233+4
 6997 2754 921383E0 		umull	r1, r3, r2, r3
 6998 2758 A330A0E1 		mov	r3, r3, lsr #1
 6999 275c FF3003E2 		and	r3, r3, #255
 7000 2760 0320A0E1 		mov	r2, r3
 7001 2764 8220A0E1 		mov	r2, r2, asl #1
 7002 2768 033082E0 		add	r3, r2, r3
 7003 276c FF2003E2 		and	r2, r3, #255
 7004 2770 0F105BE5 		ldrb	r1, [fp, #-15]	@ zero_extendqisi2
 7005 2774 4C329FE5 		ldr	r3, .L233+4
 7006 2778 910383E0 		umull	r0, r3, r1, r3
 7007 277c A330A0E1 		mov	r3, r3, lsr #1
 7008 2780 FF3003E2 		and	r3, r3, #255
 7009 2784 033082E0 		add	r3, r2, r3
 7010 2788 15304BE5 		strb	r3, [fp, #-21]
1357:../button.c   ****                 uint8_t columna_bloque = j / 3 * 3 + k % 3;
 7011              		.loc 1 1357 0
 7012 278c 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 7013 2790 30329FE5 		ldr	r3, .L233+4
 7014 2794 921383E0 		umull	r1, r3, r2, r3
 7015 2798 A330A0E1 		mov	r3, r3, lsr #1
 7016 279c FF3003E2 		and	r3, r3, #255
 7017 27a0 0320A0E1 		mov	r2, r3
 7018 27a4 8220A0E1 		mov	r2, r2, asl #1
 7019 27a8 033082E0 		add	r3, r2, r3
 7020 27ac FF0003E2 		and	r0, r3, #255
 7021 27b0 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 7022 27b4 0C329FE5 		ldr	r3, .L233+4
 7023 27b8 921383E0 		umull	r1, r3, r2, r3
 7024 27bc A310A0E1 		mov	r1, r3, lsr #1
 7025 27c0 0130A0E1 		mov	r3, r1
 7026 27c4 8330A0E1 		mov	r3, r3, asl #1
 7027 27c8 013083E0 		add	r3, r3, r1
 7028 27cc 023063E0 		rsb	r3, r3, r2
 7029 27d0 FF3003E2 		and	r3, r3, #255
 7030 27d4 033080E0 		add	r3, r0, r3
 7031 27d8 16304BE5 		strb	r3, [fp, #-22]
1358:../button.c   ****                 uint8_t valor_bloque = celda_leer_valor(cuadricula_C_C[fila_bloque][columna_bloque]
 7032              		.loc 1 1358 0
 7033 27dc 15105BE5 		ldrb	r1, [fp, #-21]	@ zero_extendqisi2
 7034 27e0 16305BE5 		ldrb	r3, [fp, #-22]	@ zero_extendqisi2
 7035 27e4 D8219FE5 		ldr	r2, .L233
 7036 27e8 0112A0E1 		mov	r1, r1, asl #4
 7037 27ec 033081E0 		add	r3, r1, r3
 7038 27f0 8330A0E1 		mov	r3, r3, asl #1
 7039 27f4 033082E0 		add	r3, r2, r3
 7040 27f8 B030D3E1 		ldrh	r3, [r3, #0]
 7041 27fc 0300A0E1 		mov	r0, r3
 7042 2800 FEFFFFEB 		bl	celda_leer_valor
 7043 2804 0030A0E1 		mov	r3, r0
 7044 2808 17304BE5 		strb	r3, [fp, #-23]
1359:../button.c   ****                 if (valor_bloque > 0 && valor_bloque < 10)
 7045              		.loc 1 1359 0
 7046 280c 17305BE5 		ldrb	r3, [fp, #-23]	@ zero_extendqisi2
 7047 2810 000053E3 		cmp	r3, #0
 7048 2814 5300000A 		beq	.L227
 7049              		.loc 1 1359 0 is_stmt 0 discriminator 1
 7050 2818 17305BE5 		ldrb	r3, [fp, #-23]	@ zero_extendqisi2
 7051 281c 090053E3 		cmp	r3, #9
 7052 2820 5000008A 		bhi	.L227
1360:../button.c   ****                 {
1361:../button.c   ****                     if (bloque[k / 3][k % 3] == 0)
 7053              		.loc 1 1361 0 is_stmt 1
 7054 2824 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 7055 2828 98319FE5 		ldr	r3, .L233+4
 7056 282c 920383E0 		umull	r0, r3, r2, r3
 7057 2830 A330A0E1 		mov	r3, r3, lsr #1
 7058 2834 FF3003E2 		and	r3, r3, #255
 7059 2838 0320A0E1 		mov	r2, r3
 7060 283c 0F105BE5 		ldrb	r1, [fp, #-15]	@ zero_extendqisi2
 7061 2840 80319FE5 		ldr	r3, .L233+4
 7062 2844 910383E0 		umull	r0, r3, r1, r3
 7063 2848 A300A0E1 		mov	r0, r3, lsr #1
 7064 284c 0030A0E1 		mov	r3, r0
 7065 2850 8330A0E1 		mov	r3, r3, asl #1
 7066 2854 003083E0 		add	r3, r3, r0
 7067 2858 013063E0 		rsb	r3, r3, r1
 7068 285c FF3003E2 		and	r3, r3, #255
 7069 2860 0310A0E1 		mov	r1, r3
 7070 2864 0230A0E1 		mov	r3, r2
 7071 2868 8330A0E1 		mov	r3, r3, asl #1
 7072 286c 023083E0 		add	r3, r3, r2
 7073 2870 012083E0 		add	r2, r3, r1
 7074 2874 3330E0E3 		mvn	r3, #51
 7075 2878 8220A0E1 		mov	r2, r2, asl #1
 7076 287c 0C104BE2 		sub	r1, fp, #12
 7077 2880 022081E0 		add	r2, r1, r2
 7078 2884 033082E0 		add	r3, r2, r3
 7079 2888 B030D3E1 		ldrh	r3, [r3, #0]
 7080 288c 000053E3 		cmp	r3, #0
 7081 2890 1B00001A 		bne	.L228
1362:../button.c   ****                         bloque[k / 3][k % 3] = 1;
 7082              		.loc 1 1362 0
 7083 2894 0F205BE5 		ldrb	r2, [fp, #-15]	@ zero_extendqisi2
 7084 2898 28319FE5 		ldr	r3, .L233+4
 7085 289c 920383E0 		umull	r0, r3, r2, r3
 7086 28a0 A330A0E1 		mov	r3, r3, lsr #1
 7087 28a4 FF3003E2 		and	r3, r3, #255
 7088 28a8 0320A0E1 		mov	r2, r3
 7089 28ac 0F105BE5 		ldrb	r1, [fp, #-15]	@ zero_extendqisi2
 7090 28b0 10319FE5 		ldr	r3, .L233+4
 7091 28b4 910383E0 		umull	r0, r3, r1, r3
 7092 28b8 A300A0E1 		mov	r0, r3, lsr #1
 7093 28bc 0030A0E1 		mov	r3, r0
 7094 28c0 8330A0E1 		mov	r3, r3, asl #1
 7095 28c4 003083E0 		add	r3, r3, r0
 7096 28c8 013063E0 		rsb	r3, r3, r1
 7097 28cc FF3003E2 		and	r3, r3, #255
 7098 28d0 0310A0E1 		mov	r1, r3
 7099 28d4 0230A0E1 		mov	r3, r2
 7100 28d8 8330A0E1 		mov	r3, r3, asl #1
 7101 28dc 023083E0 		add	r3, r3, r2
 7102 28e0 012083E0 		add	r2, r3, r1
 7103 28e4 3330E0E3 		mvn	r3, #51
 7104 28e8 8220A0E1 		mov	r2, r2, asl #1
 7105 28ec 0C104BE2 		sub	r1, fp, #12
 7106 28f0 022081E0 		add	r2, r1, r2
 7107 28f4 033082E0 		add	r3, r2, r3
 7108 28f8 0120A0E3 		mov	r2, #1
 7109 28fc B020C3E1 		strh	r2, [r3, #0]	@ movhi
 7110 2900 180000EA 		b	.L227
 7111              	.L228:
1363:../button.c   ****                     else
1364:../button.c   ****                     {
1365:../button.c   ****                         cuadricula_C_C[fila_bloque][columna_bloque] |= 0x0020;
 7112              		.loc 1 1365 0
 7113 2904 15005BE5 		ldrb	r0, [fp, #-21]	@ zero_extendqisi2
 7114 2908 16305BE5 		ldrb	r3, [fp, #-22]	@ zero_extendqisi2
 7115 290c 15C05BE5 		ldrb	ip, [fp, #-21]	@ zero_extendqisi2
 7116 2910 16205BE5 		ldrb	r2, [fp, #-22]	@ zero_extendqisi2
 7117 2914 A8109FE5 		ldr	r1, .L233
 7118 2918 0CC2A0E1 		mov	ip, ip, asl #4
 7119 291c 02208CE0 		add	r2, ip, r2
 7120 2920 8220A0E1 		mov	r2, r2, asl #1
 7121 2924 022081E0 		add	r2, r1, r2
 7122 2928 B020D2E1 		ldrh	r2, [r2, #0]
 7123 292c 202082E3 		orr	r2, r2, #32
 7124 2930 0228A0E1 		mov	r2, r2, asl #16
 7125 2934 2228A0E1 		mov	r2, r2, lsr #16
 7126 2938 84109FE5 		ldr	r1, .L233
 7127 293c 0002A0E1 		mov	r0, r0, asl #4
 7128 2940 033080E0 		add	r3, r0, r3
 7129 2944 8330A0E1 		mov	r3, r3, asl #1
 7130 2948 033081E0 		add	r3, r1, r3
 7131 294c B020C3E1 		strh	r2, [r3, #0]	@ movhi
1366:../button.c   ****                         sudoku_actualizar_celda(cuadricula_C_C, fila_bloque, columna_bloque);
 7132              		.loc 1 1366 0
 7133 2950 15205BE5 		ldrb	r2, [fp, #-21]	@ zero_extendqisi2
 7134 2954 16305BE5 		ldrb	r3, [fp, #-22]	@ zero_extendqisi2
 7135 2958 64009FE5 		ldr	r0, .L233
 7136 295c 0210A0E1 		mov	r1, r2
 7137 2960 0320A0E1 		mov	r2, r3
 7138 2964 FEFFFFEB 		bl	sudoku_actualizar_celda
 7139              	.L227:
 7140              	.LBE11:
1327:../button.c   ****             for (k = 0; k < 9; k++)
 7141              		.loc 1 1327 0
 7142 2968 0F305BE5 		ldrb	r3, [fp, #-15]
 7143 296c 013083E2 		add	r3, r3, #1
 7144 2970 0F304BE5 		strb	r3, [fp, #-15]
 7145              	.L222:
1327:../button.c   ****             for (k = 0; k < 9; k++)
 7146              		.loc 1 1327 0 is_stmt 0 discriminator 1
 7147 2974 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 7148 2978 080053E3 		cmp	r3, #8
 7149 297c F8FEFF9A 		bls	.L229
 7150 2980 000000EA 		b	.L215
 7151              	.L232:
1314:../button.c   ****                 continue;
 7152              		.loc 1 1314 0 is_stmt 1
 7153 2984 0000A0E1 		mov	r0, r0	@ nop
 7154              	.L215:
 7155              	.LBE10:
1306:../button.c   ****         for (j = 0; j < 9; j++)
 7156              		.loc 1 1306 0
 7157 2988 0E305BE5 		ldrb	r3, [fp, #-14]
 7158 298c 013083E2 		add	r3, r3, #1
 7159 2990 0E304BE5 		strb	r3, [fp, #-14]
 7160              	.L213:
1306:../button.c   ****         for (j = 0; j < 9; j++)
 7161              		.loc 1 1306 0 is_stmt 0 discriminator 1
 7162 2994 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7163 2998 080053E3 		cmp	r3, #8
 7164 299c 9BFEFF9A 		bls	.L230
1304:../button.c   ****     for (i = 0; i < 9; i++)
 7165              		.loc 1 1304 0 is_stmt 1
 7166 29a0 0D305BE5 		ldrb	r3, [fp, #-13]
 7167 29a4 013083E2 		add	r3, r3, #1
 7168 29a8 0D304BE5 		strb	r3, [fp, #-13]
 7169              	.L212:
1304:../button.c   ****     for (i = 0; i < 9; i++)
 7170              		.loc 1 1304 0 is_stmt 0 discriminator 1
 7171 29ac 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 7172 29b0 080053E3 		cmp	r3, #8
 7173 29b4 92FEFF9A 		bls	.L231
1367:../button.c   ****                     }
1368:../button.c   ****                 }
1369:../button.c   ****             }
1370:../button.c   ****         }
1371:../button.c   ****     }
1372:../button.c   **** }
 7174              		.loc 1 1372 0 is_stmt 1
 7175 29b8 0CD04BE2 		sub	sp, fp, #12
 7176 29bc 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7177 29c0 1EFF2FE1 		bx	lr
 7178              	.L234:
 7179              		.align	2
 7180              	.L233:
 7181 29c4 00000000 		.word	cuadricula_C_C
 7182 29c8 ABAAAAAA 		.word	-1431655765
 7183              		.cfi_endproc
 7184              	.LFE25:
 7186              		.align	2
 7188              	limpiar_marcas_error:
 7189              	.LFB26:
1373:../button.c   **** 
1374:../button.c   **** /**
1375:../button.c   ****  * Limpiar marcas de error en el tablero
1376:../button.c   ****  * Elimina las marcas de error (bit 5) en todas las celdas del tablero.
1377:../button.c   ****  */
1378:../button.c   **** static void limpiar_marcas_error(void)
1379:../button.c   **** {
 7190              		.loc 1 1379 0
 7191              		.cfi_startproc
 7192              		@ Function supports interworking.
 7193              		@ args = 0, pretend = 0, frame = 8
 7194              		@ frame_needed = 1, uses_anonymous_args = 0
 7195 29cc 0DC0A0E1 		mov	ip, sp
 7196              	.LCFI48:
 7197              		.cfi_def_cfa_register 12
 7198 29d0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7199 29d4 04B04CE2 		sub	fp, ip, #4
 7200              		.cfi_offset 14, -8
 7201              		.cfi_offset 13, -12
 7202              		.cfi_offset 11, -16
 7203              	.LCFI49:
 7204              		.cfi_def_cfa 11, 4
 7205 29d8 08D04DE2 		sub	sp, sp, #8
1380:../button.c   ****     uint8_t i, j;
1381:../button.c   **** 
1382:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7206              		.loc 1 1382 0
 7207 29dc 0030A0E3 		mov	r3, #0
 7208 29e0 0D304BE5 		strb	r3, [fp, #-13]
 7209 29e4 1E0000EA 		b	.L236
 7210              	.L239:
1383:../button.c   ****     {
1384:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7211              		.loc 1 1384 0
 7212 29e8 0030A0E3 		mov	r3, #0
 7213 29ec 0E304BE5 		strb	r3, [fp, #-14]
 7214 29f0 150000EA 		b	.L237
 7215              	.L238:
1385:../button.c   ****         {
1386:../button.c   ****             cuadricula_C_C[i][j] &= ~(1 << 5); // Limpiar bit 5 (marca de error)
 7216              		.loc 1 1386 0 discriminator 2
 7217 29f4 0D005BE5 		ldrb	r0, [fp, #-13]	@ zero_extendqisi2
 7218 29f8 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7219 29fc 0DC05BE5 		ldrb	ip, [fp, #-13]	@ zero_extendqisi2
 7220 2a00 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 7221 2a04 70109FE5 		ldr	r1, .L240
 7222 2a08 0CC2A0E1 		mov	ip, ip, asl #4
 7223 2a0c 02208CE0 		add	r2, ip, r2
 7224 2a10 8220A0E1 		mov	r2, r2, asl #1
 7225 2a14 022081E0 		add	r2, r1, r2
 7226 2a18 B020D2E1 		ldrh	r2, [r2, #0]
 7227 2a1c 2020C2E3 		bic	r2, r2, #32
 7228 2a20 0228A0E1 		mov	r2, r2, asl #16
 7229 2a24 2228A0E1 		mov	r2, r2, lsr #16
 7230 2a28 4C109FE5 		ldr	r1, .L240
 7231 2a2c 0002A0E1 		mov	r0, r0, asl #4
 7232 2a30 033080E0 		add	r3, r0, r3
 7233 2a34 8330A0E1 		mov	r3, r3, asl #1
 7234 2a38 033081E0 		add	r3, r1, r3
 7235 2a3c B020C3E1 		strh	r2, [r3, #0]	@ movhi
1384:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7236              		.loc 1 1384 0 discriminator 2
 7237 2a40 0E305BE5 		ldrb	r3, [fp, #-14]
 7238 2a44 013083E2 		add	r3, r3, #1
 7239 2a48 0E304BE5 		strb	r3, [fp, #-14]
 7240              	.L237:
1384:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7241              		.loc 1 1384 0 is_stmt 0 discriminator 1
 7242 2a4c 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7243 2a50 0F0053E3 		cmp	r3, #15
 7244 2a54 E6FFFF9A 		bls	.L238
1382:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7245              		.loc 1 1382 0 is_stmt 1
 7246 2a58 0D305BE5 		ldrb	r3, [fp, #-13]
 7247 2a5c 013083E2 		add	r3, r3, #1
 7248 2a60 0D304BE5 		strb	r3, [fp, #-13]
 7249              	.L236:
1382:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7250              		.loc 1 1382 0 is_stmt 0 discriminator 1
 7251 2a64 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 7252 2a68 080053E3 		cmp	r3, #8
 7253 2a6c DDFFFF9A 		bls	.L239
1387:../button.c   ****         }
1388:../button.c   ****     }
1389:../button.c   **** }
 7254              		.loc 1 1389 0 is_stmt 1
 7255 2a70 0CD04BE2 		sub	sp, fp, #12
 7256 2a74 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7257 2a78 1EFF2FE1 		bx	lr
 7258              	.L241:
 7259              		.align	2
 7260              	.L240:
 7261 2a7c 00000000 		.word	cuadricula_C_C
 7262              		.cfi_endproc
 7263              	.LFE26:
 7265              		.align	2
 7267              	verificar_tablero_completo:
 7268              	.LFB27:
1390:../button.c   **** 
1391:../button.c   **** /**
1392:../button.c   ****  * Verificar si el tablero estÃ¡ completo
1393:../button.c   ****  * Retorno:
1394:../button.c   ****  *  - 1 si el tablero estÃ¡ completo (sin celdas vacÃ­as), 0 si hay celdas vacÃ­as
1395:../button.c   ****  */
1396:../button.c   **** static uint8_t verificar_tablero_completo(void)
1397:../button.c   **** {
 7269              		.loc 1 1397 0
 7270              		.cfi_startproc
 7271              		@ Function supports interworking.
 7272              		@ args = 0, pretend = 0, frame = 8
 7273              		@ frame_needed = 1, uses_anonymous_args = 0
 7274 2a80 0DC0A0E1 		mov	ip, sp
 7275              	.LCFI50:
 7276              		.cfi_def_cfa_register 12
 7277 2a84 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7278 2a88 04B04CE2 		sub	fp, ip, #4
 7279              		.cfi_offset 14, -8
 7280              		.cfi_offset 13, -12
 7281              		.cfi_offset 11, -16
 7282              	.LCFI51:
 7283              		.cfi_def_cfa 11, 4
 7284 2a8c 08D04DE2 		sub	sp, sp, #8
1398:../button.c   ****     uint8_t i, j;
1399:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7285              		.loc 1 1399 0
 7286 2a90 0030A0E3 		mov	r3, #0
 7287 2a94 0D304BE5 		strb	r3, [fp, #-13]
 7288 2a98 1C0000EA 		b	.L243
 7289              	.L248:
1400:../button.c   ****     {
1401:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7290              		.loc 1 1401 0
 7291 2a9c 0030A0E3 		mov	r3, #0
 7292 2aa0 0E304BE5 		strb	r3, [fp, #-14]
 7293 2aa4 130000EA 		b	.L244
 7294              	.L247:
 7295              	.LBB12:
1402:../button.c   ****         {
1403:../button.c   ****             uint8_t valor = celda_leer_valor(cuadricula_C_C[i][j]);
 7296              		.loc 1 1403 0
 7297 2aa8 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 7298 2aac 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7299 2ab0 78209FE5 		ldr	r2, .L249
 7300 2ab4 0112A0E1 		mov	r1, r1, asl #4
 7301 2ab8 033081E0 		add	r3, r1, r3
 7302 2abc 8330A0E1 		mov	r3, r3, asl #1
 7303 2ac0 033082E0 		add	r3, r2, r3
 7304 2ac4 B030D3E1 		ldrh	r3, [r3, #0]
 7305 2ac8 0300A0E1 		mov	r0, r3
 7306 2acc FEFFFFEB 		bl	celda_leer_valor
 7307 2ad0 0030A0E1 		mov	r3, r0
 7308 2ad4 0F304BE5 		strb	r3, [fp, #-15]
1404:../button.c   ****             // Si se encuentra una celda vacÃ­a (valor 0), retornar 0
1405:../button.c   ****             if (valor == 0)
 7309              		.loc 1 1405 0
 7310 2ad8 0F305BE5 		ldrb	r3, [fp, #-15]	@ zero_extendqisi2
 7311 2adc 000053E3 		cmp	r3, #0
 7312 2ae0 0100001A 		bne	.L245
1406:../button.c   ****                 return 0;
 7313              		.loc 1 1406 0
 7314 2ae4 0030A0E3 		mov	r3, #0
 7315 2ae8 0C0000EA 		b	.L246
 7316              	.L245:
 7317              	.LBE12:
1401:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7318              		.loc 1 1401 0
 7319 2aec 0E305BE5 		ldrb	r3, [fp, #-14]
 7320 2af0 013083E2 		add	r3, r3, #1
 7321 2af4 0E304BE5 		strb	r3, [fp, #-14]
 7322              	.L244:
1401:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7323              		.loc 1 1401 0 is_stmt 0 discriminator 1
 7324 2af8 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7325 2afc 0F0053E3 		cmp	r3, #15
 7326 2b00 E8FFFF9A 		bls	.L247
1399:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7327              		.loc 1 1399 0 is_stmt 1
 7328 2b04 0D305BE5 		ldrb	r3, [fp, #-13]
 7329 2b08 013083E2 		add	r3, r3, #1
 7330 2b0c 0D304BE5 		strb	r3, [fp, #-13]
 7331              	.L243:
1399:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7332              		.loc 1 1399 0 is_stmt 0 discriminator 1
 7333 2b10 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 7334 2b14 080053E3 		cmp	r3, #8
 7335 2b18 DFFFFF9A 		bls	.L248
1407:../button.c   ****         }
1408:../button.c   ****     }
1409:../button.c   ****     // Si no se encontraron celdas vacÃ­as, retornar 1
1410:../button.c   ****     return 1;
 7336              		.loc 1 1410 0 is_stmt 1
 7337 2b1c 0130A0E3 		mov	r3, #1
 7338              	.L246:
1411:../button.c   **** }
 7339              		.loc 1 1411 0
 7340 2b20 0300A0E1 		mov	r0, r3
 7341 2b24 0CD04BE2 		sub	sp, fp, #12
 7342 2b28 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7343 2b2c 1EFF2FE1 		bx	lr
 7344              	.L250:
 7345              		.align	2
 7346              	.L249:
 7347 2b30 00000000 		.word	cuadricula_C_C
 7348              		.cfi_endproc
 7349              	.LFE27:
 7351              		.align	2
 7353              	finalizar_partida_completa:
 7354              	.LFB28:
1412:../button.c   **** 
1413:../button.c   **** /**
1414:../button.c   ****  * Finalizar partida completa
1415:../button.c   ****  * Se llama cuando el tablero estÃ¡ completo y se ha verificado que no hay errores.
1416:../button.c   ****  * Muestra un mensaje de victoria y el tiempo de la partida.
1417:../button.c   ****  */
1418:../button.c   **** static void finalizar_partida_completa(void)
1419:../button.c   **** {
 7355              		.loc 1 1419 0
 7356              		.cfi_startproc
 7357              		@ Function supports interworking.
 7358              		@ args = 0, pretend = 0, frame = 8
 7359              		@ frame_needed = 1, uses_anonymous_args = 0
 7360 2b34 0DC0A0E1 		mov	ip, sp
 7361              	.LCFI52:
 7362              		.cfi_def_cfa_register 12
 7363 2b38 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7364 2b3c 04B04CE2 		sub	fp, ip, #4
 7365              		.cfi_offset 14, -8
 7366              		.cfi_offset 13, -12
 7367              		.cfi_offset 11, -16
 7368              	.LCFI53:
 7369              		.cfi_def_cfa 11, 4
 7370 2b40 08D04DE2 		sub	sp, sp, #8
1420:../button.c   ****     uint8_t i, j;
1421:../button.c   ****     // Limpiar resaltados en el tablero
1422:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7371              		.loc 1 1422 0
 7372 2b44 0030A0E3 		mov	r3, #0
 7373 2b48 0D304BE5 		strb	r3, [fp, #-13]
 7374 2b4c 110000EA 		b	.L252
 7375              	.L255:
1423:../button.c   ****     {
1424:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7376              		.loc 1 1424 0
 7377 2b50 0030A0E3 		mov	r3, #0
 7378 2b54 0E304BE5 		strb	r3, [fp, #-14]
 7379 2b58 080000EA 		b	.L253
 7380              	.L254:
1425:../button.c   ****         {
1426:../button.c   ****             sudoku_resaltar_celda(i, j, 0);
 7381              		.loc 1 1426 0 discriminator 2
 7382 2b5c 0D205BE5 		ldrb	r2, [fp, #-13]	@ zero_extendqisi2
 7383 2b60 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7384 2b64 0200A0E1 		mov	r0, r2
 7385 2b68 0310A0E1 		mov	r1, r3
 7386 2b6c 0020A0E3 		mov	r2, #0
 7387 2b70 FEFFFFEB 		bl	sudoku_resaltar_celda
1424:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7388              		.loc 1 1424 0 discriminator 2
 7389 2b74 0E305BE5 		ldrb	r3, [fp, #-14]
 7390 2b78 013083E2 		add	r3, r3, #1
 7391 2b7c 0E304BE5 		strb	r3, [fp, #-14]
 7392              	.L253:
1424:../button.c   ****         for (j = 0; j < NUM_COLUMNAS; j++)
 7393              		.loc 1 1424 0 is_stmt 0 discriminator 1
 7394 2b80 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7395 2b84 0F0053E3 		cmp	r3, #15
 7396 2b88 F3FFFF9A 		bls	.L254
1422:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7397              		.loc 1 1422 0 is_stmt 1
 7398 2b8c 0D305BE5 		ldrb	r3, [fp, #-13]
 7399 2b90 013083E2 		add	r3, r3, #1
 7400 2b94 0D304BE5 		strb	r3, [fp, #-13]
 7401              	.L252:
1422:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7402              		.loc 1 1422 0 is_stmt 0 discriminator 1
 7403 2b98 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 7404 2b9c 080053E3 		cmp	r3, #8
 7405 2ba0 EAFFFF9A 		bls	.L255
1427:../button.c   ****         }
1428:../button.c   ****     }
1429:../button.c   **** 
1430:../button.c   ****     // Mostrar tiempo de la partida
1431:../button.c   ****     mostrar_victoria_con_tiempo();
 7406              		.loc 1 1431 0 is_stmt 1
 7407 2ba4 D6FCFFEB 		bl	mostrar_victoria_con_tiempo
1432:../button.c   **** 
1433:../button.c   ****     // REINICIO COMPLETO - resetear TODAS las variables de estado
1434:../button.c   ****     estado_juego = ESTADO_INICIAL;
 7408              		.loc 1 1434 0
 7409 2ba8 E8309FE5 		ldr	r3, .L260
 7410 2bac 0020A0E3 		mov	r2, #0
 7411 2bb0 0020C3E5 		strb	r2, [r3, #0]
1435:../button.c   ****     pantalla_inicial_mostrada = 0; // Forzar mostrar pantalla inicial
 7412              		.loc 1 1435 0
 7413 2bb4 E0309FE5 		ldr	r3, .L260+4
 7414 2bb8 0020A0E3 		mov	r2, #0
 7415 2bbc 0020C3E5 		strb	r2, [r3, #0]
1436:../button.c   ****     tablero_dibujado = 0;
 7416              		.loc 1 1436 0
 7417 2bc0 D8309FE5 		ldr	r3, .L260+8
 7418 2bc4 0020A0E3 		mov	r2, #0
 7419 2bc8 0020C3E5 		strb	r2, [r3, #0]
1437:../button.c   ****     resetear_tiempo_partida();
 7420              		.loc 1 1437 0
 7421 2bcc BEFCFFEB 		bl	resetear_tiempo_partida
1438:../button.c   ****     numero_actual = 0;
 7422              		.loc 1 1438 0
 7423 2bd0 CC309FE5 		ldr	r3, .L260+12
 7424 2bd4 0020A0E3 		mov	r2, #0
 7425 2bd8 0020C3E5 		strb	r2, [r3, #0]
1439:../button.c   ****     fila_seleccionada = 0;
 7426              		.loc 1 1439 0
 7427 2bdc C4309FE5 		ldr	r3, .L260+16
 7428 2be0 0020A0E3 		mov	r2, #0
 7429 2be4 0020C3E5 		strb	r2, [r3, #0]
1440:../button.c   ****     columna_seleccionada = 0;
 7430              		.loc 1 1440 0
 7431 2be8 BC309FE5 		ldr	r3, .L260+20
 7432 2bec 0020A0E3 		mov	r2, #0
 7433 2bf0 0020C3E5 		strb	r2, [r3, #0]
1441:../button.c   ****     contador_error = 0;
 7434              		.loc 1 1441 0
 7435 2bf4 B4309FE5 		ldr	r3, .L260+24
 7436 2bf8 0020A0E3 		mov	r2, #0
 7437 2bfc 002083E5 		str	r2, [r3, #0]
1442:../button.c   **** 
1443:../button.c   ****     // LIMPIAR TODOS los eventos y estados
1444:../button.c   ****     limpiar_todos_eventos();
 7438              		.loc 1 1444 0
 7439 2c00 2D0000EB 		bl	limpiar_todos_eventos
1445:../button.c   **** 
1446:../button.c   ****     // RESTAURAR tablero original
1447:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7440              		.loc 1 1447 0
 7441 2c04 0030A0E3 		mov	r3, #0
 7442 2c08 0D304BE5 		strb	r3, [fp, #-13]
 7443 2c0c 1B0000EA 		b	.L256
 7444              	.L259:
1448:../button.c   ****     {
1449:../button.c   ****         for (j = 0; j < 9; j++)
 7445              		.loc 1 1449 0
 7446 2c10 0030A0E3 		mov	r3, #0
 7447 2c14 0E304BE5 		strb	r3, [fp, #-14]
 7448 2c18 120000EA 		b	.L257
 7449              	.L258:
1450:../button.c   ****         {
1451:../button.c   ****             cuadricula_C_C[i][j] = cuadricula_C_ARM[i][j];
 7450              		.loc 1 1451 0 discriminator 2
 7451 2c1c 0D005BE5 		ldrb	r0, [fp, #-13]	@ zero_extendqisi2
 7452 2c20 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7453 2c24 0DC05BE5 		ldrb	ip, [fp, #-13]	@ zero_extendqisi2
 7454 2c28 0E205BE5 		ldrb	r2, [fp, #-14]	@ zero_extendqisi2
 7455 2c2c 80109FE5 		ldr	r1, .L260+28
 7456 2c30 0CC2A0E1 		mov	ip, ip, asl #4
 7457 2c34 02208CE0 		add	r2, ip, r2
 7458 2c38 8220A0E1 		mov	r2, r2, asl #1
 7459 2c3c 022081E0 		add	r2, r1, r2
 7460 2c40 B020D2E1 		ldrh	r2, [r2, #0]
 7461 2c44 6C109FE5 		ldr	r1, .L260+32
 7462 2c48 0002A0E1 		mov	r0, r0, asl #4
 7463 2c4c 033080E0 		add	r3, r0, r3
 7464 2c50 8330A0E1 		mov	r3, r3, asl #1
 7465 2c54 033081E0 		add	r3, r1, r3
 7466 2c58 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1449:../button.c   ****         for (j = 0; j < 9; j++)
 7467              		.loc 1 1449 0 discriminator 2
 7468 2c5c 0E305BE5 		ldrb	r3, [fp, #-14]
 7469 2c60 013083E2 		add	r3, r3, #1
 7470 2c64 0E304BE5 		strb	r3, [fp, #-14]
 7471              	.L257:
1449:../button.c   ****         for (j = 0; j < 9; j++)
 7472              		.loc 1 1449 0 is_stmt 0 discriminator 1
 7473 2c68 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 7474 2c6c 080053E3 		cmp	r3, #8
 7475 2c70 E9FFFF9A 		bls	.L258
1447:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7476              		.loc 1 1447 0 is_stmt 1
 7477 2c74 0D305BE5 		ldrb	r3, [fp, #-13]
 7478 2c78 013083E2 		add	r3, r3, #1
 7479 2c7c 0D304BE5 		strb	r3, [fp, #-13]
 7480              	.L256:
1447:../button.c   ****     for (i = 0; i < NUM_FILAS; i++)
 7481              		.loc 1 1447 0 is_stmt 0 discriminator 1
 7482 2c80 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 7483 2c84 080053E3 		cmp	r3, #8
 7484 2c88 E0FFFF9A 		bls	.L259
1452:../button.c   ****         }
1453:../button.c   ****     }
1454:../button.c   **** }
 7485              		.loc 1 1454 0 is_stmt 1
 7486 2c8c 0CD04BE2 		sub	sp, fp, #12
 7487 2c90 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7488 2c94 1EFF2FE1 		bx	lr
 7489              	.L261:
 7490              		.align	2
 7491              	.L260:
 7492 2c98 14000000 		.word	estado_juego
 7493 2c9c 20000000 		.word	pantalla_inicial_mostrada
 7494 2ca0 21000000 		.word	tablero_dibujado
 7495 2ca4 30000000 		.word	numero_actual
 7496 2ca8 15000000 		.word	fila_seleccionada
 7497 2cac 16000000 		.word	columna_seleccionada
 7498 2cb0 1C000000 		.word	contador_error
 7499 2cb4 00000000 		.word	cuadricula_C_ARM
 7500 2cb8 00000000 		.word	cuadricula_C_C
 7501              		.cfi_endproc
 7502              	.LFE28:
 7504              		.align	2
 7506              	limpiar_todos_eventos:
 7507              	.LFB29:
1455:../button.c   **** 
1456:../button.c   **** /**
1457:../button.c   ****  * Agregar funciÃ³n para limpiar todos los eventos
1458:../button.c   ****  */
1459:../button.c   **** static void limpiar_todos_eventos(void)
1460:../button.c   **** {
 7508              		.loc 1 1460 0
 7509              		.cfi_startproc
 7510              		@ Function supports interworking.
 7511              		@ args = 0, pretend = 0, frame = 8
 7512              		@ frame_needed = 1, uses_anonymous_args = 0
 7513 2cbc 0DC0A0E1 		mov	ip, sp
 7514              	.LCFI54:
 7515              		.cfi_def_cfa_register 12
 7516 2cc0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7517 2cc4 04B04CE2 		sub	fp, ip, #4
 7518              		.cfi_offset 14, -8
 7519              		.cfi_offset 13, -12
 7520              		.cfi_offset 11, -16
 7521              	.LCFI55:
 7522              		.cfi_def_cfa 11, 4
 7523 2cc8 08D04DE2 		sub	sp, sp, #8
1461:../button.c   ****     evento_boton_derecho = 0;
 7524              		.loc 1 1461 0
 7525 2ccc C4309FE5 		ldr	r3, .L266
 7526 2cd0 0020A0E3 		mov	r2, #0
 7527 2cd4 0020C3E5 		strb	r2, [r3, #0]
1462:../button.c   ****     evento_boton_izquierdo = 0;
 7528              		.loc 1 1462 0
 7529 2cd8 BC309FE5 		ldr	r3, .L266+4
 7530 2cdc 0020A0E3 		mov	r2, #0
 7531 2ce0 0020C3E5 		strb	r2, [r3, #0]
1463:../button.c   ****     juego_iniciado = 0;
 7532              		.loc 1 1463 0
 7533 2ce4 B4309FE5 		ldr	r3, .L266+8
 7534 2ce8 0020A0E3 		mov	r2, #0
 7535 2cec 0020C3E5 		strb	r2, [r3, #0]
1464:../button.c   ****     evento_teclado_digito = 0xFF;
 7536              		.loc 1 1464 0
 7537 2cf0 AC309FE5 		ldr	r3, .L266+12
 7538 2cf4 0020E0E3 		mvn	r2, #0
 7539 2cf8 0020C3E5 		strb	r2, [r3, #0]
1465:../button.c   **** 
1466:../button.c   ****     // TambiÃ©n resetear estados de botones si estÃ¡n en proceso
1467:../button.c   ****     int i;
1468:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 7540              		.loc 1 1468 0
 7541 2cfc 0030A0E3 		mov	r3, #0
 7542 2d00 10300BE5 		str	r3, [fp, #-16]
 7543 2d04 150000EA 		b	.L263
 7544              	.L265:
1469:../button.c   ****     {
1470:../button.c   ****         if (botones[i].estado != e_reposo)
 7545              		.loc 1 1470 0
 7546 2d08 98109FE5 		ldr	r1, .L266+16
 7547 2d0c 10201BE5 		ldr	r2, [fp, #-16]
 7548 2d10 0230A0E1 		mov	r3, r2
 7549 2d14 8330A0E1 		mov	r3, r3, asl #1
 7550 2d18 023083E0 		add	r3, r3, r2
 7551 2d1c 8331A0E1 		mov	r3, r3, asl #3
 7552 2d20 033081E0 		add	r3, r1, r3
 7553 2d24 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 7554 2d28 000053E3 		cmp	r3, #0
 7555 2d2c 0800000A 		beq	.L264
1471:../button.c   ****         {
1472:../button.c   ****             botones[i].estado = e_reposo;
 7556              		.loc 1 1472 0
 7557 2d30 70109FE5 		ldr	r1, .L266+16
 7558 2d34 10201BE5 		ldr	r2, [fp, #-16]
 7559 2d38 0230A0E1 		mov	r3, r2
 7560 2d3c 8330A0E1 		mov	r3, r3, asl #1
 7561 2d40 023083E0 		add	r3, r3, r2
 7562 2d44 8331A0E1 		mov	r3, r3, asl #3
 7563 2d48 033081E0 		add	r3, r1, r3
 7564 2d4c 0020A0E3 		mov	r2, #0
 7565 2d50 0020C3E5 		strb	r2, [r3, #0]
 7566              	.L264:
1468:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 7567              		.loc 1 1468 0
 7568 2d54 10301BE5 		ldr	r3, [fp, #-16]
 7569 2d58 013083E2 		add	r3, r3, #1
 7570 2d5c 10300BE5 		str	r3, [fp, #-16]
 7571              	.L263:
1468:../button.c   ****     for (i = 0; i < NUM_BOTONES; i++)
 7572              		.loc 1 1468 0 is_stmt 0 discriminator 1
 7573 2d60 10301BE5 		ldr	r3, [fp, #-16]
 7574 2d64 010053E3 		cmp	r3, #1
 7575 2d68 E6FFFFDA 		ble	.L265
1473:../button.c   ****         }
1474:../button.c   ****     }
1475:../button.c   **** 
1476:../button.c   ****     // Limpiar interrupciones pendientes
1477:../button.c   ****     rEXTINTPND = 0xf;
 7576              		.loc 1 1477 0 is_stmt 1
 7577 2d6c 38309FE5 		ldr	r3, .L266+20
 7578 2d70 0F20A0E3 		mov	r2, #15
 7579 2d74 002083E5 		str	r2, [r3, #0]
1478:../button.c   ****     rINTMSK &= ~BIT_EINT4567; // Habilitar interrupciones
 7580              		.loc 1 1478 0
 7581 2d78 30309FE5 		ldr	r3, .L266+24
 7582 2d7c 2C209FE5 		ldr	r2, .L266+24
 7583 2d80 002092E5 		ldr	r2, [r2, #0]
 7584 2d84 0226C2E3 		bic	r2, r2, #2097152
 7585 2d88 002083E5 		str	r2, [r3, #0]
1479:../button.c   **** }
 7586              		.loc 1 1479 0
 7587 2d8c 0CD04BE2 		sub	sp, fp, #12
 7588 2d90 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7589 2d94 1EFF2FE1 		bx	lr
 7590              	.L267:
 7591              		.align	2
 7592              	.L266:
 7593 2d98 17000000 		.word	evento_boton_derecho
 7594 2d9c 18000000 		.word	evento_boton_izquierdo
 7595 2da0 19000000 		.word	juego_iniciado
 7596 2da4 31000000 		.word	evento_teclado_digito
 7597 2da8 00000000 		.word	botones
 7598 2dac 5400D201 		.word	30539860
 7599 2db0 0C00E001 		.word	31457292
 7600              		.cfi_endproc
 7601              	.LFE29:
 7603              		.align	2
 7605              	detectar_y_marcar_errores_celda:
 7606              	.LFB30:
1480:../button.c   **** 
1481:../button.c   **** /**
1482:../button.c   ****  * Busca conflictos para un valor en una posiciÃ³n especÃ­fica.
1483:../button.c   ****  * Si encuentra conflicto:
1484:../button.c   ****  * 1. Marca la celda conflictiva (la vieja) con el bit de error.
1485:../button.c   ****  * 2. Actualiza visualmente la celda conflictiva.
1486:../button.c   ****  * 3. Devuelve 1 para indicar que hubo error.
1487:../button.c   ****  */
1488:../button.c   **** static int detectar_y_marcar_errores_celda(uint8_t f, uint8_t c, uint8_t valor)
1489:../button.c   **** {
 7607              		.loc 1 1489 0
 7608              		.cfi_startproc
 7609              		@ Function supports interworking.
 7610              		@ args = 0, pretend = 0, frame = 32
 7611              		@ frame_needed = 1, uses_anonymous_args = 0
 7612 2db4 0DC0A0E1 		mov	ip, sp
 7613              	.LCFI56:
 7614              		.cfi_def_cfa_register 12
 7615 2db8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7616 2dbc 04B04CE2 		sub	fp, ip, #4
 7617              		.cfi_offset 14, -8
 7618              		.cfi_offset 13, -12
 7619              		.cfi_offset 11, -16
 7620              	.LCFI57:
 7621              		.cfi_def_cfa 11, 4
 7622 2dc0 20D04DE2 		sub	sp, sp, #32
 7623 2dc4 0230A0E1 		mov	r3, r2
 7624 2dc8 0020A0E1 		mov	r2, r0
 7625 2dcc 25204BE5 		strb	r2, [fp, #-37]
 7626 2dd0 0120A0E1 		mov	r2, r1
 7627 2dd4 26204BE5 		strb	r2, [fp, #-38]
 7628 2dd8 27304BE5 		strb	r3, [fp, #-39]
1490:../button.c   ****     int hay_error = 0;
 7629              		.loc 1 1490 0
 7630 2ddc 0030A0E3 		mov	r3, #0
 7631 2de0 10300BE5 		str	r3, [fp, #-16]
1491:../button.c   ****     int k, l;
1492:../button.c   **** 
1493:../button.c   ****     // 1. Comprobar Fila
1494:../button.c   ****     for (k = 0; k < 9; k++)
 7632              		.loc 1 1494 0
 7633 2de4 0030A0E3 		mov	r3, #0
 7634 2de8 14300BE5 		str	r3, [fp, #-20]
 7635 2dec 320000EA 		b	.L269
 7636              	.L272:
1495:../button.c   ****     {
1496:../button.c   ****         if (k == c)
 7637              		.loc 1 1496 0
 7638 2df0 26205BE5 		ldrb	r2, [fp, #-38]	@ zero_extendqisi2
 7639 2df4 14301BE5 		ldr	r3, [fp, #-20]
 7640 2df8 030052E1 		cmp	r2, r3
 7641 2dfc 2A00000A 		beq	.L283
 7642              	.L270:
1497:../button.c   ****             continue; // No compararse consigo mismo
1498:../button.c   **** 
1499:../button.c   ****         // Leemos el valor de la celda vecina
1500:../button.c   ****         if (celda_leer_valor(cuadricula_C_C[f][k]) == valor)
 7643              		.loc 1 1500 0
 7644 2e00 25305BE5 		ldrb	r3, [fp, #-37]	@ zero_extendqisi2
 7645 2e04 30239FE5 		ldr	r2, .L286
 7646 2e08 0312A0E1 		mov	r1, r3, asl #4
 7647 2e0c 14301BE5 		ldr	r3, [fp, #-20]
 7648 2e10 033081E0 		add	r3, r1, r3
 7649 2e14 8330A0E1 		mov	r3, r3, asl #1
 7650 2e18 033082E0 		add	r3, r2, r3
 7651 2e1c B030D3E1 		ldrh	r3, [r3, #0]
 7652 2e20 0300A0E1 		mov	r0, r3
 7653 2e24 FEFFFFEB 		bl	celda_leer_valor
 7654 2e28 0030A0E1 		mov	r3, r0
 7655 2e2c 27205BE5 		ldrb	r2, [fp, #-39]	@ zero_extendqisi2
 7656 2e30 030052E1 		cmp	r2, r3
 7657 2e34 1D00001A 		bne	.L271
1501:../button.c   ****         {
1502:../button.c   ****             // Â¡Conflicto encontrado!
1503:../button.c   ****             cuadricula_C_C[f][k] |= 0x0020;                // Activar Bit Error
 7658              		.loc 1 1503 0
 7659 2e38 25305BE5 		ldrb	r3, [fp, #-37]	@ zero_extendqisi2
 7660 2e3c 25205BE5 		ldrb	r2, [fp, #-37]	@ zero_extendqisi2
 7661 2e40 F4129FE5 		ldr	r1, .L286
 7662 2e44 0202A0E1 		mov	r0, r2, asl #4
 7663 2e48 14201BE5 		ldr	r2, [fp, #-20]
 7664 2e4c 022080E0 		add	r2, r0, r2
 7665 2e50 8220A0E1 		mov	r2, r2, asl #1
 7666 2e54 022081E0 		add	r2, r1, r2
 7667 2e58 B020D2E1 		ldrh	r2, [r2, #0]
 7668 2e5c 202082E3 		orr	r2, r2, #32
 7669 2e60 0228A0E1 		mov	r2, r2, asl #16
 7670 2e64 2228A0E1 		mov	r2, r2, lsr #16
 7671 2e68 CC129FE5 		ldr	r1, .L286
 7672 2e6c 0302A0E1 		mov	r0, r3, asl #4
 7673 2e70 14301BE5 		ldr	r3, [fp, #-20]
 7674 2e74 033080E0 		add	r3, r0, r3
 7675 2e78 8330A0E1 		mov	r3, r3, asl #1
 7676 2e7c 033081E0 		add	r3, r1, r3
 7677 2e80 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1504:../button.c   ****             sudoku_actualizar_celda(cuadricula_C_C, f, k); // Repintar invertido
 7678              		.loc 1 1504 0
 7679 2e84 14301BE5 		ldr	r3, [fp, #-20]
 7680 2e88 FF3003E2 		and	r3, r3, #255
 7681 2e8c 25205BE5 		ldrb	r2, [fp, #-37]	@ zero_extendqisi2
 7682 2e90 A4029FE5 		ldr	r0, .L286
 7683 2e94 0210A0E1 		mov	r1, r2
 7684 2e98 0320A0E1 		mov	r2, r3
 7685 2e9c FEFFFFEB 		bl	sudoku_actualizar_celda
1505:../button.c   ****             hay_error = 1;
 7686              		.loc 1 1505 0
 7687 2ea0 0130A0E3 		mov	r3, #1
 7688 2ea4 10300BE5 		str	r3, [fp, #-16]
 7689 2ea8 000000EA 		b	.L271
 7690              	.L283:
1497:../button.c   ****             continue; // No compararse consigo mismo
 7691              		.loc 1 1497 0
 7692 2eac 0000A0E1 		mov	r0, r0	@ nop
 7693              	.L271:
1494:../button.c   ****     for (k = 0; k < 9; k++)
 7694              		.loc 1 1494 0
 7695 2eb0 14301BE5 		ldr	r3, [fp, #-20]
 7696 2eb4 013083E2 		add	r3, r3, #1
 7697 2eb8 14300BE5 		str	r3, [fp, #-20]
 7698              	.L269:
1494:../button.c   ****     for (k = 0; k < 9; k++)
 7699              		.loc 1 1494 0 is_stmt 0 discriminator 1
 7700 2ebc 14301BE5 		ldr	r3, [fp, #-20]
 7701 2ec0 080053E3 		cmp	r3, #8
 7702 2ec4 C9FFFFDA 		ble	.L272
1506:../button.c   ****         }
1507:../button.c   ****     }
1508:../button.c   **** 
1509:../button.c   ****     // 2. Comprobar Columna
1510:../button.c   ****     for (k = 0; k < 9; k++)
 7703              		.loc 1 1510 0 is_stmt 1
 7704 2ec8 0030A0E3 		mov	r3, #0
 7705 2ecc 14300BE5 		str	r3, [fp, #-20]
 7706 2ed0 320000EA 		b	.L273
 7707              	.L276:
1511:../button.c   ****     {
1512:../button.c   ****         if (k == f)
 7708              		.loc 1 1512 0
 7709 2ed4 25205BE5 		ldrb	r2, [fp, #-37]	@ zero_extendqisi2
 7710 2ed8 14301BE5 		ldr	r3, [fp, #-20]
 7711 2edc 030052E1 		cmp	r2, r3
 7712 2ee0 2A00000A 		beq	.L284
 7713              	.L274:
1513:../button.c   ****             continue;
1514:../button.c   **** 
1515:../button.c   ****         if (celda_leer_valor(cuadricula_C_C[k][c]) == valor)
 7714              		.loc 1 1515 0
 7715 2ee4 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 7716 2ee8 4C229FE5 		ldr	r2, .L286
 7717 2eec 14101BE5 		ldr	r1, [fp, #-20]
 7718 2ef0 0112A0E1 		mov	r1, r1, asl #4
 7719 2ef4 033081E0 		add	r3, r1, r3
 7720 2ef8 8330A0E1 		mov	r3, r3, asl #1
 7721 2efc 033082E0 		add	r3, r2, r3
 7722 2f00 B030D3E1 		ldrh	r3, [r3, #0]
 7723 2f04 0300A0E1 		mov	r0, r3
 7724 2f08 FEFFFFEB 		bl	celda_leer_valor
 7725 2f0c 0030A0E1 		mov	r3, r0
 7726 2f10 27205BE5 		ldrb	r2, [fp, #-39]	@ zero_extendqisi2
 7727 2f14 030052E1 		cmp	r2, r3
 7728 2f18 1D00001A 		bne	.L275
1516:../button.c   ****         {
1517:../button.c   ****             cuadricula_C_C[k][c] |= 0x0020;
 7729              		.loc 1 1517 0
 7730 2f1c 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 7731 2f20 26205BE5 		ldrb	r2, [fp, #-38]	@ zero_extendqisi2
 7732 2f24 10129FE5 		ldr	r1, .L286
 7733 2f28 14001BE5 		ldr	r0, [fp, #-20]
 7734 2f2c 0002A0E1 		mov	r0, r0, asl #4
 7735 2f30 022080E0 		add	r2, r0, r2
 7736 2f34 8220A0E1 		mov	r2, r2, asl #1
 7737 2f38 022081E0 		add	r2, r1, r2
 7738 2f3c B020D2E1 		ldrh	r2, [r2, #0]
 7739 2f40 202082E3 		orr	r2, r2, #32
 7740 2f44 0228A0E1 		mov	r2, r2, asl #16
 7741 2f48 2228A0E1 		mov	r2, r2, lsr #16
 7742 2f4c E8119FE5 		ldr	r1, .L286
 7743 2f50 14001BE5 		ldr	r0, [fp, #-20]
 7744 2f54 0002A0E1 		mov	r0, r0, asl #4
 7745 2f58 033080E0 		add	r3, r0, r3
 7746 2f5c 8330A0E1 		mov	r3, r3, asl #1
 7747 2f60 033081E0 		add	r3, r1, r3
 7748 2f64 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1518:../button.c   ****             sudoku_actualizar_celda(cuadricula_C_C, k, c);
 7749              		.loc 1 1518 0
 7750 2f68 14301BE5 		ldr	r3, [fp, #-20]
 7751 2f6c FF2003E2 		and	r2, r3, #255
 7752 2f70 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 7753 2f74 C0019FE5 		ldr	r0, .L286
 7754 2f78 0210A0E1 		mov	r1, r2
 7755 2f7c 0320A0E1 		mov	r2, r3
 7756 2f80 FEFFFFEB 		bl	sudoku_actualizar_celda
1519:../button.c   ****             hay_error = 1;
 7757              		.loc 1 1519 0
 7758 2f84 0130A0E3 		mov	r3, #1
 7759 2f88 10300BE5 		str	r3, [fp, #-16]
 7760 2f8c 000000EA 		b	.L275
 7761              	.L284:
1513:../button.c   ****             continue;
 7762              		.loc 1 1513 0
 7763 2f90 0000A0E1 		mov	r0, r0	@ nop
 7764              	.L275:
1510:../button.c   ****     for (k = 0; k < 9; k++)
 7765              		.loc 1 1510 0
 7766 2f94 14301BE5 		ldr	r3, [fp, #-20]
 7767 2f98 013083E2 		add	r3, r3, #1
 7768 2f9c 14300BE5 		str	r3, [fp, #-20]
 7769              	.L273:
1510:../button.c   ****     for (k = 0; k < 9; k++)
 7770              		.loc 1 1510 0 is_stmt 0 discriminator 1
 7771 2fa0 14301BE5 		ldr	r3, [fp, #-20]
 7772 2fa4 080053E3 		cmp	r3, #8
 7773 2fa8 C9FFFFDA 		ble	.L276
1520:../button.c   ****         }
1521:../button.c   ****     }
1522:../button.c   **** 
1523:../button.c   ****     // 3. Comprobar Recuadro 3x3
1524:../button.c   ****     int inicio_f = (f / 3) * 3;
 7774              		.loc 1 1524 0 is_stmt 1
 7775 2fac 25205BE5 		ldrb	r2, [fp, #-37]	@ zero_extendqisi2
 7776 2fb0 88319FE5 		ldr	r3, .L286+4
 7777 2fb4 921383E0 		umull	r1, r3, r2, r3
 7778 2fb8 A330A0E1 		mov	r3, r3, lsr #1
 7779 2fbc FF3003E2 		and	r3, r3, #255
 7780 2fc0 0320A0E1 		mov	r2, r3
 7781 2fc4 0230A0E1 		mov	r3, r2
 7782 2fc8 8330A0E1 		mov	r3, r3, asl #1
 7783 2fcc 023083E0 		add	r3, r3, r2
 7784 2fd0 1C300BE5 		str	r3, [fp, #-28]
1525:../button.c   ****     int inicio_c = (c / 3) * 3;
 7785              		.loc 1 1525 0
 7786 2fd4 26205BE5 		ldrb	r2, [fp, #-38]	@ zero_extendqisi2
 7787 2fd8 60319FE5 		ldr	r3, .L286+4
 7788 2fdc 921383E0 		umull	r1, r3, r2, r3
 7789 2fe0 A330A0E1 		mov	r3, r3, lsr #1
 7790 2fe4 FF3003E2 		and	r3, r3, #255
 7791 2fe8 0320A0E1 		mov	r2, r3
 7792 2fec 0230A0E1 		mov	r3, r2
 7793 2ff0 8330A0E1 		mov	r3, r3, asl #1
 7794 2ff4 023083E0 		add	r3, r3, r2
 7795 2ff8 20300BE5 		str	r3, [fp, #-32]
1526:../button.c   **** 
1527:../button.c   ****     for (k = inicio_f; k < inicio_f + 3; k++)
 7796              		.loc 1 1527 0
 7797 2ffc 1C301BE5 		ldr	r3, [fp, #-28]
 7798 3000 14300BE5 		str	r3, [fp, #-20]
 7799 3004 420000EA 		b	.L277
 7800              	.L282:
1528:../button.c   ****     {
1529:../button.c   ****         for (l = inicio_c; l < inicio_c + 3; l++)
 7801              		.loc 1 1529 0
 7802 3008 20301BE5 		ldr	r3, [fp, #-32]
 7803 300c 18300BE5 		str	r3, [fp, #-24]
 7804 3010 370000EA 		b	.L278
 7805              	.L281:
1530:../button.c   ****         {
1531:../button.c   ****             if (k == f && l == c)
 7806              		.loc 1 1531 0
 7807 3014 25205BE5 		ldrb	r2, [fp, #-37]	@ zero_extendqisi2
 7808 3018 14301BE5 		ldr	r3, [fp, #-20]
 7809 301c 030052E1 		cmp	r2, r3
 7810 3020 0300001A 		bne	.L279
 7811              		.loc 1 1531 0 is_stmt 0 discriminator 1
 7812 3024 26205BE5 		ldrb	r2, [fp, #-38]	@ zero_extendqisi2
 7813 3028 18301BE5 		ldr	r3, [fp, #-24]
 7814 302c 030052E1 		cmp	r2, r3
 7815 3030 2B00000A 		beq	.L285
 7816              	.L279:
1532:../button.c   ****                 continue;
1533:../button.c   **** 
1534:../button.c   ****             if (celda_leer_valor(cuadricula_C_C[k][l]) == valor)
 7817              		.loc 1 1534 0 is_stmt 1
 7818 3034 00219FE5 		ldr	r2, .L286
 7819 3038 14301BE5 		ldr	r3, [fp, #-20]
 7820 303c 0312A0E1 		mov	r1, r3, asl #4
 7821 3040 18301BE5 		ldr	r3, [fp, #-24]
 7822 3044 033081E0 		add	r3, r1, r3
 7823 3048 8330A0E1 		mov	r3, r3, asl #1
 7824 304c 033082E0 		add	r3, r2, r3
 7825 3050 B030D3E1 		ldrh	r3, [r3, #0]
 7826 3054 0300A0E1 		mov	r0, r3
 7827 3058 FEFFFFEB 		bl	celda_leer_valor
 7828 305c 0030A0E1 		mov	r3, r0
 7829 3060 27205BE5 		ldrb	r2, [fp, #-39]	@ zero_extendqisi2
 7830 3064 030052E1 		cmp	r2, r3
 7831 3068 1E00001A 		bne	.L280
1535:../button.c   ****             {
1536:../button.c   ****                 cuadricula_C_C[k][l] |= 0x0020;
 7832              		.loc 1 1536 0
 7833 306c C8209FE5 		ldr	r2, .L286
 7834 3070 14301BE5 		ldr	r3, [fp, #-20]
 7835 3074 0312A0E1 		mov	r1, r3, asl #4
 7836 3078 18301BE5 		ldr	r3, [fp, #-24]
 7837 307c 033081E0 		add	r3, r1, r3
 7838 3080 8330A0E1 		mov	r3, r3, asl #1
 7839 3084 033082E0 		add	r3, r2, r3
 7840 3088 B030D3E1 		ldrh	r3, [r3, #0]
 7841 308c 203083E3 		orr	r3, r3, #32
 7842 3090 0338A0E1 		mov	r3, r3, asl #16
 7843 3094 2328A0E1 		mov	r2, r3, lsr #16
 7844 3098 9C109FE5 		ldr	r1, .L286
 7845 309c 14301BE5 		ldr	r3, [fp, #-20]
 7846 30a0 0302A0E1 		mov	r0, r3, asl #4
 7847 30a4 18301BE5 		ldr	r3, [fp, #-24]
 7848 30a8 033080E0 		add	r3, r0, r3
 7849 30ac 8330A0E1 		mov	r3, r3, asl #1
 7850 30b0 033081E0 		add	r3, r1, r3
 7851 30b4 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1537:../button.c   ****                 sudoku_actualizar_celda(cuadricula_C_C, k, l);
 7852              		.loc 1 1537 0
 7853 30b8 14301BE5 		ldr	r3, [fp, #-20]
 7854 30bc FF2003E2 		and	r2, r3, #255
 7855 30c0 18301BE5 		ldr	r3, [fp, #-24]
 7856 30c4 FF3003E2 		and	r3, r3, #255
 7857 30c8 6C009FE5 		ldr	r0, .L286
 7858 30cc 0210A0E1 		mov	r1, r2
 7859 30d0 0320A0E1 		mov	r2, r3
 7860 30d4 FEFFFFEB 		bl	sudoku_actualizar_celda
1538:../button.c   ****                 hay_error = 1;
 7861              		.loc 1 1538 0
 7862 30d8 0130A0E3 		mov	r3, #1
 7863 30dc 10300BE5 		str	r3, [fp, #-16]
 7864 30e0 000000EA 		b	.L280
 7865              	.L285:
1532:../button.c   ****                 continue;
 7866              		.loc 1 1532 0
 7867 30e4 0000A0E1 		mov	r0, r0	@ nop
 7868              	.L280:
1529:../button.c   ****         for (l = inicio_c; l < inicio_c + 3; l++)
 7869              		.loc 1 1529 0
 7870 30e8 18301BE5 		ldr	r3, [fp, #-24]
 7871 30ec 013083E2 		add	r3, r3, #1
 7872 30f0 18300BE5 		str	r3, [fp, #-24]
 7873              	.L278:
1529:../button.c   ****         for (l = inicio_c; l < inicio_c + 3; l++)
 7874              		.loc 1 1529 0 is_stmt 0 discriminator 1
 7875 30f4 20301BE5 		ldr	r3, [fp, #-32]
 7876 30f8 032083E2 		add	r2, r3, #3
 7877 30fc 18301BE5 		ldr	r3, [fp, #-24]
 7878 3100 030052E1 		cmp	r2, r3
 7879 3104 C2FFFFCA 		bgt	.L281
1527:../button.c   ****     for (k = inicio_f; k < inicio_f + 3; k++)
 7880              		.loc 1 1527 0 is_stmt 1
 7881 3108 14301BE5 		ldr	r3, [fp, #-20]
 7882 310c 013083E2 		add	r3, r3, #1
 7883 3110 14300BE5 		str	r3, [fp, #-20]
 7884              	.L277:
1527:../button.c   ****     for (k = inicio_f; k < inicio_f + 3; k++)
 7885              		.loc 1 1527 0 is_stmt 0 discriminator 1
 7886 3114 1C301BE5 		ldr	r3, [fp, #-28]
 7887 3118 032083E2 		add	r2, r3, #3
 7888 311c 14301BE5 		ldr	r3, [fp, #-20]
 7889 3120 030052E1 		cmp	r2, r3
 7890 3124 B7FFFFCA 		bgt	.L282
1539:../button.c   ****             }
1540:../button.c   ****         }
1541:../button.c   ****     }
1542:../button.c   **** 
1543:../button.c   ****     return hay_error;
 7891              		.loc 1 1543 0 is_stmt 1
 7892 3128 10301BE5 		ldr	r3, [fp, #-16]
1544:../button.c   **** }
 7893              		.loc 1 1544 0
 7894 312c 0300A0E1 		mov	r0, r3
 7895 3130 0CD04BE2 		sub	sp, fp, #12
 7896 3134 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7897 3138 1EFF2FE1 		bx	lr
 7898              	.L287:
 7899              		.align	2
 7900              	.L286:
 7901 313c 00000000 		.word	cuadricula_C_C
 7902 3140 ABAAAAAA 		.word	-1431655765
 7903              		.cfi_endproc
 7904              	.LFE30:
 7906              		.align	2
 7908              	limpiar_errores_visuales:
 7909              	.LFB31:
1545:../button.c   **** 
1546:../button.c   **** /**
1547:../button.c   ****  * Limpia el bit de error de TODAS las celdas del tablero
1548:../button.c   ****  * y las redibuja para restaurar su estado normal.
1549:../button.c   ****  */
1550:../button.c   **** static void limpiar_errores_visuales(void)
1551:../button.c   **** {
 7910              		.loc 1 1551 0
 7911              		.cfi_startproc
 7912              		@ Function supports interworking.
 7913              		@ args = 0, pretend = 0, frame = 8
 7914              		@ frame_needed = 1, uses_anonymous_args = 0
 7915 3144 0DC0A0E1 		mov	ip, sp
 7916              	.LCFI58:
 7917              		.cfi_def_cfa_register 12
 7918 3148 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 7919 314c 04B04CE2 		sub	fp, ip, #4
 7920              		.cfi_offset 14, -8
 7921              		.cfi_offset 13, -12
 7922              		.cfi_offset 11, -16
 7923              	.LCFI59:
 7924              		.cfi_def_cfa 11, 4
 7925 3150 08D04DE2 		sub	sp, sp, #8
1552:../button.c   ****     int i, j;
1553:../button.c   ****     for (i = 0; i < 9; i++)
 7926              		.loc 1 1553 0
 7927 3154 0030A0E3 		mov	r3, #0
 7928 3158 10300BE5 		str	r3, [fp, #-16]
 7929 315c 310000EA 		b	.L289
 7930              	.L293:
1554:../button.c   ****     {
1555:../button.c   ****         for (j = 0; j < 9; j++)
 7931              		.loc 1 1555 0
 7932 3160 0030A0E3 		mov	r3, #0
 7933 3164 14300BE5 		str	r3, [fp, #-20]
 7934 3168 280000EA 		b	.L290
 7935              	.L292:
1556:../button.c   ****         {
1557:../button.c   ****             // Si la celda tiene el bit de error activo (0x20)
1558:../button.c   ****             if (cuadricula_C_C[i][j] & 0x0020)
 7936              		.loc 1 1558 0
 7937 316c CC209FE5 		ldr	r2, .L294
 7938 3170 10301BE5 		ldr	r3, [fp, #-16]
 7939 3174 0312A0E1 		mov	r1, r3, asl #4
 7940 3178 14301BE5 		ldr	r3, [fp, #-20]
 7941 317c 033081E0 		add	r3, r1, r3
 7942 3180 8330A0E1 		mov	r3, r3, asl #1
 7943 3184 033082E0 		add	r3, r2, r3
 7944 3188 B030D3E1 		ldrh	r3, [r3, #0]
 7945 318c 203003E2 		and	r3, r3, #32
 7946 3190 000053E3 		cmp	r3, #0
 7947 3194 1A00000A 		beq	.L291
1559:../button.c   ****             {
1560:../button.c   ****                 cuadricula_C_C[i][j] &= ~0x0020;               // Apagar bit error
 7948              		.loc 1 1560 0
 7949 3198 A0209FE5 		ldr	r2, .L294
 7950 319c 10301BE5 		ldr	r3, [fp, #-16]
 7951 31a0 0312A0E1 		mov	r1, r3, asl #4
 7952 31a4 14301BE5 		ldr	r3, [fp, #-20]
 7953 31a8 033081E0 		add	r3, r1, r3
 7954 31ac 8330A0E1 		mov	r3, r3, asl #1
 7955 31b0 033082E0 		add	r3, r2, r3
 7956 31b4 B030D3E1 		ldrh	r3, [r3, #0]
 7957 31b8 2030C3E3 		bic	r3, r3, #32
 7958 31bc 0338A0E1 		mov	r3, r3, asl #16
 7959 31c0 2328A0E1 		mov	r2, r3, lsr #16
 7960 31c4 74109FE5 		ldr	r1, .L294
 7961 31c8 10301BE5 		ldr	r3, [fp, #-16]
 7962 31cc 0302A0E1 		mov	r0, r3, asl #4
 7963 31d0 14301BE5 		ldr	r3, [fp, #-20]
 7964 31d4 033080E0 		add	r3, r0, r3
 7965 31d8 8330A0E1 		mov	r3, r3, asl #1
 7966 31dc 033081E0 		add	r3, r1, r3
 7967 31e0 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1561:../button.c   ****                 sudoku_actualizar_celda(cuadricula_C_C, i, j); // Repintar normal
 7968              		.loc 1 1561 0
 7969 31e4 10301BE5 		ldr	r3, [fp, #-16]
 7970 31e8 FF2003E2 		and	r2, r3, #255
 7971 31ec 14301BE5 		ldr	r3, [fp, #-20]
 7972 31f0 FF3003E2 		and	r3, r3, #255
 7973 31f4 44009FE5 		ldr	r0, .L294
 7974 31f8 0210A0E1 		mov	r1, r2
 7975 31fc 0320A0E1 		mov	r2, r3
 7976 3200 FEFFFFEB 		bl	sudoku_actualizar_celda
 7977              	.L291:
1555:../button.c   ****         for (j = 0; j < 9; j++)
 7978              		.loc 1 1555 0
 7979 3204 14301BE5 		ldr	r3, [fp, #-20]
 7980 3208 013083E2 		add	r3, r3, #1
 7981 320c 14300BE5 		str	r3, [fp, #-20]
 7982              	.L290:
1555:../button.c   ****         for (j = 0; j < 9; j++)
 7983              		.loc 1 1555 0 is_stmt 0 discriminator 1
 7984 3210 14301BE5 		ldr	r3, [fp, #-20]
 7985 3214 080053E3 		cmp	r3, #8
 7986 3218 D3FFFFDA 		ble	.L292
1553:../button.c   ****     for (i = 0; i < 9; i++)
 7987              		.loc 1 1553 0 is_stmt 1
 7988 321c 10301BE5 		ldr	r3, [fp, #-16]
 7989 3220 013083E2 		add	r3, r3, #1
 7990 3224 10300BE5 		str	r3, [fp, #-16]
 7991              	.L289:
1553:../button.c   ****     for (i = 0; i < 9; i++)
 7992              		.loc 1 1553 0 is_stmt 0 discriminator 1
 7993 3228 10301BE5 		ldr	r3, [fp, #-16]
 7994 322c 080053E3 		cmp	r3, #8
 7995 3230 CAFFFFDA 		ble	.L293
1562:../button.c   ****             }
1563:../button.c   ****         }
1564:../button.c   ****     }
1565:../button.c   **** }
 7996              		.loc 1 1565 0 is_stmt 1
 7997 3234 0CD04BE2 		sub	sp, fp, #12
 7998 3238 00689DE8 		ldmfd	sp, {fp, sp, lr}
 7999 323c 1EFF2FE1 		bx	lr
 8000              	.L295:
 8001              		.align	2
 8002              	.L294:
 8003 3240 00000000 		.word	cuadricula_C_C
 8004              		.cfi_endproc
 8005              	.LFE31:
 8007              		.align	2
 8008              		.global	procesar_touchscreen_sudoku
 8010              	procesar_touchscreen_sudoku:
 8011              	.LFB32:
1566:../button.c   **** 
1567:../button.c   **** /**
1568:../button.c   ****  * Procesa toques del touchscreen en el tablero de Sudoku.
1569:../button.c   ****  * Maneja tres modos:
1570:../button.c   ****  * - Modo 0: Vista normal - hace zoom a región 3x3
1571:../button.c   ****  * - Modo 1: Zoom región - permite seleccionar celda individual o salir
1572:../button.c   ****  * - Modo 2: Zoom candidatos - permite seleccionar número 1-9 o 0 para borrar
1573:../button.c   ****  */
1574:../button.c   **** void procesar_touchscreen_sudoku(void)
1575:../button.c   **** {
 8012              		.loc 1 1575 0
 8013              		.cfi_startproc
 8014              		@ Function supports interworking.
 8015              		@ args = 0, pretend = 0, frame = 112
 8016              		@ frame_needed = 1, uses_anonymous_args = 0
 8017 3244 0DC0A0E1 		mov	ip, sp
 8018              	.LCFI60:
 8019              		.cfi_def_cfa_register 12
 8020 3248 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 8021 324c 04B04CE2 		sub	fp, ip, #4
 8022              		.cfi_offset 14, -8
 8023              		.cfi_offset 13, -12
 8024              		.cfi_offset 11, -16
 8025              	.LCFI61:
 8026              		.cfi_def_cfa 11, 4
 8027 3250 70D04DE2 		sub	sp, sp, #112
1576:../button.c   ****     int x, y;
1577:../button.c   **** 
1578:../button.c   ****     // Solo procesar si hay toque válido
1579:../button.c   ****     if (ts_read_calibrated(&x, &y) == 0)
 8028              		.loc 1 1579 0
 8029 3254 74204BE2 		sub	r2, fp, #116
 8030 3258 78304BE2 		sub	r3, fp, #120
 8031 325c 0200A0E1 		mov	r0, r2
 8032 3260 0310A0E1 		mov	r1, r3
 8033 3264 FEFFFFEB 		bl	ts_read_calibrated
 8034 3268 0030A0E1 		mov	r3, r0
 8035 326c 000053E3 		cmp	r3, #0
 8036 3270 5E02001A 		bne	.L296
 8037              	.LBB13:
1580:../button.c   ****     {
1581:../button.c   ****         // *** DEBUG: Dibujar punto donde se detectó el toque ***
1582:../button.c   ****         ts_draw_touch_point(x, y);
 8038              		.loc 1 1582 0
 8039 3274 74201BE5 		ldr	r2, [fp, #-116]
 8040 3278 78301BE5 		ldr	r3, [fp, #-120]
 8041 327c 0200A0E1 		mov	r0, r2
 8042 3280 0310A0E1 		mov	r1, r3
 8043 3284 FEFFFFEB 		bl	ts_draw_touch_point
1583:../button.c   **** 
1584:../button.c   ****         // CORRECCIÓN: Si es el primer toque y no se ha dibujado el tablero, inicializar
1585:../button.c   ****         if (!tablero_dibujado && estado_juego == ESTADO_INICIAL)
 8044              		.loc 1 1585 0
 8045 3288 6C399FE5 		ldr	r3, .L331
 8046 328c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 8047 3290 000053E3 		cmp	r3, #0
 8048 3294 1D00001A 		bne	.L298
 8049              		.loc 1 1585 0 is_stmt 0 discriminator 1
 8050 3298 60399FE5 		ldr	r3, .L331+4
 8051 329c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 8052 32a0 000053E3 		cmp	r3, #0
 8053 32a4 1900001A 		bne	.L298
1586:../button.c   ****         {
1587:../button.c   ****             // Inicializar juego como se hace en los botones
1588:../button.c   ****             estado_juego = ESTADO_SELEC_FILA;
 8054              		.loc 1 1588 0 is_stmt 1
 8055 32a8 50399FE5 		ldr	r3, .L331+4
 8056 32ac 0120A0E3 		mov	r2, #1
 8057 32b0 0020C3E5 		strb	r2, [r3, #0]
1589:../button.c   ****             fila_seleccionada = 0;
 8058              		.loc 1 1589 0
 8059 32b4 48399FE5 		ldr	r3, .L331+8
 8060 32b8 0020A0E3 		mov	r2, #0
 8061 32bc 0020C3E5 		strb	r2, [r3, #0]
1590:../button.c   ****             columna_seleccionada = 0;
 8062              		.loc 1 1590 0
 8063 32c0 40399FE5 		ldr	r3, .L331+12
 8064 32c4 0020A0E3 		mov	r2, #0
 8065 32c8 0020C3E5 		strb	r2, [r3, #0]
1591:../button.c   ****             tiempo_inicio_partida = timer2_count();
 8066              		.loc 1 1591 0
 8067 32cc FEFFFFEB 		bl	timer2_count
 8068 32d0 0020A0E1 		mov	r2, r0
 8069 32d4 30399FE5 		ldr	r3, .L331+16
 8070 32d8 002083E5 		str	r2, [r3, #0]
1592:../button.c   ****             ultimo_tiempo_mostrado = 0;
 8071              		.loc 1 1592 0
 8072 32dc 2C399FE5 		ldr	r3, .L331+20
 8073 32e0 0020A0E3 		mov	r2, #0
 8074 32e4 002083E5 		str	r2, [r3, #0]
1593:../button.c   **** 
1594:../button.c   ****             // Marcar las pistas antes de actualizar candidatos
1595:../button.c   ****             marcar_pistas_iniciales(cuadricula_C_C);
 8075              		.loc 1 1595 0
 8076 32e8 24099FE5 		ldr	r0, .L331+24
 8077 32ec FEFFFFEB 		bl	marcar_pistas_iniciales
1596:../button.c   ****             candidatos_actualizar_c(cuadricula_C_C);
 8078              		.loc 1 1596 0
 8079 32f0 1C099FE5 		ldr	r0, .L331+24
 8080 32f4 FEFFFFEB 		bl	candidatos_actualizar_c
1597:../button.c   **** 
1598:../button.c   ****             // Dibujar el tablero completo
1599:../button.c   ****             sudoku_dibujar_tablero_completo(cuadricula_C_C);
 8081              		.loc 1 1599 0
 8082 32f8 14099FE5 		ldr	r0, .L331+24
 8083 32fc FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
1600:../button.c   ****             tablero_dibujado = 1;
 8084              		.loc 1 1600 0
 8085 3300 F4389FE5 		ldr	r3, .L331
 8086 3304 0120A0E3 		mov	r2, #1
 8087 3308 0020C3E5 		strb	r2, [r3, #0]
1601:../button.c   **** 
1602:../button.c   ****             // Mostrar tiempo inicial
1603:../button.c   ****             mostrar_tiempo_partida();
 8088              		.loc 1 1603 0
 8089 330c 5CFAFFEB 		bl	mostrar_tiempo_partida
 8090              	.L298:
1604:../button.c   ****         }
1605:../button.c   ****         // MODO 2: Zoom de candidatos (selección de número 1-9 o 0)
1606:../button.c   ****         if (modo_zoom == 2)
 8091              		.loc 1 1606 0
 8092 3310 00399FE5 		ldr	r3, .L331+28
 8093 3314 003093E5 		ldr	r3, [r3, #0]
 8094 3318 020053E3 		cmp	r3, #2
 8095 331c 3E01001A 		bne	.L299
 8096              	.LBB14:
1607:../button.c   ****         {
1608:../button.c   ****             // Verificar primero si toca en la flecha de salida
1609:../button.c   ****             if (x >= FLECHA_X && x <= (FLECHA_X + FLECHA_WIDTH) &&
 8097              		.loc 1 1609 0
 8098 3320 74301BE5 		ldr	r3, [fp, #-116]
 8099 3324 130053E3 		cmp	r3, #19
 8100 3328 0F0000DA 		ble	.L300
 8101              		.loc 1 1609 0 is_stmt 0 discriminator 1
 8102 332c 74301BE5 		ldr	r3, [fp, #-116]
 8103 3330 320053E3 		cmp	r3, #50
 8104 3334 0C0000CA 		bgt	.L300
1610:../button.c   ****                 y >= FLECHA_Y && y <= (FLECHA_Y + FLECHA_HEIGHT))
 8105              		.loc 1 1610 0 is_stmt 1 discriminator 1
 8106 3338 78301BE5 		ldr	r3, [fp, #-120]
1609:../button.c   ****             if (x >= FLECHA_X && x <= (FLECHA_X + FLECHA_WIDTH) &&
 8107              		.loc 1 1609 0 discriminator 1
 8108 333c 310053E3 		cmp	r3, #49
 8109 3340 090000DA 		ble	.L300
 8110              		.loc 1 1610 0
 8111 3344 78301BE5 		ldr	r3, [fp, #-120]
 8112 3348 460053E3 		cmp	r3, #70
 8113 334c 060000CA 		bgt	.L300
1611:../button.c   ****             {
1612:../button.c   ****                 // Volver al zoom de región sin cambios
1613:../button.c   ****                 modo_zoom = 1;
 8114              		.loc 1 1613 0
 8115 3350 C0389FE5 		ldr	r3, .L331+28
 8116 3354 0120A0E3 		mov	r2, #1
 8117 3358 002083E5 		str	r2, [r3, #0]
1614:../button.c   ****                 dibujar_zoom_region();
 8118              		.loc 1 1614 0
 8119 335c 4F0200EB 		bl	dibujar_zoom_region
1615:../button.c   ****                 Delay(200);
 8120              		.loc 1 1615 0
 8121 3360 C800A0E3 		mov	r0, #200
 8122 3364 FEFFFFEB 		bl	Delay
1616:../button.c   ****                 return;
 8123              		.loc 1 1616 0
 8124 3368 200200EA 		b	.L296
 8125              	.L300:
1617:../button.c   ****             }
1618:../button.c   **** 
1619:../button.c   ****             int numero_seleccionado = procesar_toque_candidatos(x, y);
 8126              		.loc 1 1619 0
 8127 336c 74201BE5 		ldr	r2, [fp, #-116]
 8128 3370 78301BE5 		ldr	r3, [fp, #-120]
 8129 3374 0200A0E1 		mov	r0, r2
 8130 3378 0310A0E1 		mov	r1, r3
 8131 337c 190500EB 		bl	procesar_toque_candidatos
 8132 3380 24000BE5 		str	r0, [fp, #-36]
1620:../button.c   **** 
1621:../button.c   ****             if (numero_seleccionado >= 0) // -1 = toque fuera, 0-9 = número válido
 8133              		.loc 1 1621 0
 8134 3384 24301BE5 		ldr	r3, [fp, #-36]
 8135 3388 000053E3 		cmp	r3, #0
 8136 338c 1F0100BA 		blt	.L301
 8137              	.LBB15:
1622:../button.c   ****             {
1623:../button.c   ****                 uint8_t valor_actual = celda_leer_valor(cuadricula_C_C[celda_candidatos_fila][celda
 8138              		.loc 1 1623 0
 8139 3390 84389FE5 		ldr	r3, .L331+32
 8140 3394 001093E5 		ldr	r1, [r3, #0]
 8141 3398 80389FE5 		ldr	r3, .L331+36
 8142 339c 003093E5 		ldr	r3, [r3, #0]
 8143 33a0 6C289FE5 		ldr	r2, .L331+24
 8144 33a4 0112A0E1 		mov	r1, r1, asl #4
 8145 33a8 033081E0 		add	r3, r1, r3
 8146 33ac 8330A0E1 		mov	r3, r3, asl #1
 8147 33b0 033082E0 		add	r3, r2, r3
 8148 33b4 B030D3E1 		ldrh	r3, [r3, #0]
 8149 33b8 0300A0E1 		mov	r0, r3
 8150 33bc FEFFFFEB 		bl	celda_leer_valor
 8151 33c0 0030A0E1 		mov	r3, r0
 8152 33c4 25304BE5 		strb	r3, [fp, #-37]
1624:../button.c   **** 
1625:../button.c   ****                 // Verificar si la selección es válida según la nueva lógica
1626:../button.c   ****                 int seleccion_valida = 0;
 8153              		.loc 1 1626 0
 8154 33c8 0030A0E3 		mov	r3, #0
 8155 33cc 10300BE5 		str	r3, [fp, #-16]
1627:../button.c   ****                 if (numero_seleccionado == 0)
 8156              		.loc 1 1627 0
 8157 33d0 24301BE5 		ldr	r3, [fp, #-36]
 8158 33d4 000053E3 		cmp	r3, #0
 8159 33d8 0500001A 		bne	.L302
1628:../button.c   ****                 {
1629:../button.c   ****                     // 0 solo es válido si hay un valor actual (para borrarlo)
1630:../button.c   ****                     seleccion_valida = (valor_actual != 0);
 8160              		.loc 1 1630 0
 8161 33dc 25305BE5 		ldrb	r3, [fp, #-37]	@ zero_extendqisi2
 8162 33e0 000053E3 		cmp	r3, #0
 8163 33e4 0030A003 		moveq	r3, #0
 8164 33e8 0130A013 		movne	r3, #1
 8165 33ec 10300BE5 		str	r3, [fp, #-16]
 8166 33f0 180000EA 		b	.L303
 8167              	.L302:
1631:../button.c   ****                 }
1632:../button.c   ****                 else
1633:../button.c   ****                 {
1634:../button.c   ****                     // Números 1-9 solo son válidos si no hay valor actual y son candidatos
1635:../button.c   ****                     seleccion_valida = (valor_actual == 0) && es_numero_candidato(cuadricula_C_C[ce
 8168              		.loc 1 1635 0
 8169 33f4 25305BE5 		ldrb	r3, [fp, #-37]	@ zero_extendqisi2
 8170 33f8 000053E3 		cmp	r3, #0
 8171 33fc 1300001A 		bne	.L304
 8172              		.loc 1 1635 0 is_stmt 0 discriminator 1
 8173 3400 14389FE5 		ldr	r3, .L331+32
 8174 3404 001093E5 		ldr	r1, [r3, #0]
 8175 3408 10389FE5 		ldr	r3, .L331+36
 8176 340c 003093E5 		ldr	r3, [r3, #0]
 8177 3410 FC279FE5 		ldr	r2, .L331+24
 8178 3414 0112A0E1 		mov	r1, r1, asl #4
 8179 3418 033081E0 		add	r3, r1, r3
 8180 341c 8330A0E1 		mov	r3, r3, asl #1
 8181 3420 033082E0 		add	r3, r2, r3
 8182 3424 B020D3E1 		ldrh	r2, [r3, #0]
 8183 3428 24301BE5 		ldr	r3, [fp, #-36]
 8184 342c FF3003E2 		and	r3, r3, #255
 8185 3430 0200A0E1 		mov	r0, r2
 8186 3434 0310A0E1 		mov	r1, r3
 8187 3438 580500EB 		bl	es_numero_candidato
 8188 343c 0030A0E1 		mov	r3, r0
 8189 3440 000053E3 		cmp	r3, #0
 8190 3444 0100000A 		beq	.L304
 8191 3448 0130A0E3 		mov	r3, #1
 8192 344c 000000EA 		b	.L305
 8193              	.L304:
 8194              		.loc 1 1635 0 discriminator 2
 8195 3450 0030A0E3 		mov	r3, #0
 8196              	.L305:
 8197              		.loc 1 1635 0 discriminator 3
 8198 3454 10300BE5 		str	r3, [fp, #-16]
 8199              	.L303:
1636:../button.c   ****                 }
1637:../button.c   **** 
1638:../button.c   ****                 if (seleccion_valida)
 8200              		.loc 1 1638 0 is_stmt 1
 8201 3458 10301BE5 		ldr	r3, [fp, #-16]
 8202 345c 000053E3 		cmp	r3, #0
 8203 3460 3900000A 		beq	.L306
1639:../button.c   ****                 {
1640:../button.c   ****                     // Aplicar el cambio al tablero
1641:../button.c   ****                     if (numero_seleccionado == 0)
 8204              		.loc 1 1641 0
 8205 3464 24301BE5 		ldr	r3, [fp, #-36]
 8206 3468 000053E3 		cmp	r3, #0
 8207 346c 1900001A 		bne	.L307
1642:../button.c   ****                     {
1643:../button.c   ****                         // Borrar celda
1644:../button.c   ****                         cuadricula_C_C[celda_candidatos_fila][celda_candidatos_col] &= 0xFF80;
 8208              		.loc 1 1644 0
 8209 3470 A4379FE5 		ldr	r3, .L331+32
 8210 3474 000093E5 		ldr	r0, [r3, #0]
 8211 3478 A0379FE5 		ldr	r3, .L331+36
 8212 347c 003093E5 		ldr	r3, [r3, #0]
 8213 3480 94279FE5 		ldr	r2, .L331+32
 8214 3484 00C092E5 		ldr	ip, [r2, #0]
 8215 3488 90279FE5 		ldr	r2, .L331+36
 8216 348c 002092E5 		ldr	r2, [r2, #0]
 8217 3490 7C179FE5 		ldr	r1, .L331+24
 8218 3494 0CC2A0E1 		mov	ip, ip, asl #4
 8219 3498 02208CE0 		add	r2, ip, r2
 8220 349c 8220A0E1 		mov	r2, r2, asl #1
 8221 34a0 022081E0 		add	r2, r1, r2
 8222 34a4 B020D2E1 		ldrh	r2, [r2, #0]
 8223 34a8 7F20C2E3 		bic	r2, r2, #127
 8224 34ac 0228A0E1 		mov	r2, r2, asl #16
 8225 34b0 2228A0E1 		mov	r2, r2, lsr #16
 8226 34b4 58179FE5 		ldr	r1, .L331+24
 8227 34b8 0002A0E1 		mov	r0, r0, asl #4
 8228 34bc 033080E0 		add	r3, r0, r3
 8229 34c0 8330A0E1 		mov	r3, r3, asl #1
 8230 34c4 033081E0 		add	r3, r1, r3
 8231 34c8 B020C3E1 		strh	r2, [r3, #0]	@ movhi
1645:../button.c   ****                         candidatos_actualizar_c(cuadricula_C_C);
 8232              		.loc 1 1645 0
 8233 34cc 40079FE5 		ldr	r0, .L331+24
 8234 34d0 FEFFFFEB 		bl	candidatos_actualizar_c
 8235 34d4 170000EA 		b	.L308
 8236              	.L307:
1646:../button.c   ****                     }
1647:../button.c   ****                     else
1648:../button.c   ****                     {
1649:../button.c   ****                         // Poner nuevo valor
1650:../button.c   ****                         celda_poner_valor(&cuadricula_C_C[celda_candidatos_fila][celda_candidatos_c
 8237              		.loc 1 1650 0
 8238 34d8 34279FE5 		ldr	r2, .L331+24
 8239 34dc 38379FE5 		ldr	r3, .L331+32
 8240 34e0 003093E5 		ldr	r3, [r3, #0]
 8241 34e4 0312A0E1 		mov	r1, r3, asl #4
 8242 34e8 30379FE5 		ldr	r3, .L331+36
 8243 34ec 003093E5 		ldr	r3, [r3, #0]
 8244 34f0 033081E0 		add	r3, r1, r3
 8245 34f4 8330A0E1 		mov	r3, r3, asl #1
 8246 34f8 032082E0 		add	r2, r2, r3
 8247 34fc 24301BE5 		ldr	r3, [fp, #-36]
 8248 3500 FF3003E2 		and	r3, r3, #255
 8249 3504 0200A0E1 		mov	r0, r2
 8250 3508 0310A0E1 		mov	r1, r3
 8251 350c BBF2FFEB 		bl	celda_poner_valor
1651:../button.c   ****                         candidatos_propagar_c(cuadricula_C_C, celda_candidatos_fila, celda_candidat
 8252              		.loc 1 1651 0
 8253 3510 04379FE5 		ldr	r3, .L331+32
 8254 3514 003093E5 		ldr	r3, [r3, #0]
 8255 3518 FF2003E2 		and	r2, r3, #255
 8256 351c FC369FE5 		ldr	r3, .L331+36
 8257 3520 003093E5 		ldr	r3, [r3, #0]
 8258 3524 FF3003E2 		and	r3, r3, #255
 8259 3528 E4069FE5 		ldr	r0, .L331+24
 8260 352c 0210A0E1 		mov	r1, r2
 8261 3530 0320A0E1 		mov	r2, r3
 8262 3534 FEFFFFEB 		bl	candidatos_propagar_c
 8263              	.L308:
1652:../button.c   ****                     }
1653:../button.c   **** 
1654:../button.c   ****                     // Volver al zoom de región
1655:../button.c   ****                     modo_zoom = 1;
 8264              		.loc 1 1655 0
 8265 3538 D8369FE5 		ldr	r3, .L331+28
 8266 353c 0120A0E3 		mov	r2, #1
 8267 3540 002083E5 		str	r2, [r3, #0]
1656:../button.c   ****                     dibujar_zoom_region();
 8268              		.loc 1 1656 0
 8269 3544 D50100EB 		bl	dibujar_zoom_region
 8270 3548 B00000EA 		b	.L301
 8271              	.L306:
 8272              	.LBB16:
1657:../button.c   ****                 }
1658:../button.c   ****                 else
1659:../button.c   ****                 {
1660:../button.c   ****                     // Número no válido - buscar y resaltar el número conflictivo como con los b
1661:../button.c   **** 
1662:../button.c   ****                     // Buscar en la misma fila el número conflictivo
1663:../button.c   ****                     uint8_t numero_conflicto = numero_seleccionado;
 8273              		.loc 1 1663 0
 8274 354c 24301BE5 		ldr	r3, [fp, #-36]
 8275 3550 26304BE5 		strb	r3, [fp, #-38]
1664:../button.c   ****                     int col_conflicto = -1, fila_conflicto = -1;
 8276              		.loc 1 1664 0
 8277 3554 0030E0E3 		mvn	r3, #0
 8278 3558 14300BE5 		str	r3, [fp, #-20]
 8279 355c 0030E0E3 		mvn	r3, #0
 8280 3560 18300BE5 		str	r3, [fp, #-24]
1665:../button.c   **** 
1666:../button.c   ****                     // Buscar en la fila
1667:../button.c   ****                     int c, f; // Variables de iteración
1668:../button.c   ****                     for (c = 0; c < 9; c++)
 8281              		.loc 1 1668 0
 8282 3564 0030A0E3 		mov	r3, #0
 8283 3568 1C300BE5 		str	r3, [fp, #-28]
 8284 356c 190000EA 		b	.L309
 8285              	.L312:
 8286              	.LBB17:
1669:../button.c   ****                     {
1670:../button.c   ****                         uint8_t valor = celda_leer_valor(cuadricula_C_C[celda_candidatos_fila][c]);
 8287              		.loc 1 1670 0
 8288 3570 A4369FE5 		ldr	r3, .L331+32
 8289 3574 003093E5 		ldr	r3, [r3, #0]
 8290 3578 94269FE5 		ldr	r2, .L331+24
 8291 357c 0312A0E1 		mov	r1, r3, asl #4
 8292 3580 1C301BE5 		ldr	r3, [fp, #-28]
 8293 3584 033081E0 		add	r3, r1, r3
 8294 3588 8330A0E1 		mov	r3, r3, asl #1
 8295 358c 033082E0 		add	r3, r2, r3
 8296 3590 B030D3E1 		ldrh	r3, [r3, #0]
 8297 3594 0300A0E1 		mov	r0, r3
 8298 3598 FEFFFFEB 		bl	celda_leer_valor
 8299 359c 0030A0E1 		mov	r3, r0
 8300 35a0 27304BE5 		strb	r3, [fp, #-39]
1671:../button.c   ****                         if (valor == numero_conflicto)
 8301              		.loc 1 1671 0
 8302 35a4 27205BE5 		ldrb	r2, [fp, #-39]	@ zero_extendqisi2
 8303 35a8 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 8304 35ac 030052E1 		cmp	r2, r3
 8305 35b0 0500001A 		bne	.L310
1672:../button.c   ****                         {
1673:../button.c   ****                             fila_conflicto = celda_candidatos_fila;
 8306              		.loc 1 1673 0
 8307 35b4 60369FE5 		ldr	r3, .L331+32
 8308 35b8 003093E5 		ldr	r3, [r3, #0]
 8309 35bc 18300BE5 		str	r3, [fp, #-24]
1674:../button.c   ****                             col_conflicto = c;
 8310              		.loc 1 1674 0
 8311 35c0 1C301BE5 		ldr	r3, [fp, #-28]
 8312 35c4 14300BE5 		str	r3, [fp, #-20]
1675:../button.c   ****                             break;
 8313              		.loc 1 1675 0
 8314 35c8 050000EA 		b	.L311
 8315              	.L310:
 8316              	.LBE17:
1668:../button.c   ****                     for (c = 0; c < 9; c++)
 8317              		.loc 1 1668 0
 8318 35cc 1C301BE5 		ldr	r3, [fp, #-28]
 8319 35d0 013083E2 		add	r3, r3, #1
 8320 35d4 1C300BE5 		str	r3, [fp, #-28]
 8321              	.L309:
1668:../button.c   ****                     for (c = 0; c < 9; c++)
 8322              		.loc 1 1668 0 is_stmt 0 discriminator 1
 8323 35d8 1C301BE5 		ldr	r3, [fp, #-28]
 8324 35dc 080053E3 		cmp	r3, #8
 8325 35e0 E2FFFFDA 		ble	.L312
 8326              	.L311:
1676:../button.c   ****                         }
1677:../button.c   ****                     }
1678:../button.c   **** 
1679:../button.c   ****                     // Si no se encontró en la fila, buscar en la columna
1680:../button.c   ****                     if (col_conflicto == -1)
 8327              		.loc 1 1680 0 is_stmt 1
 8328 35e4 14301BE5 		ldr	r3, [fp, #-20]
 8329 35e8 010073E3 		cmn	r3, #1
 8330 35ec 1F00001A 		bne	.L313
1681:../button.c   ****                     {
1682:../button.c   ****                         for (f = 0; f < 9; f++)
 8331              		.loc 1 1682 0
 8332 35f0 0030A0E3 		mov	r3, #0
 8333 35f4 20300BE5 		str	r3, [fp, #-32]
 8334 35f8 190000EA 		b	.L314
 8335              	.L316:
 8336              	.LBB18:
1683:../button.c   ****                         {
1684:../button.c   ****                             uint8_t valor = celda_leer_valor(cuadricula_C_C[f][celda_candidatos_col
 8337              		.loc 1 1684 0
 8338 35fc 1C369FE5 		ldr	r3, .L331+36
 8339 3600 003093E5 		ldr	r3, [r3, #0]
 8340 3604 08269FE5 		ldr	r2, .L331+24
 8341 3608 20101BE5 		ldr	r1, [fp, #-32]
 8342 360c 0112A0E1 		mov	r1, r1, asl #4
 8343 3610 033081E0 		add	r3, r1, r3
 8344 3614 8330A0E1 		mov	r3, r3, asl #1
 8345 3618 033082E0 		add	r3, r2, r3
 8346 361c B030D3E1 		ldrh	r3, [r3, #0]
 8347 3620 0300A0E1 		mov	r0, r3
 8348 3624 FEFFFFEB 		bl	celda_leer_valor
 8349 3628 0030A0E1 		mov	r3, r0
 8350 362c 28304BE5 		strb	r3, [fp, #-40]
1685:../button.c   ****                             if (valor == numero_conflicto)
 8351              		.loc 1 1685 0
 8352 3630 28205BE5 		ldrb	r2, [fp, #-40]	@ zero_extendqisi2
 8353 3634 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 8354 3638 030052E1 		cmp	r2, r3
 8355 363c 0500001A 		bne	.L315
1686:../button.c   ****                             {
1687:../button.c   ****                                 fila_conflicto = f;
 8356              		.loc 1 1687 0
 8357 3640 20301BE5 		ldr	r3, [fp, #-32]
 8358 3644 18300BE5 		str	r3, [fp, #-24]
1688:../button.c   ****                                 col_conflicto = celda_candidatos_col;
 8359              		.loc 1 1688 0
 8360 3648 D0359FE5 		ldr	r3, .L331+36
 8361 364c 003093E5 		ldr	r3, [r3, #0]
 8362 3650 14300BE5 		str	r3, [fp, #-20]
1689:../button.c   ****                                 break;
 8363              		.loc 1 1689 0
 8364 3654 050000EA 		b	.L313
 8365              	.L315:
 8366              	.LBE18:
1682:../button.c   ****                         for (f = 0; f < 9; f++)
 8367              		.loc 1 1682 0
 8368 3658 20301BE5 		ldr	r3, [fp, #-32]
 8369 365c 013083E2 		add	r3, r3, #1
 8370 3660 20300BE5 		str	r3, [fp, #-32]
 8371              	.L314:
1682:../button.c   ****                         for (f = 0; f < 9; f++)
 8372              		.loc 1 1682 0 is_stmt 0 discriminator 1
 8373 3664 20301BE5 		ldr	r3, [fp, #-32]
 8374 3668 080053E3 		cmp	r3, #8
 8375 366c E2FFFFDA 		ble	.L316
 8376              	.L313:
1690:../button.c   ****                             }
1691:../button.c   ****                         }
1692:../button.c   ****                     }
1693:../button.c   **** 
1694:../button.c   ****                     // Si no se encontró en fila/columna, buscar en la región 3x3
1695:../button.c   ****                     if (col_conflicto == -1)
 8377              		.loc 1 1695 0 is_stmt 1
 8378 3670 14301BE5 		ldr	r3, [fp, #-20]
 8379 3674 010073E3 		cmn	r3, #1
 8380 3678 4100001A 		bne	.L317
 8381              	.LBB19:
1696:../button.c   ****                     {
1697:../button.c   ****                         int region_fila = (celda_candidatos_fila / 3) * 3;
 8382              		.loc 1 1697 0
 8383 367c 98359FE5 		ldr	r3, .L331+32
 8384 3680 003093E5 		ldr	r3, [r3, #0]
 8385 3684 98259FE5 		ldr	r2, .L331+40
 8386 3688 9312C2E0 		smull	r1, r2, r3, r2
 8387 368c C33FA0E1 		mov	r3, r3, asr #31
 8388 3690 022063E0 		rsb	r2, r3, r2
 8389 3694 0230A0E1 		mov	r3, r2
 8390 3698 8330A0E1 		mov	r3, r3, asl #1
 8391 369c 023083E0 		add	r3, r3, r2
 8392 36a0 2C300BE5 		str	r3, [fp, #-44]
1698:../button.c   ****                         int region_col = (celda_candidatos_col / 3) * 3;
 8393              		.loc 1 1698 0
 8394 36a4 74359FE5 		ldr	r3, .L331+36
 8395 36a8 003093E5 		ldr	r3, [r3, #0]
 8396 36ac 70259FE5 		ldr	r2, .L331+40
 8397 36b0 9312C2E0 		smull	r1, r2, r3, r2
 8398 36b4 C33FA0E1 		mov	r3, r3, asr #31
 8399 36b8 022063E0 		rsb	r2, r3, r2
 8400 36bc 0230A0E1 		mov	r3, r2
 8401 36c0 8330A0E1 		mov	r3, r3, asl #1
 8402 36c4 023083E0 		add	r3, r3, r2
 8403 36c8 30300BE5 		str	r3, [fp, #-48]
1699:../button.c   **** 
1700:../button.c   ****                         for (f = region_fila; f < region_fila + 3 && col_conflicto == -1; f++)
 8404              		.loc 1 1700 0
 8405 36cc 2C301BE5 		ldr	r3, [fp, #-44]
 8406 36d0 20300BE5 		str	r3, [fp, #-32]
 8407 36d4 220000EA 		b	.L318
 8408              	.L323:
1701:../button.c   ****                         {
1702:../button.c   ****                             for (c = region_col; c < region_col + 3; c++)
 8409              		.loc 1 1702 0
 8410 36d8 30301BE5 		ldr	r3, [fp, #-48]
 8411 36dc 1C300BE5 		str	r3, [fp, #-28]
 8412 36e0 170000EA 		b	.L319
 8413              	.L322:
 8414              	.LBB20:
1703:../button.c   ****                             {
1704:../button.c   ****                                 uint8_t valor = celda_leer_valor(cuadricula_C_C[f][c]);
 8415              		.loc 1 1704 0
 8416 36e4 28259FE5 		ldr	r2, .L331+24
 8417 36e8 20301BE5 		ldr	r3, [fp, #-32]
 8418 36ec 0312A0E1 		mov	r1, r3, asl #4
 8419 36f0 1C301BE5 		ldr	r3, [fp, #-28]
 8420 36f4 033081E0 		add	r3, r1, r3
 8421 36f8 8330A0E1 		mov	r3, r3, asl #1
 8422 36fc 033082E0 		add	r3, r2, r3
 8423 3700 B030D3E1 		ldrh	r3, [r3, #0]
 8424 3704 0300A0E1 		mov	r0, r3
 8425 3708 FEFFFFEB 		bl	celda_leer_valor
 8426 370c 0030A0E1 		mov	r3, r0
 8427 3710 31304BE5 		strb	r3, [fp, #-49]
1705:../button.c   ****                                 if (valor == numero_conflicto)
 8428              		.loc 1 1705 0
 8429 3714 31205BE5 		ldrb	r2, [fp, #-49]	@ zero_extendqisi2
 8430 3718 26305BE5 		ldrb	r3, [fp, #-38]	@ zero_extendqisi2
 8431 371c 030052E1 		cmp	r2, r3
 8432 3720 0400001A 		bne	.L320
1706:../button.c   ****                                 {
1707:../button.c   ****                                     fila_conflicto = f;
 8433              		.loc 1 1707 0
 8434 3724 20301BE5 		ldr	r3, [fp, #-32]
 8435 3728 18300BE5 		str	r3, [fp, #-24]
1708:../button.c   ****                                     col_conflicto = c;
 8436              		.loc 1 1708 0
 8437 372c 1C301BE5 		ldr	r3, [fp, #-28]
 8438 3730 14300BE5 		str	r3, [fp, #-20]
1709:../button.c   ****                                     break;
 8439              		.loc 1 1709 0
 8440 3734 070000EA 		b	.L321
 8441              	.L320:
 8442              	.LBE20:
1702:../button.c   ****                             for (c = region_col; c < region_col + 3; c++)
 8443              		.loc 1 1702 0
 8444 3738 1C301BE5 		ldr	r3, [fp, #-28]
 8445 373c 013083E2 		add	r3, r3, #1
 8446 3740 1C300BE5 		str	r3, [fp, #-28]
 8447              	.L319:
1702:../button.c   ****                             for (c = region_col; c < region_col + 3; c++)
 8448              		.loc 1 1702 0 is_stmt 0 discriminator 1
 8449 3744 30301BE5 		ldr	r3, [fp, #-48]
 8450 3748 032083E2 		add	r2, r3, #3
 8451 374c 1C301BE5 		ldr	r3, [fp, #-28]
 8452 3750 030052E1 		cmp	r2, r3
 8453 3754 E2FFFFCA 		bgt	.L322
 8454              	.L321:
1700:../button.c   ****                         for (f = region_fila; f < region_fila + 3 && col_conflicto == -1; f++)
 8455              		.loc 1 1700 0 is_stmt 1
 8456 3758 20301BE5 		ldr	r3, [fp, #-32]
 8457 375c 013083E2 		add	r3, r3, #1
 8458 3760 20300BE5 		str	r3, [fp, #-32]
 8459              	.L318:
1700:../button.c   ****                         for (f = region_fila; f < region_fila + 3 && col_conflicto == -1; f++)
 8460              		.loc 1 1700 0 is_stmt 0 discriminator 1
 8461 3764 2C301BE5 		ldr	r3, [fp, #-44]
 8462 3768 032083E2 		add	r2, r3, #3
 8463 376c 20301BE5 		ldr	r3, [fp, #-32]
 8464 3770 030052E1 		cmp	r2, r3
 8465 3774 020000DA 		ble	.L317
1700:../button.c   ****                         for (f = region_fila; f < region_fila + 3 && col_conflicto == -1; f++)
 8466              		.loc 1 1700 0 discriminator 2
 8467 3778 14301BE5 		ldr	r3, [fp, #-20]
 8468 377c 010073E3 		cmn	r3, #1
 8469 3780 D4FFFF0A 		beq	.L323
 8470              	.L317:
 8471              	.LBE19:
1710:../button.c   ****                                 }
1711:../button.c   ****                             }
1712:../button.c   ****                         }
1713:../button.c   ****                     }
1714:../button.c   **** 
1715:../button.c   ****                     // Volver a vista normal y resaltar el número conflictivo
1716:../button.c   ****                     modo_zoom = 0;
 8472              		.loc 1 1716 0 is_stmt 1
 8473 3784 8C349FE5 		ldr	r3, .L331+28
 8474 3788 0020A0E3 		mov	r2, #0
 8475 378c 002083E5 		str	r2, [r3, #0]
1717:../button.c   ****                     Lcd_Clr();
 8476              		.loc 1 1717 0
 8477 3790 FEFFFFEB 		bl	Lcd_Clr
1718:../button.c   ****                     sudoku_dibujar_marco_tablero();
 8478              		.loc 1 1718 0
 8479 3794 FEFFFFEB 		bl	sudoku_dibujar_marco_tablero
1719:../button.c   ****                     sudoku_dibujar_tablero_completo(cuadricula_C_C);
 8480              		.loc 1 1719 0
 8481 3798 74049FE5 		ldr	r0, .L331+24
 8482 379c FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
1720:../button.c   **** 
1721:../button.c   ****                     if (col_conflicto != -1)
 8483              		.loc 1 1721 0
 8484 37a0 14301BE5 		ldr	r3, [fp, #-20]
 8485 37a4 010073E3 		cmn	r3, #1
 8486 37a8 0700000A 		beq	.L324
1722:../button.c   ****                     {
1723:../button.c   ****                         // Resaltar la celda que causa el conflicto
1724:../button.c   ****                         sudoku_resaltar_celda(fila_conflicto, col_conflicto, 1);
 8487              		.loc 1 1724 0
 8488 37ac 18301BE5 		ldr	r3, [fp, #-24]
 8489 37b0 FF2003E2 		and	r2, r3, #255
 8490 37b4 14301BE5 		ldr	r3, [fp, #-20]
 8491 37b8 FF3003E2 		and	r3, r3, #255
 8492 37bc 0200A0E1 		mov	r0, r2
 8493 37c0 0310A0E1 		mov	r1, r3
 8494 37c4 0120A0E3 		mov	r2, #1
 8495 37c8 FEFFFFEB 		bl	sudoku_resaltar_celda
 8496              	.L324:
1725:../button.c   ****                     }
1726:../button.c   **** 
1727:../button.c   ****                     Lcd_Dma_Trans();
 8497              		.loc 1 1727 0
 8498 37cc FEFFFFEB 		bl	Lcd_Dma_Trans
1728:../button.c   **** 
1729:../button.c   ****                     // Mostrar error en LED por 1 segundo
1730:../button.c   ****                     D8Led_symbol(E);
 8499              		.loc 1 1730 0
 8500 37d0 8F00E0E3 		mvn	r0, #143
 8501 37d4 FEFFFFEB 		bl	D8Led_symbol
1731:../button.c   ****                     Delay(1000);
 8502              		.loc 1 1731 0
 8503 37d8 FA0FA0E3 		mov	r0, #1000
 8504 37dc FEFFFFEB 		bl	Delay
1732:../button.c   **** 
1733:../button.c   ****                     if (col_conflicto != -1)
 8505              		.loc 1 1733 0
 8506 37e0 14301BE5 		ldr	r3, [fp, #-20]
 8507 37e4 010073E3 		cmn	r3, #1
 8508 37e8 0800000A 		beq	.L301
1734:../button.c   ****                     {
1735:../button.c   ****                         // Quitar resaltado
1736:../button.c   ****                         sudoku_resaltar_celda(fila_conflicto, col_conflicto, 0);
 8509              		.loc 1 1736 0
 8510 37ec 18301BE5 		ldr	r3, [fp, #-24]
 8511 37f0 FF2003E2 		and	r2, r3, #255
 8512 37f4 14301BE5 		ldr	r3, [fp, #-20]
 8513 37f8 FF3003E2 		and	r3, r3, #255
 8514 37fc 0200A0E1 		mov	r0, r2
 8515 3800 0310A0E1 		mov	r1, r3
 8516 3804 0020A0E3 		mov	r2, #0
 8517 3808 FEFFFFEB 		bl	sudoku_resaltar_celda
1737:../button.c   ****                         Lcd_Dma_Trans();
 8518              		.loc 1 1737 0
 8519 380c FEFFFFEB 		bl	Lcd_Dma_Trans
 8520              	.L301:
 8521              	.LBE16:
 8522              	.LBE15:
1738:../button.c   ****                     }
1739:../button.c   **** 
1740:../button.c   ****                     // No volver al zoom - quedarse en vista normal como con los botones
1741:../button.c   ****                 }
1742:../button.c   ****             }
1743:../button.c   **** 
1744:../button.c   ****             Delay(200); // Delay para evitar múltiples detecciones
 8523              		.loc 1 1744 0
 8524 3810 C800A0E3 		mov	r0, #200
 8525 3814 FEFFFFEB 		bl	Delay
1745:../button.c   ****             return;
 8526              		.loc 1 1745 0
 8527 3818 F40000EA 		b	.L296
 8528              	.L299:
 8529              	.LBE14:
1746:../button.c   ****         }
1747:../button.c   **** 
1748:../button.c   ****         // MODO 1: Zoom de región 3x3
1749:../button.c   ****         if (modo_zoom == 1)
 8530              		.loc 1 1749 0
 8531 381c F4339FE5 		ldr	r3, .L331+28
 8532 3820 003093E5 		ldr	r3, [r3, #0]
 8533 3824 010053E3 		cmp	r3, #1
 8534 3828 B200001A 		bne	.L325
 8535              	.LBB21:
1750:../button.c   ****         {
1751:../button.c   ****             // Verificar primero si toca en la flecha de salida
1752:../button.c   ****             if (x >= FLECHA_X && x <= (FLECHA_X + FLECHA_WIDTH) &&
 8536              		.loc 1 1752 0
 8537 382c 74301BE5 		ldr	r3, [fp, #-116]
 8538 3830 130053E3 		cmp	r3, #19
 8539 3834 130000DA 		ble	.L326
 8540              		.loc 1 1752 0 is_stmt 0 discriminator 1
 8541 3838 74301BE5 		ldr	r3, [fp, #-116]
 8542 383c 320053E3 		cmp	r3, #50
 8543 3840 100000CA 		bgt	.L326
1753:../button.c   ****                 y >= FLECHA_Y && y <= (FLECHA_Y + FLECHA_HEIGHT))
 8544              		.loc 1 1753 0 is_stmt 1 discriminator 1
 8545 3844 78301BE5 		ldr	r3, [fp, #-120]
1752:../button.c   ****             if (x >= FLECHA_X && x <= (FLECHA_X + FLECHA_WIDTH) &&
 8546              		.loc 1 1752 0 discriminator 1
 8547 3848 310053E3 		cmp	r3, #49
 8548 384c 0D0000DA 		ble	.L326
 8549              		.loc 1 1753 0
 8550 3850 78301BE5 		ldr	r3, [fp, #-120]
 8551 3854 460053E3 		cmp	r3, #70
 8552 3858 0A0000CA 		bgt	.L326
1754:../button.c   ****             {
1755:../button.c   ****                 // Salir del zoom - volver a vista normal
1756:../button.c   ****                 modo_zoom = 0;
 8553              		.loc 1 1756 0
 8554 385c B4339FE5 		ldr	r3, .L331+28
 8555 3860 0020A0E3 		mov	r2, #0
 8556 3864 002083E5 		str	r2, [r3, #0]
1757:../button.c   **** 
1758:../button.c   ****                 // Redibujar tablero completo
1759:../button.c   ****                 Lcd_Clr();
 8557              		.loc 1 1759 0
 8558 3868 FEFFFFEB 		bl	Lcd_Clr
1760:../button.c   ****                 sudoku_dibujar_marco_tablero();
 8559              		.loc 1 1760 0
 8560 386c FEFFFFEB 		bl	sudoku_dibujar_marco_tablero
1761:../button.c   ****                 sudoku_dibujar_tablero_completo(cuadricula_C_C);
 8561              		.loc 1 1761 0
 8562 3870 9C039FE5 		ldr	r0, .L331+24
 8563 3874 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
1762:../button.c   ****                 Lcd_Dma_Trans();
 8564              		.loc 1 1762 0
 8565 3878 FEFFFFEB 		bl	Lcd_Dma_Trans
1763:../button.c   **** 
1764:../button.c   ****                 Delay(200);
 8566              		.loc 1 1764 0
 8567 387c C800A0E3 		mov	r0, #200
 8568 3880 FEFFFFEB 		bl	Delay
1765:../button.c   ****                 return;
 8569              		.loc 1 1765 0
 8570 3884 D90000EA 		b	.L296
 8571              	.L326:
1766:../button.c   ****             }
1767:../button.c   **** 
1768:../button.c   ****             // Calcular límites de la región zoom en pantalla
1769:../button.c   ****             int zoom_x_min = ZOOM_X_INI;
 8572              		.loc 1 1769 0
 8573 3888 5030A0E3 		mov	r3, #80
 8574 388c 38300BE5 		str	r3, [fp, #-56]
1770:../button.c   ****             int zoom_x_max = ZOOM_X_INI + (3 * ZOOM_CELDA_SIZE);
 8575              		.loc 1 1770 0
 8576 3890 413FA0E3 		mov	r3, #260
 8577 3894 3C300BE5 		str	r3, [fp, #-60]
1771:../button.c   ****             int zoom_y_min = ZOOM_Y_INI;
 8578              		.loc 1 1771 0
 8579 3898 2830A0E3 		mov	r3, #40
 8580 389c 40300BE5 		str	r3, [fp, #-64]
1772:../button.c   ****             int zoom_y_max = ZOOM_Y_INI + (3 * ZOOM_CELDA_SIZE);
 8581              		.loc 1 1772 0
 8582 38a0 DC30A0E3 		mov	r3, #220
 8583 38a4 44300BE5 		str	r3, [fp, #-68]
1773:../button.c   **** 
1774:../button.c   ****             // Si toca dentro de la región zoom, calcular qué celda específica
1775:../button.c   ****             if (x >= zoom_x_min && x <= zoom_x_max && y >= zoom_y_min && y <= zoom_y_max)
 8584              		.loc 1 1775 0
 8585 38a8 74201BE5 		ldr	r2, [fp, #-116]
 8586 38ac 38301BE5 		ldr	r3, [fp, #-56]
 8587 38b0 030052E1 		cmp	r2, r3
 8588 38b4 8C0000BA 		blt	.L327
 8589              		.loc 1 1775 0 is_stmt 0 discriminator 1
 8590 38b8 74201BE5 		ldr	r2, [fp, #-116]
 8591 38bc 3C301BE5 		ldr	r3, [fp, #-60]
 8592 38c0 030052E1 		cmp	r2, r3
 8593 38c4 880000CA 		bgt	.L327
 8594 38c8 78201BE5 		ldr	r2, [fp, #-120]
 8595 38cc 40301BE5 		ldr	r3, [fp, #-64]
 8596 38d0 030052E1 		cmp	r2, r3
 8597 38d4 840000BA 		blt	.L327
 8598 38d8 78201BE5 		ldr	r2, [fp, #-120]
 8599 38dc 44301BE5 		ldr	r3, [fp, #-68]
 8600 38e0 030052E1 		cmp	r2, r3
 8601 38e4 800000CA 		bgt	.L327
 8602              	.LBB22:
1776:../button.c   ****             {
1777:../button.c   ****                 int col_rel = (x - zoom_x_min) / ZOOM_CELDA_SIZE;  // 0, 1, 2
 8603              		.loc 1 1777 0 is_stmt 1
 8604 38e8 74201BE5 		ldr	r2, [fp, #-116]
 8605 38ec 38301BE5 		ldr	r3, [fp, #-56]
 8606 38f0 023063E0 		rsb	r3, r3, r2
 8607 38f4 2C239FE5 		ldr	r2, .L331+44
 8608 38f8 9312C2E0 		smull	r1, r2, r3, r2
 8609 38fc 032082E0 		add	r2, r2, r3
 8610 3900 C222A0E1 		mov	r2, r2, asr #5
 8611 3904 C33FA0E1 		mov	r3, r3, asr #31
 8612 3908 023063E0 		rsb	r3, r3, r2
 8613 390c 48300BE5 		str	r3, [fp, #-72]
1778:../button.c   ****                 int fila_rel = (y - zoom_y_min) / ZOOM_CELDA_SIZE; // 0, 1, 2
 8614              		.loc 1 1778 0
 8615 3910 78201BE5 		ldr	r2, [fp, #-120]
 8616 3914 40301BE5 		ldr	r3, [fp, #-64]
 8617 3918 023063E0 		rsb	r3, r3, r2
 8618 391c 04239FE5 		ldr	r2, .L331+44
 8619 3920 9312C2E0 		smull	r1, r2, r3, r2
 8620 3924 032082E0 		add	r2, r2, r3
 8621 3928 C222A0E1 		mov	r2, r2, asr #5
 8622 392c C33FA0E1 		mov	r3, r3, asr #31
 8623 3930 023063E0 		rsb	r3, r3, r2
 8624 3934 4C300BE5 		str	r3, [fp, #-76]
1779:../button.c   ****                 int fila_abs = region_zoom_fila + fila_rel;
 8625              		.loc 1 1779 0
 8626 3938 EC329FE5 		ldr	r3, .L331+48
 8627 393c 002093E5 		ldr	r2, [r3, #0]
 8628 3940 4C301BE5 		ldr	r3, [fp, #-76]
 8629 3944 033082E0 		add	r3, r2, r3
 8630 3948 50300BE5 		str	r3, [fp, #-80]
1780:../button.c   ****                 int col_abs = region_zoom_col + col_rel;
 8631              		.loc 1 1780 0
 8632 394c DC329FE5 		ldr	r3, .L331+52
 8633 3950 002093E5 		ldr	r2, [r3, #0]
 8634 3954 48301BE5 		ldr	r3, [fp, #-72]
 8635 3958 033082E0 		add	r3, r2, r3
 8636 395c 54300BE5 		str	r3, [fp, #-84]
1781:../button.c   **** 
1782:../button.c   ****                 // Verificar si es una pista (no se puede modificar)
1783:../button.c   ****                 if (!es_celda_pista(fila_abs, col_abs))
 8637              		.loc 1 1783 0
 8638 3960 50301BE5 		ldr	r3, [fp, #-80]
 8639 3964 FF2003E2 		and	r2, r3, #255
 8640 3968 54301BE5 		ldr	r3, [fp, #-84]
 8641 396c FF3003E2 		and	r3, r3, #255
 8642 3970 0200A0E1 		mov	r0, r2
 8643 3974 0310A0E1 		mov	r1, r3
 8644 3978 AE0000EB 		bl	es_celda_pista
 8645 397c 0030A0E1 		mov	r3, r0
 8646 3980 000053E3 		cmp	r3, #0
 8647 3984 3D00001A 		bne	.L328
 8648              	.LBB23:
1784:../button.c   ****                 {
1785:../button.c   ****                     uint8_t valor_actual = celda_leer_valor(cuadricula_C_C[fila_abs][col_abs]);
 8649              		.loc 1 1785 0
 8650 3988 84229FE5 		ldr	r2, .L331+24
 8651 398c 50301BE5 		ldr	r3, [fp, #-80]
 8652 3990 0312A0E1 		mov	r1, r3, asl #4
 8653 3994 54301BE5 		ldr	r3, [fp, #-84]
 8654 3998 033081E0 		add	r3, r1, r3
 8655 399c 8330A0E1 		mov	r3, r3, asl #1
 8656 39a0 033082E0 		add	r3, r2, r3
 8657 39a4 B030D3E1 		ldrh	r3, [r3, #0]
 8658 39a8 0300A0E1 		mov	r0, r3
 8659 39ac FEFFFFEB 		bl	celda_leer_valor
 8660 39b0 0030A0E1 		mov	r3, r0
 8661 39b4 55304BE5 		strb	r3, [fp, #-85]
1786:../button.c   **** 
1787:../button.c   ****                     // Si la celda ya tiene un valor del usuario (no es pista)
1788:../button.c   ****                     if (valor_actual != 0)
 8662              		.loc 1 1788 0
 8663 39b8 55305BE5 		ldrb	r3, [fp, #-85]	@ zero_extendqisi2
 8664 39bc 000053E3 		cmp	r3, #0
 8665 39c0 1D00000A 		beq	.L329
1789:../button.c   ****                     {
1790:../button.c   ****                         // COMPORTAMIENTO COMO BOTONES: Deshacer zoom, resaltar y explicar
1791:../button.c   ****                         // Volver a vista normal
1792:../button.c   ****                         modo_zoom = 0;
 8666              		.loc 1 1792 0
 8667 39c4 4C329FE5 		ldr	r3, .L331+28
 8668 39c8 0020A0E3 		mov	r2, #0
 8669 39cc 002083E5 		str	r2, [r3, #0]
1793:../button.c   ****                         Lcd_Clr();
 8670              		.loc 1 1793 0
 8671 39d0 FEFFFFEB 		bl	Lcd_Clr
1794:../button.c   ****                         sudoku_dibujar_marco_tablero();
 8672              		.loc 1 1794 0
 8673 39d4 FEFFFFEB 		bl	sudoku_dibujar_marco_tablero
1795:../button.c   ****                         sudoku_dibujar_tablero_completo(cuadricula_C_C);
 8674              		.loc 1 1795 0
 8675 39d8 34029FE5 		ldr	r0, .L331+24
 8676 39dc FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
1796:../button.c   **** 
1797:../button.c   ****                         // Resaltar la celda momentáneamente para mostrar el problema
1798:../button.c   ****                         sudoku_resaltar_celda(fila_abs, col_abs, 1);
 8677              		.loc 1 1798 0
 8678 39e0 50301BE5 		ldr	r3, [fp, #-80]
 8679 39e4 FF2003E2 		and	r2, r3, #255
 8680 39e8 54301BE5 		ldr	r3, [fp, #-84]
 8681 39ec FF3003E2 		and	r3, r3, #255
 8682 39f0 0200A0E1 		mov	r0, r2
 8683 39f4 0310A0E1 		mov	r1, r3
 8684 39f8 0120A0E3 		mov	r2, #1
 8685 39fc FEFFFFEB 		bl	sudoku_resaltar_celda
1799:../button.c   ****                         Lcd_Dma_Trans();
 8686              		.loc 1 1799 0
 8687 3a00 FEFFFFEB 		bl	Lcd_Dma_Trans
1800:../button.c   ****                         Delay(1000); // Mantener resaltado 1 segundo
 8688              		.loc 1 1800 0
 8689 3a04 FA0FA0E3 		mov	r0, #1000
 8690 3a08 FEFFFFEB 		bl	Delay
1801:../button.c   **** 
1802:../button.c   ****                         // Quitar resaltado
1803:../button.c   ****                         sudoku_resaltar_celda(fila_abs, col_abs, 0);
 8691              		.loc 1 1803 0
 8692 3a0c 50301BE5 		ldr	r3, [fp, #-80]
 8693 3a10 FF2003E2 		and	r2, r3, #255
 8694 3a14 54301BE5 		ldr	r3, [fp, #-84]
 8695 3a18 FF3003E2 		and	r3, r3, #255
 8696 3a1c 0200A0E1 		mov	r0, r2
 8697 3a20 0310A0E1 		mov	r1, r3
 8698 3a24 0020A0E3 		mov	r2, #0
 8699 3a28 FEFFFFEB 		bl	sudoku_resaltar_celda
1804:../button.c   ****                         Lcd_Dma_Trans();
 8700              		.loc 1 1804 0
 8701 3a2c FEFFFFEB 		bl	Lcd_Dma_Trans
1805:../button.c   **** 
1806:../button.c   ****                         Delay(200);
 8702              		.loc 1 1806 0
 8703 3a30 C800A0E3 		mov	r0, #200
 8704 3a34 FEFFFFEB 		bl	Delay
1807:../button.c   ****                         return;
 8705              		.loc 1 1807 0
 8706 3a38 6C0000EA 		b	.L296
 8707              	.L329:
1808:../button.c   ****                     }
1809:../button.c   ****                     else
1810:../button.c   ****                     {
1811:../button.c   ****                         // Celda vacía: proceder con zoom de candidatos
1812:../button.c   ****                         celda_candidatos_fila = fila_abs;
 8708              		.loc 1 1812 0
 8709 3a3c D8319FE5 		ldr	r3, .L331+32
 8710 3a40 50201BE5 		ldr	r2, [fp, #-80]
 8711 3a44 002083E5 		str	r2, [r3, #0]
1813:../button.c   ****                         celda_candidatos_col = col_abs;
 8712              		.loc 1 1813 0
 8713 3a48 D0319FE5 		ldr	r3, .L331+36
 8714 3a4c 54201BE5 		ldr	r2, [fp, #-84]
 8715 3a50 002083E5 		str	r2, [r3, #0]
1814:../button.c   **** 
1815:../button.c   ****                         // Cambiar a modo zoom de candidatos
1816:../button.c   ****                         modo_zoom = 2;
 8716              		.loc 1 1816 0
 8717 3a54 BC319FE5 		ldr	r3, .L331+28
 8718 3a58 0220A0E3 		mov	r2, #2
 8719 3a5c 002083E5 		str	r2, [r3, #0]
1817:../button.c   ****                         dibujar_zoom_candidatos(fila_abs, col_abs);
 8720              		.loc 1 1817 0
 8721 3a60 50301BE5 		ldr	r3, [fp, #-80]
 8722 3a64 FF2003E2 		and	r2, r3, #255
 8723 3a68 54301BE5 		ldr	r3, [fp, #-84]
 8724 3a6c FF3003E2 		and	r3, r3, #255
 8725 3a70 0200A0E1 		mov	r0, r2
 8726 3a74 0310A0E1 		mov	r1, r3
 8727 3a78 6D0100EB 		bl	dibujar_zoom_candidatos
 8728 3a7c 1A0000EA 		b	.L327
 8729              	.L328:
 8730              	.LBE23:
1818:../button.c   ****                     }
1819:../button.c   ****                 }
1820:../button.c   ****                 else
1821:../button.c   ****                 {
1822:../button.c   ****                     // Es una pista: también resaltar momentáneamente para indicar que no se pued
1823:../button.c   ****                     // Volver a vista normal
1824:../button.c   ****                     modo_zoom = 0;
 8731              		.loc 1 1824 0
 8732 3a80 90319FE5 		ldr	r3, .L331+28
 8733 3a84 0020A0E3 		mov	r2, #0
 8734 3a88 002083E5 		str	r2, [r3, #0]
1825:../button.c   ****                     Lcd_Clr();
 8735              		.loc 1 1825 0
 8736 3a8c FEFFFFEB 		bl	Lcd_Clr
1826:../button.c   ****                     sudoku_dibujar_marco_tablero();
 8737              		.loc 1 1826 0
 8738 3a90 FEFFFFEB 		bl	sudoku_dibujar_marco_tablero
1827:../button.c   ****                     sudoku_dibujar_tablero_completo(cuadricula_C_C);
 8739              		.loc 1 1827 0
 8740 3a94 78019FE5 		ldr	r0, .L331+24
 8741 3a98 FEFFFFEB 		bl	sudoku_dibujar_tablero_completo
1828:../button.c   **** 
1829:../button.c   ****                     // Resaltar la celda momentáneamente
1830:../button.c   ****                     sudoku_resaltar_celda(fila_abs, col_abs, 1);
 8742              		.loc 1 1830 0
 8743 3a9c 50301BE5 		ldr	r3, [fp, #-80]
 8744 3aa0 FF2003E2 		and	r2, r3, #255
 8745 3aa4 54301BE5 		ldr	r3, [fp, #-84]
 8746 3aa8 FF3003E2 		and	r3, r3, #255
 8747 3aac 0200A0E1 		mov	r0, r2
 8748 3ab0 0310A0E1 		mov	r1, r3
 8749 3ab4 0120A0E3 		mov	r2, #1
 8750 3ab8 FEFFFFEB 		bl	sudoku_resaltar_celda
1831:../button.c   ****                     Lcd_Dma_Trans();
 8751              		.loc 1 1831 0
 8752 3abc FEFFFFEB 		bl	Lcd_Dma_Trans
1832:../button.c   ****                     Delay(1000); // Mantener resaltado 1 segundo
 8753              		.loc 1 1832 0
 8754 3ac0 FA0FA0E3 		mov	r0, #1000
 8755 3ac4 FEFFFFEB 		bl	Delay
1833:../button.c   **** 
1834:../button.c   ****                     // Quitar resaltado
1835:../button.c   ****                     sudoku_resaltar_celda(fila_abs, col_abs, 0);
 8756              		.loc 1 1835 0
 8757 3ac8 50301BE5 		ldr	r3, [fp, #-80]
 8758 3acc FF2003E2 		and	r2, r3, #255
 8759 3ad0 54301BE5 		ldr	r3, [fp, #-84]
 8760 3ad4 FF3003E2 		and	r3, r3, #255
 8761 3ad8 0200A0E1 		mov	r0, r2
 8762 3adc 0310A0E1 		mov	r1, r3
 8763 3ae0 0020A0E3 		mov	r2, #0
 8764 3ae4 FEFFFFEB 		bl	sudoku_resaltar_celda
1836:../button.c   ****                     Lcd_Dma_Trans();
 8765              		.loc 1 1836 0
 8766 3ae8 FEFFFFEB 		bl	Lcd_Dma_Trans
 8767              	.L327:
 8768              	.LBE22:
1837:../button.c   ****                 }
1838:../button.c   ****             }
1839:../button.c   **** 
1840:../button.c   ****             Delay(200);
 8769              		.loc 1 1840 0
 8770 3aec C800A0E3 		mov	r0, #200
 8771 3af0 FEFFFFEB 		bl	Delay
1841:../button.c   ****             return;
 8772              		.loc 1 1841 0
 8773 3af4 3D0000EA 		b	.L296
 8774              	.L325:
 8775              	.LBE21:
1842:../button.c   ****         }
1843:../button.c   **** 
1844:../button.c   ****         // MODO 0: Vista normal - activar zoom de región
1845:../button.c   ****         int pixel_x = x - TABLERO_X_INI;
 8776              		.loc 1 1845 0
 8777 3af8 74301BE5 		ldr	r3, [fp, #-116]
 8778 3afc 223043E2 		sub	r3, r3, #34
 8779 3b00 5C300BE5 		str	r3, [fp, #-92]
1846:../button.c   ****         int pixel_y = y - TABLERO_Y_INI;
 8780              		.loc 1 1846 0
 8781 3b04 78301BE5 		ldr	r3, [fp, #-120]
 8782 3b08 0E3043E2 		sub	r3, r3, #14
 8783 3b0c 60300BE5 		str	r3, [fp, #-96]
1847:../button.c   **** 
1848:../button.c   ****         // Verificar si el toque está dentro del tablero
1849:../button.c   ****         if (pixel_x >= 0 && pixel_x < (ANCHO_CELDA * 9) &&
 8784              		.loc 1 1849 0
 8785 3b10 5C301BE5 		ldr	r3, [fp, #-92]
 8786 3b14 000053E3 		cmp	r3, #0
 8787 3b18 320000BA 		blt	.L330
 8788              		.loc 1 1849 0 is_stmt 0 discriminator 1
 8789 3b1c 5C301BE5 		ldr	r3, [fp, #-92]
 8790 3b20 D70053E3 		cmp	r3, #215
 8791 3b24 2F0000CA 		bgt	.L330
 8792 3b28 60301BE5 		ldr	r3, [fp, #-96]
 8793 3b2c 000053E3 		cmp	r3, #0
 8794 3b30 2C0000BA 		blt	.L330
1850:../button.c   ****             pixel_y >= 0 && pixel_y < (ALTO_CELDA * 9))
 8795              		.loc 1 1850 0 is_stmt 1
 8796 3b34 60301BE5 		ldr	r3, [fp, #-96]
 8797 3b38 D70053E3 		cmp	r3, #215
 8798 3b3c 290000CA 		bgt	.L330
 8799              	.LBB24:
1851:../button.c   ****         {
1852:../button.c   ****             // Calcular celda tocada
1853:../button.c   ****             int col = pixel_x / ANCHO_CELDA;
 8800              		.loc 1 1853 0
 8801 3b40 5C301BE5 		ldr	r3, [fp, #-92]
 8802 3b44 E8209FE5 		ldr	r2, .L331+56
 8803 3b48 9312C2E0 		smull	r1, r2, r3, r2
 8804 3b4c 4221A0E1 		mov	r2, r2, asr #2
 8805 3b50 C33FA0E1 		mov	r3, r3, asr #31
 8806 3b54 023063E0 		rsb	r3, r3, r2
 8807 3b58 64300BE5 		str	r3, [fp, #-100]
1854:../button.c   ****             int fila = pixel_y / ALTO_CELDA;
 8808              		.loc 1 1854 0
 8809 3b5c 60301BE5 		ldr	r3, [fp, #-96]
 8810 3b60 CC209FE5 		ldr	r2, .L331+56
 8811 3b64 9312C2E0 		smull	r1, r2, r3, r2
 8812 3b68 4221A0E1 		mov	r2, r2, asr #2
 8813 3b6c C33FA0E1 		mov	r3, r3, asr #31
 8814 3b70 023063E0 		rsb	r3, r3, r2
 8815 3b74 68300BE5 		str	r3, [fp, #-104]
1855:../button.c   **** 
1856:../button.c   ****             // Calcular región 3x3 a la que pertenece
1857:../button.c   ****             int region_fila = (fila / 3) * 3; // 0, 3 o 6
 8816              		.loc 1 1857 0
 8817 3b78 68301BE5 		ldr	r3, [fp, #-104]
 8818 3b7c A0209FE5 		ldr	r2, .L331+40
 8819 3b80 9312C2E0 		smull	r1, r2, r3, r2
 8820 3b84 C33FA0E1 		mov	r3, r3, asr #31
 8821 3b88 022063E0 		rsb	r2, r3, r2
 8822 3b8c 0230A0E1 		mov	r3, r2
 8823 3b90 8330A0E1 		mov	r3, r3, asl #1
 8824 3b94 023083E0 		add	r3, r3, r2
 8825 3b98 6C300BE5 		str	r3, [fp, #-108]
1858:../button.c   ****             int region_col = (col / 3) * 3;   // 0, 3 o 6
 8826              		.loc 1 1858 0
 8827 3b9c 64301BE5 		ldr	r3, [fp, #-100]
 8828 3ba0 7C209FE5 		ldr	r2, .L331+40
 8829 3ba4 9312C2E0 		smull	r1, r2, r3, r2
 8830 3ba8 C33FA0E1 		mov	r3, r3, asr #31
 8831 3bac 022063E0 		rsb	r2, r3, r2
 8832 3bb0 0230A0E1 		mov	r3, r2
 8833 3bb4 8330A0E1 		mov	r3, r3, asl #1
 8834 3bb8 023083E0 		add	r3, r3, r2
 8835 3bbc 70300BE5 		str	r3, [fp, #-112]
1859:../button.c   **** 
1860:../button.c   ****             // Activar zoom en la región tocada
1861:../button.c   ****             modo_zoom = 1;
 8836              		.loc 1 1861 0
 8837 3bc0 50309FE5 		ldr	r3, .L331+28
 8838 3bc4 0120A0E3 		mov	r2, #1
 8839 3bc8 002083E5 		str	r2, [r3, #0]
1862:../button.c   ****             region_zoom_fila = region_fila;
 8840              		.loc 1 1862 0
 8841 3bcc 58309FE5 		ldr	r3, .L331+48
 8842 3bd0 6C201BE5 		ldr	r2, [fp, #-108]
 8843 3bd4 002083E5 		str	r2, [r3, #0]
1863:../button.c   ****             region_zoom_col = region_col;
 8844              		.loc 1 1863 0
 8845 3bd8 50309FE5 		ldr	r3, .L331+52
 8846 3bdc 70201BE5 		ldr	r2, [fp, #-112]
 8847 3be0 002083E5 		str	r2, [r3, #0]
1864:../button.c   **** 
1865:../button.c   ****             dibujar_zoom_region();
 8848              		.loc 1 1865 0
 8849 3be4 2D0000EB 		bl	dibujar_zoom_region
 8850              	.L330:
 8851              	.LBE24:
1866:../button.c   ****         }
1867:../button.c   **** 
1868:../button.c   ****         Delay(100);
 8852              		.loc 1 1868 0
 8853 3be8 6400A0E3 		mov	r0, #100
 8854 3bec FEFFFFEB 		bl	Delay
 8855              	.L296:
 8856              	.LBE13:
1869:../button.c   ****     }
1870:../button.c   **** }
 8857              		.loc 1 1870 0
 8858 3bf0 0CD04BE2 		sub	sp, fp, #12
 8859 3bf4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 8860 3bf8 1EFF2FE1 		bx	lr
 8861              	.L332:
 8862              		.align	2
 8863              	.L331:
 8864 3bfc 21000000 		.word	tablero_dibujado
 8865 3c00 14000000 		.word	estado_juego
 8866 3c04 15000000 		.word	fila_seleccionada
 8867 3c08 16000000 		.word	columna_seleccionada
 8868 3c0c 34000000 		.word	tiempo_inicio_partida
 8869 3c10 38000000 		.word	ultimo_tiempo_mostrado
 8870 3c14 00000000 		.word	cuadricula_C_C
 8871 3c18 00000000 		.word	modo_zoom
 8872 3c1c 0C000000 		.word	celda_candidatos_fila
 8873 3c20 10000000 		.word	celda_candidatos_col
 8874 3c24 56555555 		.word	1431655766
 8875 3c28 89888888 		.word	-2004318071
 8876 3c2c 04000000 		.word	region_zoom_fila
 8877 3c30 08000000 		.word	region_zoom_col
 8878 3c34 ABAAAA2A 		.word	715827883
 8879              		.cfi_endproc
 8880              	.LFE32:
 8882              		.align	2
 8884              	es_celda_pista:
 8885              	.LFB33:
1871:../button.c   **** 
1872:../button.c   **** /**
1873:../button.c   ****  * Verifica si una celda es una pista (no se puede modificar)
1874:../button.c   ****  * @param fila: fila de la celda (0-8)
1875:../button.c   ****  * @param columna: columna de la celda (0-8)
1876:../button.c   ****  * @return: 1 si es pista, 0 si no es pista
1877:../button.c   ****  */
1878:../button.c   **** static uint8_t es_celda_pista(uint8_t fila, uint8_t columna)
1879:../button.c   **** {
 8886              		.loc 1 1879 0
 8887              		.cfi_startproc
 8888              		@ Function supports interworking.
 8889              		@ args = 0, pretend = 0, frame = 8
 8890              		@ frame_needed = 1, uses_anonymous_args = 0
 8891 3c38 0DC0A0E1 		mov	ip, sp
 8892              	.LCFI62:
 8893              		.cfi_def_cfa_register 12
 8894 3c3c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 8895 3c40 04B04CE2 		sub	fp, ip, #4
 8896              		.cfi_offset 14, -8
 8897              		.cfi_offset 13, -12
 8898              		.cfi_offset 11, -16
 8899              	.LCFI63:
 8900              		.cfi_def_cfa 11, 4
 8901 3c44 08D04DE2 		sub	sp, sp, #8
 8902 3c48 0020A0E1 		mov	r2, r0
 8903 3c4c 0130A0E1 		mov	r3, r1
 8904 3c50 0D204BE5 		strb	r2, [fp, #-13]
 8905 3c54 0E304BE5 		strb	r3, [fp, #-14]
1880:../button.c   ****     return (cuadricula_C_C[fila][columna] & (1 << 4)) ? 1 : 0;
 8906              		.loc 1 1880 0
 8907 3c58 0D105BE5 		ldrb	r1, [fp, #-13]	@ zero_extendqisi2
 8908 3c5c 0E305BE5 		ldrb	r3, [fp, #-14]	@ zero_extendqisi2
 8909 3c60 34209FE5 		ldr	r2, .L334
 8910 3c64 0112A0E1 		mov	r1, r1, asl #4
 8911 3c68 033081E0 		add	r3, r1, r3
 8912 3c6c 8330A0E1 		mov	r3, r3, asl #1
 8913 3c70 033082E0 		add	r3, r2, r3
 8914 3c74 B030D3E1 		ldrh	r3, [r3, #0]
 8915 3c78 103003E2 		and	r3, r3, #16
 8916 3c7c 000053E3 		cmp	r3, #0
 8917 3c80 0030A003 		moveq	r3, #0
 8918 3c84 0130A013 		movne	r3, #1
 8919 3c88 FF3003E2 		and	r3, r3, #255
1881:../button.c   **** }
 8920              		.loc 1 1881 0
 8921 3c8c 0300A0E1 		mov	r0, r3
 8922 3c90 0CD04BE2 		sub	sp, fp, #12
 8923 3c94 00689DE8 		ldmfd	sp, {fp, sp, lr}
 8924 3c98 1EFF2FE1 		bx	lr
 8925              	.L335:
 8926              		.align	2
 8927              	.L334:
 8928 3c9c 00000000 		.word	cuadricula_C_C
 8929              		.cfi_endproc
 8930              	.LFE33:
 8932              		.section	.rodata
 8933 007a 0000     		.align	2
 8934              	.LC6:
 8935 007c 52656769 		.ascii	"Region 3x3\000"
 8935      6F6E2033 
 8935      783300
 8936              		.text
 8937              		.align	2
 8939              	dibujar_zoom_region:
 8940              	.LFB34:
1882:../button.c   **** 
1883:../button.c   **** /**
1884:../button.c   ****  * Dibuja la región 3x3 en modo zoom con candidatos visibles
1885:../button.c   ****  */
1886:../button.c   **** static void dibujar_zoom_region(void)
1887:../button.c   **** {
 8941              		.loc 1 1887 0
 8942              		.cfi_startproc
 8943              		@ Function supports interworking.
 8944              		@ args = 0, pretend = 0, frame = 72
 8945              		@ frame_needed = 1, uses_anonymous_args = 0
 8946 3ca0 0DC0A0E1 		mov	ip, sp
 8947              	.LCFI64:
 8948              		.cfi_def_cfa_register 12
 8949 3ca4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 8950 3ca8 04B04CE2 		sub	fp, ip, #4
 8951              		.cfi_offset 14, -8
 8952              		.cfi_offset 13, -12
 8953              		.cfi_offset 11, -16
 8954              	.LCFI65:
 8955              		.cfi_def_cfa 11, 4
 8956 3cac 50D04DE2 		sub	sp, sp, #80
1888:../button.c   ****     int i, j, k;
1889:../button.c   **** 
1890:../button.c   ****     Lcd_Clr();
 8957              		.loc 1 1890 0
 8958 3cb0 FEFFFFEB 		bl	Lcd_Clr
1891:../button.c   **** 
1892:../button.c   ****     // Dibujar título indicando la región
1893:../button.c   ****     Lcd_DspAscII8x16(120, 10, BLACK, (INT8U *)"Region 3x3");
 8959              		.loc 1 1893 0
 8960 3cb4 7800A0E3 		mov	r0, #120
 8961 3cb8 0A10A0E3 		mov	r1, #10
 8962 3cbc 0F20A0E3 		mov	r2, #15
 8963 3cc0 58339FE5 		ldr	r3, .L348
 8964 3cc4 FEFFFFEB 		bl	Lcd_DspAscII8x16
1894:../button.c   **** 
1895:../button.c   ****     // Dibujar flecha de salida
1896:../button.c   ****     dibujar_flecha_salida();
 8965              		.loc 1 1896 0
 8966 3cc8 560300EB 		bl	dibujar_flecha_salida
1897:../button.c   **** 
1898:../button.c   ****     // Dibujar las 9 celdas de la región ampliadas
1899:../button.c   ****     for (i = 0; i < 3; i++)
 8967              		.loc 1 1899 0
 8968 3ccc 0030A0E3 		mov	r3, #0
 8969 3cd0 10300BE5 		str	r3, [fp, #-16]
 8970 3cd4 CA0000EA 		b	.L337
 8971              	.L347:
1900:../button.c   ****     {
1901:../button.c   ****         for (j = 0; j < 3; j++)
 8972              		.loc 1 1901 0
 8973 3cd8 0030A0E3 		mov	r3, #0
 8974 3cdc 14300BE5 		str	r3, [fp, #-20]
 8975 3ce0 C10000EA 		b	.L338
 8976              	.L346:
 8977              	.LBB25:
1902:../button.c   ****         {
1903:../button.c   ****             int fila_abs = region_zoom_fila + i;
 8978              		.loc 1 1903 0
 8979 3ce4 38339FE5 		ldr	r3, .L348+4
 8980 3ce8 002093E5 		ldr	r2, [r3, #0]
 8981 3cec 10301BE5 		ldr	r3, [fp, #-16]
 8982 3cf0 033082E0 		add	r3, r2, r3
 8983 3cf4 1C300BE5 		str	r3, [fp, #-28]
1904:../button.c   ****             int col_abs = region_zoom_col + j;
 8984              		.loc 1 1904 0
 8985 3cf8 28339FE5 		ldr	r3, .L348+8
 8986 3cfc 002093E5 		ldr	r2, [r3, #0]
 8987 3d00 14301BE5 		ldr	r3, [fp, #-20]
 8988 3d04 033082E0 		add	r3, r2, r3
 8989 3d08 20300BE5 		str	r3, [fp, #-32]
1905:../button.c   **** 
1906:../button.c   ****             // Posición en pantalla para celdas grandes
1907:../button.c   ****             int x_celda = ZOOM_X_INI + j * ZOOM_CELDA_SIZE;
 8990              		.loc 1 1907 0
 8991 3d0c 14201BE5 		ldr	r2, [fp, #-20]
 8992 3d10 0230A0E1 		mov	r3, r2
 8993 3d14 0332A0E1 		mov	r3, r3, asl #4
 8994 3d18 033062E0 		rsb	r3, r2, r3
 8995 3d1c 0331A0E1 		mov	r3, r3, asl #2
 8996 3d20 503083E2 		add	r3, r3, #80
 8997 3d24 24300BE5 		str	r3, [fp, #-36]
1908:../button.c   ****             int y_celda = ZOOM_Y_INI + i * ZOOM_CELDA_SIZE;
 8998              		.loc 1 1908 0
 8999 3d28 10201BE5 		ldr	r2, [fp, #-16]
 9000 3d2c 0230A0E1 		mov	r3, r2
 9001 3d30 0332A0E1 		mov	r3, r3, asl #4
 9002 3d34 033062E0 		rsb	r3, r2, r3
 9003 3d38 0331A0E1 		mov	r3, r3, asl #2
 9004 3d3c 283083E2 		add	r3, r3, #40
 9005 3d40 28300BE5 		str	r3, [fp, #-40]
1909:../button.c   **** 
1910:../button.c   ****             // Dibujar cuadrado de la celda
1911:../button.c   ****             Lcd_Draw_Box(x_celda, y_celda, x_celda + ZOOM_CELDA_SIZE, y_celda + ZOOM_CELDA_SIZE, BL
 9006              		.loc 1 1911 0
 9007 3d44 24301BE5 		ldr	r3, [fp, #-36]
 9008 3d48 0338A0E1 		mov	r3, r3, asl #16
 9009 3d4c 2308A0E1 		mov	r0, r3, lsr #16
 9010 3d50 28301BE5 		ldr	r3, [fp, #-40]
 9011 3d54 0338A0E1 		mov	r3, r3, asl #16
 9012 3d58 2318A0E1 		mov	r1, r3, lsr #16
 9013 3d5c 24301BE5 		ldr	r3, [fp, #-36]
 9014 3d60 0338A0E1 		mov	r3, r3, asl #16
 9015 3d64 2338A0E1 		mov	r3, r3, lsr #16
 9016 3d68 3C3083E2 		add	r3, r3, #60
 9017 3d6c 0338A0E1 		mov	r3, r3, asl #16
 9018 3d70 2338A0E1 		mov	r3, r3, lsr #16
 9019 3d74 0338A0E1 		mov	r3, r3, asl #16
 9020 3d78 2328A0E1 		mov	r2, r3, lsr #16
 9021 3d7c 28301BE5 		ldr	r3, [fp, #-40]
 9022 3d80 0338A0E1 		mov	r3, r3, asl #16
 9023 3d84 2338A0E1 		mov	r3, r3, lsr #16
 9024 3d88 3C3083E2 		add	r3, r3, #60
 9025 3d8c 0338A0E1 		mov	r3, r3, asl #16
 9026 3d90 2338A0E1 		mov	r3, r3, lsr #16
 9027 3d94 0338A0E1 		mov	r3, r3, asl #16
 9028 3d98 2338A0E1 		mov	r3, r3, lsr #16
 9029 3d9c 0008A0E1 		mov	r0, r0, asl #16
 9030 3da0 4008A0E1 		mov	r0, r0, asr #16
 9031 3da4 0118A0E1 		mov	r1, r1, asl #16
 9032 3da8 4118A0E1 		mov	r1, r1, asr #16
 9033 3dac 0228A0E1 		mov	r2, r2, asl #16
 9034 3db0 4228A0E1 		mov	r2, r2, asr #16
 9035 3db4 0338A0E1 		mov	r3, r3, asl #16
 9036 3db8 4338A0E1 		mov	r3, r3, asr #16
 9037 3dbc 0FC0A0E3 		mov	ip, #15
 9038 3dc0 00C08DE5 		str	ip, [sp, #0]
 9039 3dc4 FEFFFFEB 		bl	Lcd_Draw_Box
1912:../button.c   **** 
1913:../button.c   ****             // Obtener valor y estado de la celda
1914:../button.c   ****             uint8_t valor = celda_leer_valor(cuadricula_C_C[fila_abs][col_abs]);
 9040              		.loc 1 1914 0
 9041 3dc8 5C229FE5 		ldr	r2, .L348+12
 9042 3dcc 1C301BE5 		ldr	r3, [fp, #-28]
 9043 3dd0 0312A0E1 		mov	r1, r3, asl #4
 9044 3dd4 20301BE5 		ldr	r3, [fp, #-32]
 9045 3dd8 033081E0 		add	r3, r1, r3
 9046 3ddc 8330A0E1 		mov	r3, r3, asl #1
 9047 3de0 033082E0 		add	r3, r2, r3
 9048 3de4 B030D3E1 		ldrh	r3, [r3, #0]
 9049 3de8 0300A0E1 		mov	r0, r3
 9050 3dec FEFFFFEB 		bl	celda_leer_valor
 9051 3df0 0030A0E1 		mov	r3, r0
 9052 3df4 29304BE5 		strb	r3, [fp, #-41]
1915:../button.c   ****             uint8_t es_pista = es_celda_pista(fila_abs, col_abs);
 9053              		.loc 1 1915 0
 9054 3df8 1C301BE5 		ldr	r3, [fp, #-28]
 9055 3dfc FF2003E2 		and	r2, r3, #255
 9056 3e00 20301BE5 		ldr	r3, [fp, #-32]
 9057 3e04 FF3003E2 		and	r3, r3, #255
 9058 3e08 0200A0E1 		mov	r0, r2
 9059 3e0c 0310A0E1 		mov	r1, r3
 9060 3e10 88FFFFEB 		bl	es_celda_pista
 9061 3e14 0030A0E1 		mov	r3, r0
 9062 3e18 2A304BE5 		strb	r3, [fp, #-42]
1916:../button.c   **** 
1917:../button.c   ****             if (valor != 0)
 9063              		.loc 1 1917 0
 9064 3e1c 29305BE5 		ldrb	r3, [fp, #-41]	@ zero_extendqisi2
 9065 3e20 000053E3 		cmp	r3, #0
 9066 3e24 1D00000A 		beq	.L339
 9067              	.LBB26:
1918:../button.c   ****             {
1919:../button.c   ****                 // Celda tiene valor - dibujar número grande centrado
1920:../button.c   ****                 char str[2];
1921:../button.c   ****                 str[0] = '0' + valor;
 9068              		.loc 1 1921 0
 9069 3e28 29305BE5 		ldrb	r3, [fp, #-41]
 9070 3e2c 303083E2 		add	r3, r3, #48
 9071 3e30 FF3003E2 		and	r3, r3, #255
 9072 3e34 4C304BE5 		strb	r3, [fp, #-76]
1922:../button.c   ****                 str[1] = '\0';
 9073              		.loc 1 1922 0
 9074 3e38 0030A0E3 		mov	r3, #0
 9075 3e3c 4B304BE5 		strb	r3, [fp, #-75]
1923:../button.c   **** 
1924:../button.c   ****                 // Centrar el número en la celda grande
1925:../button.c   ****                 int txt_x = x_celda + (ZOOM_CELDA_SIZE / 2) - 4;
 9076              		.loc 1 1925 0
 9077 3e40 24301BE5 		ldr	r3, [fp, #-36]
 9078 3e44 1A3083E2 		add	r3, r3, #26
 9079 3e48 30300BE5 		str	r3, [fp, #-48]
1926:../button.c   ****                 int txt_y = y_celda + (ZOOM_CELDA_SIZE / 2) - 8;
 9080              		.loc 1 1926 0
 9081 3e4c 28301BE5 		ldr	r3, [fp, #-40]
 9082 3e50 163083E2 		add	r3, r3, #22
 9083 3e54 34300BE5 		str	r3, [fp, #-52]
1927:../button.c   **** 
1928:../button.c   ****                 // Usar color diferente para pistas
1929:../button.c   ****                 int color = es_pista ? BLACK : DARKGRAY;
 9084              		.loc 1 1929 0
 9085 3e58 2A305BE5 		ldrb	r3, [fp, #-42]	@ zero_extendqisi2
 9086 3e5c 000053E3 		cmp	r3, #0
 9087 3e60 0100000A 		beq	.L340
 9088              		.loc 1 1929 0 is_stmt 0 discriminator 1
 9089 3e64 0F30A0E3 		mov	r3, #15
 9090 3e68 000000EA 		b	.L341
 9091              	.L340:
 9092              		.loc 1 1929 0 discriminator 2
 9093 3e6c 0A30A0E3 		mov	r3, #10
 9094              	.L341:
 9095              		.loc 1 1929 0 discriminator 3
 9096 3e70 38300BE5 		str	r3, [fp, #-56]
1930:../button.c   ****                 Lcd_DspAscII8x16(txt_x, txt_y, color, (INT8U *)str);
 9097              		.loc 1 1930 0 is_stmt 1 discriminator 3
 9098 3e74 30301BE5 		ldr	r3, [fp, #-48]
 9099 3e78 0338A0E1 		mov	r3, r3, asl #16
 9100 3e7c 2308A0E1 		mov	r0, r3, lsr #16
 9101 3e80 34301BE5 		ldr	r3, [fp, #-52]
 9102 3e84 0338A0E1 		mov	r3, r3, asl #16
 9103 3e88 2318A0E1 		mov	r1, r3, lsr #16
 9104 3e8c 38301BE5 		ldr	r3, [fp, #-56]
 9105 3e90 FF2003E2 		and	r2, r3, #255
 9106 3e94 4C304BE2 		sub	r3, fp, #76
 9107 3e98 FEFFFFEB 		bl	Lcd_DspAscII8x16
 9108 3e9c 4F0000EA 		b	.L342
 9109              	.L339:
 9110              	.LBE26:
1931:../button.c   ****             }
1932:../button.c   ****             else if (!es_pista)
 9111              		.loc 1 1932 0
 9112 3ea0 2A305BE5 		ldrb	r3, [fp, #-42]	@ zero_extendqisi2
 9113 3ea4 000053E3 		cmp	r3, #0
 9114 3ea8 4C00001A 		bne	.L342
1933:../button.c   ****             {
1934:../button.c   ****                 // Celda vacía no-pista - mostrar candidatos pequeños
1935:../button.c   ****                 // Dividir celda en cuadrícula 3x3 para candidatos 1-9
1936:../button.c   ****                 for (k = 1; k <= 9; k++)
 9115              		.loc 1 1936 0
 9116 3eac 0130A0E3 		mov	r3, #1
 9117 3eb0 18300BE5 		str	r3, [fp, #-24]
 9118 3eb4 460000EA 		b	.L343
 9119              	.L345:
1937:../button.c   ****                 {
1938:../button.c   ****                     if (es_numero_candidato(cuadricula_C_C[fila_abs][col_abs], k))
 9120              		.loc 1 1938 0
 9121 3eb8 6C219FE5 		ldr	r2, .L348+12
 9122 3ebc 1C301BE5 		ldr	r3, [fp, #-28]
 9123 3ec0 0312A0E1 		mov	r1, r3, asl #4
 9124 3ec4 20301BE5 		ldr	r3, [fp, #-32]
 9125 3ec8 033081E0 		add	r3, r1, r3
 9126 3ecc 8330A0E1 		mov	r3, r3, asl #1
 9127 3ed0 033082E0 		add	r3, r2, r3
 9128 3ed4 B020D3E1 		ldrh	r2, [r3, #0]
 9129 3ed8 18301BE5 		ldr	r3, [fp, #-24]
 9130 3edc FF3003E2 		and	r3, r3, #255
 9131 3ee0 0200A0E1 		mov	r0, r2
 9132 3ee4 0310A0E1 		mov	r1, r3
 9133 3ee8 AC0200EB 		bl	es_numero_candidato
 9134 3eec 0030A0E1 		mov	r3, r0
 9135 3ef0 000053E3 		cmp	r3, #0
 9136 3ef4 3300000A 		beq	.L344
 9137              	.LBB27:
1939:../button.c   ****                     {
1940:../button.c   ****                         int cand_fila = (k - 1) / 3; // 0, 1, 2
 9138              		.loc 1 1940 0
 9139 3ef8 18301BE5 		ldr	r3, [fp, #-24]
 9140 3efc 013043E2 		sub	r3, r3, #1
 9141 3f00 28219FE5 		ldr	r2, .L348+16
 9142 3f04 9302C2E0 		smull	r0, r2, r3, r2
 9143 3f08 C33FA0E1 		mov	r3, r3, asr #31
 9144 3f0c 023063E0 		rsb	r3, r3, r2
 9145 3f10 3C300BE5 		str	r3, [fp, #-60]
1941:../button.c   ****                         int cand_col = (k - 1) % 3;  // 0, 1, 2
 9146              		.loc 1 1941 0
 9147 3f14 18301BE5 		ldr	r3, [fp, #-24]
 9148 3f18 012043E2 		sub	r2, r3, #1
 9149 3f1c 0C319FE5 		ldr	r3, .L348+16
 9150 3f20 9302C1E0 		smull	r0, r1, r3, r2
 9151 3f24 C23FA0E1 		mov	r3, r2, asr #31
 9152 3f28 011063E0 		rsb	r1, r3, r1
 9153 3f2c 0130A0E1 		mov	r3, r1
 9154 3f30 8330A0E1 		mov	r3, r3, asl #1
 9155 3f34 013083E0 		add	r3, r3, r1
 9156 3f38 023063E0 		rsb	r3, r3, r2
 9157 3f3c 40300BE5 		str	r3, [fp, #-64]
1942:../button.c   **** 
1943:../button.c   ****                         // Posición del candidato dentro de la celda
1944:../button.c   ****                         int cand_x = x_celda + 8 + cand_col * 15;
 9158              		.loc 1 1944 0
 9159 3f40 24301BE5 		ldr	r3, [fp, #-36]
 9160 3f44 081083E2 		add	r1, r3, #8
 9161 3f48 40201BE5 		ldr	r2, [fp, #-64]
 9162 3f4c 0230A0E1 		mov	r3, r2
 9163 3f50 0332A0E1 		mov	r3, r3, asl #4
 9164 3f54 033062E0 		rsb	r3, r2, r3
 9165 3f58 033081E0 		add	r3, r1, r3
 9166 3f5c 44300BE5 		str	r3, [fp, #-68]
1945:../button.c   ****                         int cand_y = y_celda + 8 + cand_fila * 15;
 9167              		.loc 1 1945 0
 9168 3f60 28301BE5 		ldr	r3, [fp, #-40]
 9169 3f64 081083E2 		add	r1, r3, #8
 9170 3f68 3C201BE5 		ldr	r2, [fp, #-60]
 9171 3f6c 0230A0E1 		mov	r3, r2
 9172 3f70 0332A0E1 		mov	r3, r3, asl #4
 9173 3f74 033062E0 		rsb	r3, r2, r3
 9174 3f78 033081E0 		add	r3, r1, r3
 9175 3f7c 48300BE5 		str	r3, [fp, #-72]
1946:../button.c   **** 
1947:../button.c   ****                         // Dibujar número candidato pequeño
1948:../button.c   ****                         char cand_str[2];
1949:../button.c   ****                         cand_str[0] = '0' + k;
 9176              		.loc 1 1949 0
 9177 3f80 18301BE5 		ldr	r3, [fp, #-24]
 9178 3f84 FF3003E2 		and	r3, r3, #255
 9179 3f88 303083E2 		add	r3, r3, #48
 9180 3f8c FF3003E2 		and	r3, r3, #255
 9181 3f90 50304BE5 		strb	r3, [fp, #-80]
1950:../button.c   ****                         cand_str[1] = '\0';
 9182              		.loc 1 1950 0
 9183 3f94 0030A0E3 		mov	r3, #0
 9184 3f98 4F304BE5 		strb	r3, [fp, #-79]
1951:../button.c   **** 
1952:../button.c   ****                         Lcd_DspAscII6x8(cand_x, cand_y, BLACK, (INT8U *)cand_str);
 9185              		.loc 1 1952 0
 9186 3f9c 44301BE5 		ldr	r3, [fp, #-68]
 9187 3fa0 0338A0E1 		mov	r3, r3, asl #16
 9188 3fa4 2318A0E1 		mov	r1, r3, lsr #16
 9189 3fa8 48301BE5 		ldr	r3, [fp, #-72]
 9190 3fac 0338A0E1 		mov	r3, r3, asl #16
 9191 3fb0 2328A0E1 		mov	r2, r3, lsr #16
 9192 3fb4 50304BE2 		sub	r3, fp, #80
 9193 3fb8 0100A0E1 		mov	r0, r1
 9194 3fbc 0210A0E1 		mov	r1, r2
 9195 3fc0 0F20A0E3 		mov	r2, #15
 9196 3fc4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 9197              	.L344:
 9198              	.LBE27:
1936:../button.c   ****                 for (k = 1; k <= 9; k++)
 9199              		.loc 1 1936 0
 9200 3fc8 18301BE5 		ldr	r3, [fp, #-24]
 9201 3fcc 013083E2 		add	r3, r3, #1
 9202 3fd0 18300BE5 		str	r3, [fp, #-24]
 9203              	.L343:
1936:../button.c   ****                 for (k = 1; k <= 9; k++)
 9204              		.loc 1 1936 0 is_stmt 0 discriminator 1
 9205 3fd4 18301BE5 		ldr	r3, [fp, #-24]
 9206 3fd8 090053E3 		cmp	r3, #9
 9207 3fdc B5FFFFDA 		ble	.L345
 9208              	.L342:
 9209              	.LBE25:
1901:../button.c   ****         for (j = 0; j < 3; j++)
 9210              		.loc 1 1901 0 is_stmt 1
 9211 3fe0 14301BE5 		ldr	r3, [fp, #-20]
 9212 3fe4 013083E2 		add	r3, r3, #1
 9213 3fe8 14300BE5 		str	r3, [fp, #-20]
 9214              	.L338:
1901:../button.c   ****         for (j = 0; j < 3; j++)
 9215              		.loc 1 1901 0 is_stmt 0 discriminator 1
 9216 3fec 14301BE5 		ldr	r3, [fp, #-20]
 9217 3ff0 020053E3 		cmp	r3, #2
 9218 3ff4 3AFFFFDA 		ble	.L346
1899:../button.c   ****     for (i = 0; i < 3; i++)
 9219              		.loc 1 1899 0 is_stmt 1
 9220 3ff8 10301BE5 		ldr	r3, [fp, #-16]
 9221 3ffc 013083E2 		add	r3, r3, #1
 9222 4000 10300BE5 		str	r3, [fp, #-16]
 9223              	.L337:
1899:../button.c   ****     for (i = 0; i < 3; i++)
 9224              		.loc 1 1899 0 is_stmt 0 discriminator 1
 9225 4004 10301BE5 		ldr	r3, [fp, #-16]
 9226 4008 020053E3 		cmp	r3, #2
 9227 400c 31FFFFDA 		ble	.L347
1953:../button.c   ****                     }
1954:../button.c   ****                 }
1955:../button.c   ****             }
1956:../button.c   ****         }
1957:../button.c   ****     }
1958:../button.c   ****     Lcd_Dma_Trans();
 9228              		.loc 1 1958 0 is_stmt 1
 9229 4010 FEFFFFEB 		bl	Lcd_Dma_Trans
1959:../button.c   **** }
 9230              		.loc 1 1959 0
 9231 4014 0CD04BE2 		sub	sp, fp, #12
 9232 4018 00689DE8 		ldmfd	sp, {fp, sp, lr}
 9233 401c 1EFF2FE1 		bx	lr
 9234              	.L349:
 9235              		.align	2
 9236              	.L348:
 9237 4020 7C000000 		.word	.LC6
 9238 4024 04000000 		.word	region_zoom_fila
 9239 4028 08000000 		.word	region_zoom_col
 9240 402c 00000000 		.word	cuadricula_C_C
 9241 4030 56555555 		.word	1431655766
 9242              		.cfi_endproc
 9243              	.LFE34:
 9245              		.align	2
 9247              	dibujar_zoom_candidatos:
 9248              	.LFB35:
1960:../button.c   **** 
1961:../button.c   **** /**
1962:../button.c   ****  * Dibuja la pantalla de selección de candidatos (números 1-9 y 0)
1963:../button.c   ****  * @param fila: fila de la celda a editar
1964:../button.c   ****  * @param columna: columna de la celda a editar
1965:../button.c   ****  */
1966:../button.c   **** static void dibujar_zoom_candidatos(uint8_t fila, uint8_t columna)
1967:../button.c   **** {
 9249              		.loc 1 1967 0
 9250              		.cfi_startproc
 9251              		@ Function supports interworking.
 9252              		@ args = 0, pretend = 0, frame = 136
 9253              		@ frame_needed = 1, uses_anonymous_args = 0
 9254 4034 0DC0A0E1 		mov	ip, sp
 9255              	.LCFI66:
 9256              		.cfi_def_cfa_register 12
 9257 4038 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 9258 403c 04B04CE2 		sub	fp, ip, #4
 9259              		.cfi_offset 14, -8
 9260              		.cfi_offset 13, -12
 9261              		.cfi_offset 11, -16
 9262              	.LCFI67:
 9263              		.cfi_def_cfa 11, 4
 9264 4040 90D04DE2 		sub	sp, sp, #144
 9265 4044 0020A0E1 		mov	r2, r0
 9266 4048 0130A0E1 		mov	r3, r1
 9267 404c 8D204BE5 		strb	r2, [fp, #-141]
 9268 4050 8E304BE5 		strb	r3, [fp, #-142]
1968:../button.c   ****     int i, x, y;
1969:../button.c   ****     char titulo[50];
1970:../button.c   ****     char str[2];
1971:../button.c   **** 
1972:../button.c   ****     Lcd_Clr();
 9269              		.loc 1 1972 0
 9270 4054 FEFFFFEB 		bl	Lcd_Clr
1973:../button.c   **** 
1974:../button.c   ****     // Título con información de la celda - construir string manualmente
1975:../button.c   ****     titulo[0] = 'C';
 9271              		.loc 1 1975 0
 9272 4058 4330A0E3 		mov	r3, #67
 9273 405c 74304BE5 		strb	r3, [fp, #-116]
1976:../button.c   ****     titulo[1] = 'e';
 9274              		.loc 1 1976 0
 9275 4060 6530A0E3 		mov	r3, #101
 9276 4064 73304BE5 		strb	r3, [fp, #-115]
1977:../button.c   ****     titulo[2] = 'l';
 9277              		.loc 1 1977 0
 9278 4068 6C30A0E3 		mov	r3, #108
 9279 406c 72304BE5 		strb	r3, [fp, #-114]
1978:../button.c   ****     titulo[3] = 'd';
 9280              		.loc 1 1978 0
 9281 4070 6430A0E3 		mov	r3, #100
 9282 4074 71304BE5 		strb	r3, [fp, #-113]
1979:../button.c   ****     titulo[4] = 'a';
 9283              		.loc 1 1979 0
 9284 4078 6130A0E3 		mov	r3, #97
 9285 407c 70304BE5 		strb	r3, [fp, #-112]
1980:../button.c   ****     titulo[5] = ' ';
 9286              		.loc 1 1980 0
 9287 4080 2030A0E3 		mov	r3, #32
 9288 4084 6F304BE5 		strb	r3, [fp, #-111]
1981:../button.c   ****     titulo[6] = '(';
 9289              		.loc 1 1981 0
 9290 4088 2830A0E3 		mov	r3, #40
 9291 408c 6E304BE5 		strb	r3, [fp, #-110]
1982:../button.c   ****     titulo[7] = '0' + (fila + 1);
 9292              		.loc 1 1982 0
 9293 4090 8D305BE5 		ldrb	r3, [fp, #-141]
 9294 4094 313083E2 		add	r3, r3, #49
 9295 4098 FF3003E2 		and	r3, r3, #255
 9296 409c 6D304BE5 		strb	r3, [fp, #-109]
1983:../button.c   ****     titulo[8] = ',';
 9297              		.loc 1 1983 0
 9298 40a0 2C30A0E3 		mov	r3, #44
 9299 40a4 6C304BE5 		strb	r3, [fp, #-108]
1984:../button.c   ****     titulo[9] = '0' + (columna + 1);
 9300              		.loc 1 1984 0
 9301 40a8 8E305BE5 		ldrb	r3, [fp, #-142]
 9302 40ac 313083E2 		add	r3, r3, #49
 9303 40b0 FF3003E2 		and	r3, r3, #255
 9304 40b4 6B304BE5 		strb	r3, [fp, #-107]
1985:../button.c   ****     titulo[10] = ')';
 9305              		.loc 1 1985 0
 9306 40b8 2930A0E3 		mov	r3, #41
 9307 40bc 6A304BE5 		strb	r3, [fp, #-106]
1986:../button.c   ****     titulo[11] = '\0';
 9308              		.loc 1 1986 0
 9309 40c0 0030A0E3 		mov	r3, #0
 9310 40c4 69304BE5 		strb	r3, [fp, #-105]
1987:../button.c   ****     Lcd_DspAscII8x16(110, 10, BLACK, (INT8U *)titulo); // Más hacia la derecha
 9311              		.loc 1 1987 0
 9312 40c8 74304BE2 		sub	r3, fp, #116
 9313 40cc 6E00A0E3 		mov	r0, #110
 9314 40d0 0A10A0E3 		mov	r1, #10
 9315 40d4 0F20A0E3 		mov	r2, #15
 9316 40d8 FEFFFFEB 		bl	Lcd_DspAscII8x16
1988:../button.c   **** 
1989:../button.c   ****     // Dibujar flecha de salida
1990:../button.c   ****     dibujar_flecha_salida();
 9317              		.loc 1 1990 0
 9318 40dc 510200EB 		bl	dibujar_flecha_salida
1991:../button.c   **** 
1992:../button.c   ****     uint8_t valor_actual = celda_leer_valor(cuadricula_C_C[fila][columna]);
 9319              		.loc 1 1992 0
 9320 40e0 8D105BE5 		ldrb	r1, [fp, #-141]	@ zero_extendqisi2
 9321 40e4 8E305BE5 		ldrb	r3, [fp, #-142]	@ zero_extendqisi2
 9322 40e8 F0269FE5 		ldr	r2, .L359
 9323 40ec 0112A0E1 		mov	r1, r1, asl #4
 9324 40f0 033081E0 		add	r3, r1, r3
 9325 40f4 8330A0E1 		mov	r3, r3, asl #1
 9326 40f8 033082E0 		add	r3, r2, r3
 9327 40fc B030D3E1 		ldrh	r3, [r3, #0]
 9328 4100 0300A0E1 		mov	r0, r3
 9329 4104 FEFFFFEB 		bl	celda_leer_valor
 9330 4108 0030A0E1 		mov	r3, r0
 9331 410c 19304BE5 		strb	r3, [fp, #-25]
1993:../button.c   ****     if (valor_actual != 0)
 9332              		.loc 1 1993 0
 9333 4110 19305BE5 		ldrb	r3, [fp, #-25]	@ zero_extendqisi2
 9334 4114 000053E3 		cmp	r3, #0
 9335 4118 2600000A 		beq	.L351
1994:../button.c   ****     {
1995:../button.c   ****         // Construir string "Valor actual: X" manualmente
1996:../button.c   ****         titulo[0] = 'V';
 9336              		.loc 1 1996 0
 9337 411c 5630A0E3 		mov	r3, #86
 9338 4120 74304BE5 		strb	r3, [fp, #-116]
1997:../button.c   ****         titulo[1] = 'a';
 9339              		.loc 1 1997 0
 9340 4124 6130A0E3 		mov	r3, #97
 9341 4128 73304BE5 		strb	r3, [fp, #-115]
1998:../button.c   ****         titulo[2] = 'l';
 9342              		.loc 1 1998 0
 9343 412c 6C30A0E3 		mov	r3, #108
 9344 4130 72304BE5 		strb	r3, [fp, #-114]
1999:../button.c   ****         titulo[3] = 'o';
 9345              		.loc 1 1999 0
 9346 4134 6F30A0E3 		mov	r3, #111
 9347 4138 71304BE5 		strb	r3, [fp, #-113]
2000:../button.c   ****         titulo[4] = 'r';
 9348              		.loc 1 2000 0
 9349 413c 7230A0E3 		mov	r3, #114
 9350 4140 70304BE5 		strb	r3, [fp, #-112]
2001:../button.c   ****         titulo[5] = ' ';
 9351              		.loc 1 2001 0
 9352 4144 2030A0E3 		mov	r3, #32
 9353 4148 6F304BE5 		strb	r3, [fp, #-111]
2002:../button.c   ****         titulo[6] = 'a';
 9354              		.loc 1 2002 0
 9355 414c 6130A0E3 		mov	r3, #97
 9356 4150 6E304BE5 		strb	r3, [fp, #-110]
2003:../button.c   ****         titulo[7] = 'c';
 9357              		.loc 1 2003 0
 9358 4154 6330A0E3 		mov	r3, #99
 9359 4158 6D304BE5 		strb	r3, [fp, #-109]
2004:../button.c   ****         titulo[8] = 't';
 9360              		.loc 1 2004 0
 9361 415c 7430A0E3 		mov	r3, #116
 9362 4160 6C304BE5 		strb	r3, [fp, #-108]
2005:../button.c   ****         titulo[9] = 'u';
 9363              		.loc 1 2005 0
 9364 4164 7530A0E3 		mov	r3, #117
 9365 4168 6B304BE5 		strb	r3, [fp, #-107]
2006:../button.c   ****         titulo[10] = 'a';
 9366              		.loc 1 2006 0
 9367 416c 6130A0E3 		mov	r3, #97
 9368 4170 6A304BE5 		strb	r3, [fp, #-106]
2007:../button.c   ****         titulo[11] = 'l';
 9369              		.loc 1 2007 0
 9370 4174 6C30A0E3 		mov	r3, #108
 9371 4178 69304BE5 		strb	r3, [fp, #-105]
2008:../button.c   ****         titulo[12] = ':';
 9372              		.loc 1 2008 0
 9373 417c 3A30A0E3 		mov	r3, #58
 9374 4180 68304BE5 		strb	r3, [fp, #-104]
2009:../button.c   ****         titulo[13] = ' ';
 9375              		.loc 1 2009 0
 9376 4184 2030A0E3 		mov	r3, #32
 9377 4188 67304BE5 		strb	r3, [fp, #-103]
2010:../button.c   ****         titulo[14] = '0' + valor_actual;
 9378              		.loc 1 2010 0
 9379 418c 19305BE5 		ldrb	r3, [fp, #-25]
 9380 4190 303083E2 		add	r3, r3, #48
 9381 4194 FF3003E2 		and	r3, r3, #255
 9382 4198 66304BE5 		strb	r3, [fp, #-102]
2011:../button.c   ****         titulo[15] = '\0';
 9383              		.loc 1 2011 0
 9384 419c 0030A0E3 		mov	r3, #0
 9385 41a0 65304BE5 		strb	r3, [fp, #-101]
2012:../button.c   ****         Lcd_DspAscII6x8(120, 30, DARKGRAY, (INT8U *)titulo); // Más hacia la derecha
 9386              		.loc 1 2012 0
 9387 41a4 74304BE2 		sub	r3, fp, #116
 9388 41a8 7800A0E3 		mov	r0, #120
 9389 41ac 1E10A0E3 		mov	r1, #30
 9390 41b0 0A20A0E3 		mov	r2, #10
 9391 41b4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 9392              	.L351:
2013:../button.c   ****     }
2014:../button.c   **** 
2015:../button.c   ****     // Dibujar cuadrícula de números 1-9 (3x3) y 0 por separado
2016:../button.c   ****     // Fila 1: 1, 2, 3
2017:../button.c   ****     // Fila 2: 4, 5, 6
2018:../button.c   ****     // Fila 3: 7, 8, 9
2019:../button.c   ****     // Fila 4: 0 (centrado)
2020:../button.c   **** 
2021:../button.c   ****     for (i = 1; i <= 9; i++)
 9393              		.loc 1 2021 0
 9394 41b8 0130A0E3 		mov	r3, #1
 9395 41bc 10300BE5 		str	r3, [fp, #-16]
 9396 41c0 B30000EA 		b	.L352
 9397              	.L356:
 9398              	.LBB28:
2022:../button.c   ****     {
2023:../button.c   ****         int fila_num = (i - 1) / 3;
 9399              		.loc 1 2023 0
 9400 41c4 10301BE5 		ldr	r3, [fp, #-16]
 9401 41c8 013043E2 		sub	r3, r3, #1
 9402 41cc 10269FE5 		ldr	r2, .L359+4
 9403 41d0 9302C2E0 		smull	r0, r2, r3, r2
 9404 41d4 C33FA0E1 		mov	r3, r3, asr #31
 9405 41d8 023063E0 		rsb	r3, r3, r2
 9406 41dc 20300BE5 		str	r3, [fp, #-32]
2024:../button.c   ****         int col_num = (i - 1) % 3;
 9407              		.loc 1 2024 0
 9408 41e0 10301BE5 		ldr	r3, [fp, #-16]
 9409 41e4 012043E2 		sub	r2, r3, #1
 9410 41e8 F4359FE5 		ldr	r3, .L359+4
 9411 41ec 9302C1E0 		smull	r0, r1, r3, r2
 9412 41f0 C23FA0E1 		mov	r3, r2, asr #31
 9413 41f4 011063E0 		rsb	r1, r3, r1
 9414 41f8 0130A0E1 		mov	r3, r1
 9415 41fc 8330A0E1 		mov	r3, r3, asl #1
 9416 4200 013083E0 		add	r3, r3, r1
 9417 4204 023063E0 		rsb	r3, r3, r2
 9418 4208 24300BE5 		str	r3, [fp, #-36]
2025:../button.c   **** 
2026:../button.c   ****         x = CANDIDATOS_X_INI + col_num * CANDIDATOS_CELDA_SIZE;
 9419              		.loc 1 2026 0
 9420 420c 24201BE5 		ldr	r2, [fp, #-36]
 9421 4210 0230A0E1 		mov	r3, r2
 9422 4214 0331A0E1 		mov	r3, r3, asl #2
 9423 4218 023083E0 		add	r3, r3, r2
 9424 421c 0321A0E1 		mov	r2, r3, asl #2
 9425 4220 023083E0 		add	r3, r3, r2
 9426 4224 8330A0E1 		mov	r3, r3, asl #1
 9427 4228 643083E2 		add	r3, r3, #100
 9428 422c 28300BE5 		str	r3, [fp, #-40]
2027:../button.c   ****         y = CANDIDATOS_Y_INI + fila_num * CANDIDATOS_CELDA_SIZE;
 9429              		.loc 1 2027 0
 9430 4230 20201BE5 		ldr	r2, [fp, #-32]
 9431 4234 0230A0E1 		mov	r3, r2
 9432 4238 0331A0E1 		mov	r3, r3, asl #2
 9433 423c 023083E0 		add	r3, r3, r2
 9434 4240 0321A0E1 		mov	r2, r3, asl #2
 9435 4244 023083E0 		add	r3, r3, r2
 9436 4248 8330A0E1 		mov	r3, r3, asl #1
 9437 424c 1E3083E2 		add	r3, r3, #30
 9438 4250 2C300BE5 		str	r3, [fp, #-44]
2028:../button.c   **** 
2029:../button.c   ****         // Dibujar cuadrado del número
2030:../button.c   ****         Lcd_Draw_Box(x, y, x + CANDIDATOS_CELDA_SIZE, y + CANDIDATOS_CELDA_SIZE, BLACK);
 9439              		.loc 1 2030 0
 9440 4254 28301BE5 		ldr	r3, [fp, #-40]
 9441 4258 0338A0E1 		mov	r3, r3, asl #16
 9442 425c 2308A0E1 		mov	r0, r3, lsr #16
 9443 4260 2C301BE5 		ldr	r3, [fp, #-44]
 9444 4264 0338A0E1 		mov	r3, r3, asl #16
 9445 4268 2318A0E1 		mov	r1, r3, lsr #16
 9446 426c 28301BE5 		ldr	r3, [fp, #-40]
 9447 4270 0338A0E1 		mov	r3, r3, asl #16
 9448 4274 2338A0E1 		mov	r3, r3, lsr #16
 9449 4278 323083E2 		add	r3, r3, #50
 9450 427c 0338A0E1 		mov	r3, r3, asl #16
 9451 4280 2338A0E1 		mov	r3, r3, lsr #16
 9452 4284 0338A0E1 		mov	r3, r3, asl #16
 9453 4288 2328A0E1 		mov	r2, r3, lsr #16
 9454 428c 2C301BE5 		ldr	r3, [fp, #-44]
 9455 4290 0338A0E1 		mov	r3, r3, asl #16
 9456 4294 2338A0E1 		mov	r3, r3, lsr #16
 9457 4298 323083E2 		add	r3, r3, #50
 9458 429c 0338A0E1 		mov	r3, r3, asl #16
 9459 42a0 2338A0E1 		mov	r3, r3, lsr #16
 9460 42a4 0338A0E1 		mov	r3, r3, asl #16
 9461 42a8 2338A0E1 		mov	r3, r3, lsr #16
 9462 42ac 0008A0E1 		mov	r0, r0, asl #16
 9463 42b0 4008A0E1 		mov	r0, r0, asr #16
 9464 42b4 0118A0E1 		mov	r1, r1, asl #16
 9465 42b8 4118A0E1 		mov	r1, r1, asr #16
 9466 42bc 0228A0E1 		mov	r2, r2, asl #16
 9467 42c0 4228A0E1 		mov	r2, r2, asr #16
 9468 42c4 0338A0E1 		mov	r3, r3, asl #16
 9469 42c8 4338A0E1 		mov	r3, r3, asr #16
 9470 42cc 0FC0A0E3 		mov	ip, #15
 9471 42d0 00C08DE5 		str	ip, [sp, #0]
 9472 42d4 FEFFFFEB 		bl	Lcd_Draw_Box
2031:../button.c   **** 
2032:../button.c   ****         // Dibujar el número centrado
2033:../button.c   ****         str[0] = '0' + i;
 9473              		.loc 1 2033 0
 9474 42d8 10301BE5 		ldr	r3, [fp, #-16]
 9475 42dc FF3003E2 		and	r3, r3, #255
 9476 42e0 303083E2 		add	r3, r3, #48
 9477 42e4 FF3003E2 		and	r3, r3, #255
 9478 42e8 78304BE5 		strb	r3, [fp, #-120]
2034:../button.c   ****         str[1] = '\0';
 9479              		.loc 1 2034 0
 9480 42ec 0030A0E3 		mov	r3, #0
 9481 42f0 77304BE5 		strb	r3, [fp, #-119]
2035:../button.c   **** 
2036:../button.c   ****         int txt_x = x + (CANDIDATOS_CELDA_SIZE / 2) - 4;
 9482              		.loc 1 2036 0
 9483 42f4 28301BE5 		ldr	r3, [fp, #-40]
 9484 42f8 153083E2 		add	r3, r3, #21
 9485 42fc 30300BE5 		str	r3, [fp, #-48]
2037:../button.c   ****         int txt_y = y + (CANDIDATOS_CELDA_SIZE / 2) - 8;
 9486              		.loc 1 2037 0
 9487 4300 2C301BE5 		ldr	r3, [fp, #-44]
 9488 4304 113083E2 		add	r3, r3, #17
 9489 4308 34300BE5 		str	r3, [fp, #-52]
2038:../button.c   **** 
2039:../button.c   ****         // Verificar si es candidato válido o el valor actual
2040:../button.c   ****         uint8_t es_candidato = es_numero_candidato(cuadricula_C_C[fila][columna], i);
 9490              		.loc 1 2040 0
 9491 430c 8D105BE5 		ldrb	r1, [fp, #-141]	@ zero_extendqisi2
 9492 4310 8E305BE5 		ldrb	r3, [fp, #-142]	@ zero_extendqisi2
 9493 4314 C4249FE5 		ldr	r2, .L359
 9494 4318 0112A0E1 		mov	r1, r1, asl #4
 9495 431c 033081E0 		add	r3, r1, r3
 9496 4320 8330A0E1 		mov	r3, r3, asl #1
 9497 4324 033082E0 		add	r3, r2, r3
 9498 4328 B020D3E1 		ldrh	r2, [r3, #0]
 9499 432c 10301BE5 		ldr	r3, [fp, #-16]
 9500 4330 FF3003E2 		and	r3, r3, #255
 9501 4334 0200A0E1 		mov	r0, r2
 9502 4338 0310A0E1 		mov	r1, r3
 9503 433c 970100EB 		bl	es_numero_candidato
 9504 4340 0030A0E1 		mov	r3, r0
 9505 4344 35304BE5 		strb	r3, [fp, #-53]
2041:../button.c   ****         uint8_t es_valor_actual = (i == valor_actual);
 9506              		.loc 1 2041 0
 9507 4348 19205BE5 		ldrb	r2, [fp, #-25]	@ zero_extendqisi2
 9508 434c 10301BE5 		ldr	r3, [fp, #-16]
 9509 4350 030052E1 		cmp	r2, r3
 9510 4354 0030A013 		movne	r3, #0
 9511 4358 0130A003 		moveq	r3, #1
 9512 435c 36304BE5 		strb	r3, [fp, #-54]
2042:../button.c   **** 
2043:../button.c   ****         int color, fondo_color;
2044:../button.c   ****         // Nueva lógica:
2045:../button.c   ****         // - Si hay valor actual: NINGÚN número 1-9 seleccionable (todos con fondo blanco)
2046:../button.c   ****         // - Si no hay valor: solo candidatos válidos con fondo negro
2047:../button.c   ****         if (valor_actual != 0)
 9513              		.loc 1 2047 0
 9514 4360 19305BE5 		ldrb	r3, [fp, #-25]	@ zero_extendqisi2
 9515 4364 000053E3 		cmp	r3, #0
 9516 4368 0400000A 		beq	.L353
2048:../button.c   ****         {
2049:../button.c   ****             // Celda con valor: ningún número 1-9 seleccionable
2050:../button.c   ****             fondo_color = WHITE;
 9517              		.loc 1 2050 0
 9518 436c 0030A0E3 		mov	r3, #0
 9519 4370 18300BE5 		str	r3, [fp, #-24]
2051:../button.c   ****             color = BLACK;
 9520              		.loc 1 2051 0
 9521 4374 0F30A0E3 		mov	r3, #15
 9522 4378 14300BE5 		str	r3, [fp, #-20]
 9523 437c 0B0000EA 		b	.L354
 9524              	.L353:
2052:../button.c   ****         }
2053:../button.c   ****         else
2054:../button.c   ****         {
2055:../button.c   ****             // Celda vacía: solo candidatos válidos en negro
2056:../button.c   ****             if (es_candidato)
 9525              		.loc 1 2056 0
 9526 4380 35305BE5 		ldrb	r3, [fp, #-53]	@ zero_extendqisi2
 9527 4384 000053E3 		cmp	r3, #0
 9528 4388 0400000A 		beq	.L355
2057:../button.c   ****             {
2058:../button.c   ****                 fondo_color = BLACK;
 9529              		.loc 1 2058 0
 9530 438c 0F30A0E3 		mov	r3, #15
 9531 4390 18300BE5 		str	r3, [fp, #-24]
2059:../button.c   ****                 color = WHITE;
 9532              		.loc 1 2059 0
 9533 4394 0030A0E3 		mov	r3, #0
 9534 4398 14300BE5 		str	r3, [fp, #-20]
 9535 439c 030000EA 		b	.L354
 9536              	.L355:
2060:../button.c   ****             }
2061:../button.c   ****             else
2062:../button.c   ****             {
2063:../button.c   ****                 fondo_color = WHITE;
 9537              		.loc 1 2063 0
 9538 43a0 0030A0E3 		mov	r3, #0
 9539 43a4 18300BE5 		str	r3, [fp, #-24]
2064:../button.c   ****                 color = BLACK;
 9540              		.loc 1 2064 0
 9541 43a8 0F30A0E3 		mov	r3, #15
 9542 43ac 14300BE5 		str	r3, [fp, #-20]
 9543              	.L354:
2065:../button.c   ****             }
2066:../button.c   ****         }
2067:../button.c   **** 
2068:../button.c   ****         // Llenar el fondo
2069:../button.c   ****         LcdClrRect(x + 1, y + 1, x + CANDIDATOS_CELDA_SIZE - 1, y + CANDIDATOS_CELDA_SIZE - 1, fond
 9544              		.loc 1 2069 0
 9545 43b0 28301BE5 		ldr	r3, [fp, #-40]
 9546 43b4 0338A0E1 		mov	r3, r3, asl #16
 9547 43b8 2338A0E1 		mov	r3, r3, lsr #16
 9548 43bc 013083E2 		add	r3, r3, #1
 9549 43c0 0338A0E1 		mov	r3, r3, asl #16
 9550 43c4 2338A0E1 		mov	r3, r3, lsr #16
 9551 43c8 0338A0E1 		mov	r3, r3, asl #16
 9552 43cc 2308A0E1 		mov	r0, r3, lsr #16
 9553 43d0 2C301BE5 		ldr	r3, [fp, #-44]
 9554 43d4 0338A0E1 		mov	r3, r3, asl #16
 9555 43d8 2338A0E1 		mov	r3, r3, lsr #16
 9556 43dc 013083E2 		add	r3, r3, #1
 9557 43e0 0338A0E1 		mov	r3, r3, asl #16
 9558 43e4 2338A0E1 		mov	r3, r3, lsr #16
 9559 43e8 0338A0E1 		mov	r3, r3, asl #16
 9560 43ec 2318A0E1 		mov	r1, r3, lsr #16
 9561 43f0 28301BE5 		ldr	r3, [fp, #-40]
 9562 43f4 0338A0E1 		mov	r3, r3, asl #16
 9563 43f8 2338A0E1 		mov	r3, r3, lsr #16
 9564 43fc 313083E2 		add	r3, r3, #49
 9565 4400 0338A0E1 		mov	r3, r3, asl #16
 9566 4404 2338A0E1 		mov	r3, r3, lsr #16
 9567 4408 0338A0E1 		mov	r3, r3, asl #16
 9568 440c 2328A0E1 		mov	r2, r3, lsr #16
 9569 4410 2C301BE5 		ldr	r3, [fp, #-44]
 9570 4414 0338A0E1 		mov	r3, r3, asl #16
 9571 4418 2338A0E1 		mov	r3, r3, lsr #16
 9572 441c 313083E2 		add	r3, r3, #49
 9573 4420 0338A0E1 		mov	r3, r3, asl #16
 9574 4424 2338A0E1 		mov	r3, r3, lsr #16
 9575 4428 0338A0E1 		mov	r3, r3, asl #16
 9576 442c 2338A0E1 		mov	r3, r3, lsr #16
 9577 4430 18C01BE5 		ldr	ip, [fp, #-24]
 9578 4434 FFC00CE2 		and	ip, ip, #255
 9579 4438 0008A0E1 		mov	r0, r0, asl #16
 9580 443c 4008A0E1 		mov	r0, r0, asr #16
 9581 4440 0118A0E1 		mov	r1, r1, asl #16
 9582 4444 4118A0E1 		mov	r1, r1, asr #16
 9583 4448 0228A0E1 		mov	r2, r2, asl #16
 9584 444c 4228A0E1 		mov	r2, r2, asr #16
 9585 4450 0338A0E1 		mov	r3, r3, asl #16
 9586 4454 4338A0E1 		mov	r3, r3, asr #16
 9587 4458 00C08DE5 		str	ip, [sp, #0]
 9588 445c FEFFFFEB 		bl	LcdClrRect
2070:../button.c   **** 
2071:../button.c   ****         Lcd_DspAscII8x16(txt_x, txt_y, color, (INT8U *)str);
 9589              		.loc 1 2071 0
 9590 4460 30301BE5 		ldr	r3, [fp, #-48]
 9591 4464 0338A0E1 		mov	r3, r3, asl #16
 9592 4468 2308A0E1 		mov	r0, r3, lsr #16
 9593 446c 34301BE5 		ldr	r3, [fp, #-52]
 9594 4470 0338A0E1 		mov	r3, r3, asl #16
 9595 4474 2318A0E1 		mov	r1, r3, lsr #16
 9596 4478 14301BE5 		ldr	r3, [fp, #-20]
 9597 447c FF2003E2 		and	r2, r3, #255
 9598 4480 78304BE2 		sub	r3, fp, #120
 9599 4484 FEFFFFEB 		bl	Lcd_DspAscII8x16
 9600              	.LBE28:
2021:../button.c   ****     for (i = 1; i <= 9; i++)
 9601              		.loc 1 2021 0
 9602 4488 10301BE5 		ldr	r3, [fp, #-16]
 9603 448c 013083E2 		add	r3, r3, #1
 9604 4490 10300BE5 		str	r3, [fp, #-16]
 9605              	.L352:
2021:../button.c   ****     for (i = 1; i <= 9; i++)
 9606              		.loc 1 2021 0 is_stmt 0 discriminator 1
 9607 4494 10301BE5 		ldr	r3, [fp, #-16]
 9608 4498 090053E3 		cmp	r3, #9
 9609 449c 48FFFFDA 		ble	.L356
2072:../button.c   ****     }
2073:../button.c   **** 
2074:../button.c   ****     // Dibujar el 0 con lógica actualizada
2075:../button.c   ****     x = CANDIDATOS_X_INI + CANDIDATOS_CELDA_SIZE; // Centrado (segunda columna)
 9610              		.loc 1 2075 0 is_stmt 1
 9611 44a0 9630A0E3 		mov	r3, #150
 9612 44a4 28300BE5 		str	r3, [fp, #-40]
2076:../button.c   ****     y = CANDIDATOS_Y_INI + 3 * CANDIDATOS_CELDA_SIZE;
 9613              		.loc 1 2076 0
 9614 44a8 B430A0E3 		mov	r3, #180
 9615 44ac 2C300BE5 		str	r3, [fp, #-44]
2077:../button.c   **** 
2078:../button.c   ****     Lcd_Draw_Box(x, y, x + CANDIDATOS_CELDA_SIZE, y + CANDIDATOS_CELDA_SIZE, BLACK);
 9616              		.loc 1 2078 0
 9617 44b0 28301BE5 		ldr	r3, [fp, #-40]
 9618 44b4 0338A0E1 		mov	r3, r3, asl #16
 9619 44b8 2308A0E1 		mov	r0, r3, lsr #16
 9620 44bc 2C301BE5 		ldr	r3, [fp, #-44]
 9621 44c0 0338A0E1 		mov	r3, r3, asl #16
 9622 44c4 2318A0E1 		mov	r1, r3, lsr #16
 9623 44c8 28301BE5 		ldr	r3, [fp, #-40]
 9624 44cc 0338A0E1 		mov	r3, r3, asl #16
 9625 44d0 2338A0E1 		mov	r3, r3, lsr #16
 9626 44d4 323083E2 		add	r3, r3, #50
 9627 44d8 0338A0E1 		mov	r3, r3, asl #16
 9628 44dc 2338A0E1 		mov	r3, r3, lsr #16
 9629 44e0 0338A0E1 		mov	r3, r3, asl #16
 9630 44e4 2328A0E1 		mov	r2, r3, lsr #16
 9631 44e8 2C301BE5 		ldr	r3, [fp, #-44]
 9632 44ec 0338A0E1 		mov	r3, r3, asl #16
 9633 44f0 2338A0E1 		mov	r3, r3, lsr #16
 9634 44f4 323083E2 		add	r3, r3, #50
 9635 44f8 0338A0E1 		mov	r3, r3, asl #16
 9636 44fc 2338A0E1 		mov	r3, r3, lsr #16
 9637 4500 0338A0E1 		mov	r3, r3, asl #16
 9638 4504 2338A0E1 		mov	r3, r3, lsr #16
 9639 4508 0008A0E1 		mov	r0, r0, asl #16
 9640 450c 4008A0E1 		mov	r0, r0, asr #16
 9641 4510 0118A0E1 		mov	r1, r1, asl #16
 9642 4514 4118A0E1 		mov	r1, r1, asr #16
 9643 4518 0228A0E1 		mov	r2, r2, asl #16
 9644 451c 4228A0E1 		mov	r2, r2, asr #16
 9645 4520 0338A0E1 		mov	r3, r3, asl #16
 9646 4524 4338A0E1 		mov	r3, r3, asr #16
 9647 4528 0FC0A0E3 		mov	ip, #15
 9648 452c 00C08DE5 		str	ip, [sp, #0]
 9649 4530 FEFFFFEB 		bl	Lcd_Draw_Box
2079:../button.c   **** 
2080:../button.c   ****     str[0] = '0';
 9650              		.loc 1 2080 0
 9651 4534 3030A0E3 		mov	r3, #48
 9652 4538 78304BE5 		strb	r3, [fp, #-120]
2081:../button.c   ****     str[1] = '\0';
 9653              		.loc 1 2081 0
 9654 453c 0030A0E3 		mov	r3, #0
 9655 4540 77304BE5 		strb	r3, [fp, #-119]
2082:../button.c   **** 
2083:../button.c   ****     int txt_x = x + (CANDIDATOS_CELDA_SIZE / 2) - 4;
 9656              		.loc 1 2083 0
 9657 4544 28301BE5 		ldr	r3, [fp, #-40]
 9658 4548 153083E2 		add	r3, r3, #21
 9659 454c 3C300BE5 		str	r3, [fp, #-60]
2084:../button.c   ****     int txt_y = y + (CANDIDATOS_CELDA_SIZE / 2) - 8;
 9660              		.loc 1 2084 0
 9661 4550 2C301BE5 		ldr	r3, [fp, #-44]
 9662 4554 113083E2 		add	r3, r3, #17
 9663 4558 40300BE5 		str	r3, [fp, #-64]
2085:../button.c   **** 
2086:../button.c   ****     if (valor_actual != 0)
 9664              		.loc 1 2086 0
 9665 455c 19305BE5 		ldrb	r3, [fp, #-25]	@ zero_extendqisi2
 9666 4560 000053E3 		cmp	r3, #0
 9667 4564 3600000A 		beq	.L357
2087:../button.c   ****     {
2088:../button.c   ****         // Hay valor: 0 con fondo negro (seleccionable para borrar)
2089:../button.c   ****         LcdClrRect(x + 1, y + 1, x + CANDIDATOS_CELDA_SIZE - 1, y + CANDIDATOS_CELDA_SIZE - 1, BLAC
 9668              		.loc 1 2089 0
 9669 4568 28301BE5 		ldr	r3, [fp, #-40]
 9670 456c 0338A0E1 		mov	r3, r3, asl #16
 9671 4570 2338A0E1 		mov	r3, r3, lsr #16
 9672 4574 013083E2 		add	r3, r3, #1
 9673 4578 0338A0E1 		mov	r3, r3, asl #16
 9674 457c 2338A0E1 		mov	r3, r3, lsr #16
 9675 4580 0338A0E1 		mov	r3, r3, asl #16
 9676 4584 2308A0E1 		mov	r0, r3, lsr #16
 9677 4588 2C301BE5 		ldr	r3, [fp, #-44]
 9678 458c 0338A0E1 		mov	r3, r3, asl #16
 9679 4590 2338A0E1 		mov	r3, r3, lsr #16
 9680 4594 013083E2 		add	r3, r3, #1
 9681 4598 0338A0E1 		mov	r3, r3, asl #16
 9682 459c 2338A0E1 		mov	r3, r3, lsr #16
 9683 45a0 0338A0E1 		mov	r3, r3, asl #16
 9684 45a4 2318A0E1 		mov	r1, r3, lsr #16
 9685 45a8 28301BE5 		ldr	r3, [fp, #-40]
 9686 45ac 0338A0E1 		mov	r3, r3, asl #16
 9687 45b0 2338A0E1 		mov	r3, r3, lsr #16
 9688 45b4 313083E2 		add	r3, r3, #49
 9689 45b8 0338A0E1 		mov	r3, r3, asl #16
 9690 45bc 2338A0E1 		mov	r3, r3, lsr #16
 9691 45c0 0338A0E1 		mov	r3, r3, asl #16
 9692 45c4 2328A0E1 		mov	r2, r3, lsr #16
 9693 45c8 2C301BE5 		ldr	r3, [fp, #-44]
 9694 45cc 0338A0E1 		mov	r3, r3, asl #16
 9695 45d0 2338A0E1 		mov	r3, r3, lsr #16
 9696 45d4 313083E2 		add	r3, r3, #49
 9697 45d8 0338A0E1 		mov	r3, r3, asl #16
 9698 45dc 2338A0E1 		mov	r3, r3, lsr #16
 9699 45e0 0338A0E1 		mov	r3, r3, asl #16
 9700 45e4 2338A0E1 		mov	r3, r3, lsr #16
 9701 45e8 0008A0E1 		mov	r0, r0, asl #16
 9702 45ec 4008A0E1 		mov	r0, r0, asr #16
 9703 45f0 0118A0E1 		mov	r1, r1, asl #16
 9704 45f4 4118A0E1 		mov	r1, r1, asr #16
 9705 45f8 0228A0E1 		mov	r2, r2, asl #16
 9706 45fc 4228A0E1 		mov	r2, r2, asr #16
 9707 4600 0338A0E1 		mov	r3, r3, asl #16
 9708 4604 4338A0E1 		mov	r3, r3, asr #16
 9709 4608 0FC0A0E3 		mov	ip, #15
 9710 460c 00C08DE5 		str	ip, [sp, #0]
 9711 4610 FEFFFFEB 		bl	LcdClrRect
2090:../button.c   ****         Lcd_DspAscII8x16(txt_x, txt_y, WHITE, (INT8U *)str);
 9712              		.loc 1 2090 0
 9713 4614 3C301BE5 		ldr	r3, [fp, #-60]
 9714 4618 0338A0E1 		mov	r3, r3, asl #16
 9715 461c 2318A0E1 		mov	r1, r3, lsr #16
 9716 4620 40301BE5 		ldr	r3, [fp, #-64]
 9717 4624 0338A0E1 		mov	r3, r3, asl #16
 9718 4628 2328A0E1 		mov	r2, r3, lsr #16
 9719 462c 78304BE2 		sub	r3, fp, #120
 9720 4630 0100A0E1 		mov	r0, r1
 9721 4634 0210A0E1 		mov	r1, r2
 9722 4638 0020A0E3 		mov	r2, #0
 9723 463c FEFFFFEB 		bl	Lcd_DspAscII8x16
 9724 4640 350000EA 		b	.L358
 9725              	.L357:
2091:../button.c   ****     }
2092:../button.c   ****     else
2093:../button.c   ****     {
2094:../button.c   ****         // No hay valor: 0 sombreado (no seleccionable)
2095:../button.c   ****         LcdClrRect(x + 1, y + 1, x + CANDIDATOS_CELDA_SIZE - 1, y + CANDIDATOS_CELDA_SIZE - 1, DARK
 9726              		.loc 1 2095 0
 9727 4644 28301BE5 		ldr	r3, [fp, #-40]
 9728 4648 0338A0E1 		mov	r3, r3, asl #16
 9729 464c 2338A0E1 		mov	r3, r3, lsr #16
 9730 4650 013083E2 		add	r3, r3, #1
 9731 4654 0338A0E1 		mov	r3, r3, asl #16
 9732 4658 2338A0E1 		mov	r3, r3, lsr #16
 9733 465c 0338A0E1 		mov	r3, r3, asl #16
 9734 4660 2308A0E1 		mov	r0, r3, lsr #16
 9735 4664 2C301BE5 		ldr	r3, [fp, #-44]
 9736 4668 0338A0E1 		mov	r3, r3, asl #16
 9737 466c 2338A0E1 		mov	r3, r3, lsr #16
 9738 4670 013083E2 		add	r3, r3, #1
 9739 4674 0338A0E1 		mov	r3, r3, asl #16
 9740 4678 2338A0E1 		mov	r3, r3, lsr #16
 9741 467c 0338A0E1 		mov	r3, r3, asl #16
 9742 4680 2318A0E1 		mov	r1, r3, lsr #16
 9743 4684 28301BE5 		ldr	r3, [fp, #-40]
 9744 4688 0338A0E1 		mov	r3, r3, asl #16
 9745 468c 2338A0E1 		mov	r3, r3, lsr #16
 9746 4690 313083E2 		add	r3, r3, #49
 9747 4694 0338A0E1 		mov	r3, r3, asl #16
 9748 4698 2338A0E1 		mov	r3, r3, lsr #16
 9749 469c 0338A0E1 		mov	r3, r3, asl #16
 9750 46a0 2328A0E1 		mov	r2, r3, lsr #16
 9751 46a4 2C301BE5 		ldr	r3, [fp, #-44]
 9752 46a8 0338A0E1 		mov	r3, r3, asl #16
 9753 46ac 2338A0E1 		mov	r3, r3, lsr #16
 9754 46b0 313083E2 		add	r3, r3, #49
 9755 46b4 0338A0E1 		mov	r3, r3, asl #16
 9756 46b8 2338A0E1 		mov	r3, r3, lsr #16
 9757 46bc 0338A0E1 		mov	r3, r3, asl #16
 9758 46c0 2338A0E1 		mov	r3, r3, lsr #16
 9759 46c4 0008A0E1 		mov	r0, r0, asl #16
 9760 46c8 4008A0E1 		mov	r0, r0, asr #16
 9761 46cc 0118A0E1 		mov	r1, r1, asl #16
 9762 46d0 4118A0E1 		mov	r1, r1, asr #16
 9763 46d4 0228A0E1 		mov	r2, r2, asl #16
 9764 46d8 4228A0E1 		mov	r2, r2, asr #16
 9765 46dc 0338A0E1 		mov	r3, r3, asl #16
 9766 46e0 4338A0E1 		mov	r3, r3, asr #16
 9767 46e4 0AC0A0E3 		mov	ip, #10
 9768 46e8 00C08DE5 		str	ip, [sp, #0]
 9769 46ec FEFFFFEB 		bl	LcdClrRect
2096:../button.c   ****         Lcd_DspAscII8x16(txt_x, txt_y, BLACK, (INT8U *)str);
 9770              		.loc 1 2096 0
 9771 46f0 3C301BE5 		ldr	r3, [fp, #-60]
 9772 46f4 0338A0E1 		mov	r3, r3, asl #16
 9773 46f8 2318A0E1 		mov	r1, r3, lsr #16
 9774 46fc 40301BE5 		ldr	r3, [fp, #-64]
 9775 4700 0338A0E1 		mov	r3, r3, asl #16
 9776 4704 2328A0E1 		mov	r2, r3, lsr #16
 9777 4708 78304BE2 		sub	r3, fp, #120
 9778 470c 0100A0E1 		mov	r0, r1
 9779 4710 0210A0E1 		mov	r1, r2
 9780 4714 0F20A0E3 		mov	r2, #15
 9781 4718 FEFFFFEB 		bl	Lcd_DspAscII8x16
 9782              	.L358:
2097:../button.c   ****     }
2098:../button.c   **** 
2099:../button.c   ****     // Añadir texto explicativo abajo a la izquierda
2100:../button.c   ****     char texto_ayuda[20];
2101:../button.c   ****     texto_ayuda[0] = 'f';
 9783              		.loc 1 2101 0
 9784 471c 6630A0E3 		mov	r3, #102
 9785 4720 8C304BE5 		strb	r3, [fp, #-140]
2102:../button.c   ****     texto_ayuda[1] = 'o';
 9786              		.loc 1 2102 0
 9787 4724 6F30A0E3 		mov	r3, #111
 9788 4728 8B304BE5 		strb	r3, [fp, #-139]
2103:../button.c   ****     texto_ayuda[2] = 'n';
 9789              		.loc 1 2103 0
 9790 472c 6E30A0E3 		mov	r3, #110
 9791 4730 8A304BE5 		strb	r3, [fp, #-138]
2104:../button.c   ****     texto_ayuda[3] = 'd';
 9792              		.loc 1 2104 0
 9793 4734 6430A0E3 		mov	r3, #100
 9794 4738 89304BE5 		strb	r3, [fp, #-137]
2105:../button.c   ****     texto_ayuda[4] = 'o';
 9795              		.loc 1 2105 0
 9796 473c 6F30A0E3 		mov	r3, #111
 9797 4740 88304BE5 		strb	r3, [fp, #-136]
2106:../button.c   ****     texto_ayuda[5] = ' ';
 9798              		.loc 1 2106 0
 9799 4744 2030A0E3 		mov	r3, #32
 9800 4748 87304BE5 		strb	r3, [fp, #-135]
2107:../button.c   ****     texto_ayuda[6] = 'n';
 9801              		.loc 1 2107 0
 9802 474c 6E30A0E3 		mov	r3, #110
 9803 4750 86304BE5 		strb	r3, [fp, #-134]
2108:../button.c   ****     texto_ayuda[7] = 'e';
 9804              		.loc 1 2108 0
 9805 4754 6530A0E3 		mov	r3, #101
 9806 4758 85304BE5 		strb	r3, [fp, #-133]
2109:../button.c   ****     texto_ayuda[8] = 'g';
 9807              		.loc 1 2109 0
 9808 475c 6730A0E3 		mov	r3, #103
 9809 4760 84304BE5 		strb	r3, [fp, #-132]
2110:../button.c   ****     texto_ayuda[9] = 'r';
 9810              		.loc 1 2110 0
 9811 4764 7230A0E3 		mov	r3, #114
 9812 4768 83304BE5 		strb	r3, [fp, #-131]
2111:../button.c   ****     texto_ayuda[10] = 'o';
 9813              		.loc 1 2111 0
 9814 476c 6F30A0E3 		mov	r3, #111
 9815 4770 82304BE5 		strb	r3, [fp, #-130]
2112:../button.c   ****     texto_ayuda[11] = ' ';
 9816              		.loc 1 2112 0
 9817 4774 2030A0E3 		mov	r3, #32
 9818 4778 81304BE5 		strb	r3, [fp, #-129]
2113:../button.c   ****     texto_ayuda[12] = '=';
 9819              		.loc 1 2113 0
 9820 477c 3D30A0E3 		mov	r3, #61
 9821 4780 80304BE5 		strb	r3, [fp, #-128]
2114:../button.c   ****     texto_ayuda[13] = ' ';
 9822              		.loc 1 2114 0
 9823 4784 2030A0E3 		mov	r3, #32
 9824 4788 7F304BE5 		strb	r3, [fp, #-127]
2115:../button.c   ****     texto_ayuda[14] = 'c';
 9825              		.loc 1 2115 0
 9826 478c 6330A0E3 		mov	r3, #99
 9827 4790 7E304BE5 		strb	r3, [fp, #-126]
2116:../button.c   ****     texto_ayuda[15] = 'a';
 9828              		.loc 1 2116 0
 9829 4794 6130A0E3 		mov	r3, #97
 9830 4798 7D304BE5 		strb	r3, [fp, #-125]
2117:../button.c   ****     texto_ayuda[16] = 'n';
 9831              		.loc 1 2117 0
 9832 479c 6E30A0E3 		mov	r3, #110
 9833 47a0 7C304BE5 		strb	r3, [fp, #-124]
2118:../button.c   ****     texto_ayuda[17] = 'd';
 9834              		.loc 1 2118 0
 9835 47a4 6430A0E3 		mov	r3, #100
 9836 47a8 7B304BE5 		strb	r3, [fp, #-123]
2119:../button.c   ****     texto_ayuda[18] = '.';
 9837              		.loc 1 2119 0
 9838 47ac 2E30A0E3 		mov	r3, #46
 9839 47b0 7A304BE5 		strb	r3, [fp, #-122]
2120:../button.c   ****     texto_ayuda[19] = '\0';
 9840              		.loc 1 2120 0
 9841 47b4 0030A0E3 		mov	r3, #0
 9842 47b8 79304BE5 		strb	r3, [fp, #-121]
2121:../button.c   ****     Lcd_DspAscII6x8(10, 220, DARKGRAY, (INT8U *)texto_ayuda);
 9843              		.loc 1 2121 0
 9844 47bc 8C304BE2 		sub	r3, fp, #140
 9845 47c0 0A00A0E3 		mov	r0, #10
 9846 47c4 DC10A0E3 		mov	r1, #220
 9847 47c8 0A20A0E3 		mov	r2, #10
 9848 47cc FEFFFFEB 		bl	Lcd_DspAscII6x8
2122:../button.c   **** 
2123:../button.c   ****     Lcd_Dma_Trans();
 9849              		.loc 1 2123 0
 9850 47d0 FEFFFFEB 		bl	Lcd_Dma_Trans
2124:../button.c   **** }
 9851              		.loc 1 2124 0
 9852 47d4 0CD04BE2 		sub	sp, fp, #12
 9853 47d8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 9854 47dc 1EFF2FE1 		bx	lr
 9855              	.L360:
 9856              		.align	2
 9857              	.L359:
 9858 47e0 00000000 		.word	cuadricula_C_C
 9859 47e4 56555555 		.word	1431655766
 9860              		.cfi_endproc
 9861              	.LFE35:
 9863              		.align	2
 9865              	procesar_toque_candidatos:
 9866              	.LFB36:
2125:../button.c   **** 
2126:../button.c   **** /**
2127:../button.c   ****  * Procesa un toque en la pantalla de candidatos
2128:../button.c   ****  * @param x: coordenada X del toque
2129:../button.c   ****  * @param y: coordenada Y del toque
2130:../button.c   ****  * @return: número seleccionado (0-9), -1 si toque inválido
2131:../button.c   ****  */
2132:../button.c   **** static int procesar_toque_candidatos(int x, int y)
2133:../button.c   **** {
 9867              		.loc 1 2133 0
 9868              		.cfi_startproc
 9869              		@ Function supports interworking.
 9870              		@ args = 0, pretend = 0, frame = 48
 9871              		@ frame_needed = 1, uses_anonymous_args = 0
 9872 47e8 0DC0A0E1 		mov	ip, sp
 9873              	.LCFI68:
 9874              		.cfi_def_cfa_register 12
 9875 47ec 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 9876 47f0 04B04CE2 		sub	fp, ip, #4
 9877              		.cfi_offset 14, -8
 9878              		.cfi_offset 13, -12
 9879              		.cfi_offset 11, -16
 9880              	.LCFI69:
 9881              		.cfi_def_cfa 11, 4
 9882 47f4 30D04DE2 		sub	sp, sp, #48
 9883 47f8 38000BE5 		str	r0, [fp, #-56]
 9884 47fc 3C100BE5 		str	r1, [fp, #-60]
2134:../button.c   ****     // Verificar si toca en la zona de números 1-9 (cuadrícula 3x3)
2135:../button.c   ****     int x_rel = x - CANDIDATOS_X_INI;
 9885              		.loc 1 2135 0
 9886 4800 38301BE5 		ldr	r3, [fp, #-56]
 9887 4804 643043E2 		sub	r3, r3, #100
 9888 4808 10300BE5 		str	r3, [fp, #-16]
2136:../button.c   ****     int y_rel = y - CANDIDATOS_Y_INI;
 9889              		.loc 1 2136 0
 9890 480c 3C301BE5 		ldr	r3, [fp, #-60]
 9891 4810 1E3043E2 		sub	r3, r3, #30
 9892 4814 14300BE5 		str	r3, [fp, #-20]
2137:../button.c   **** 
2138:../button.c   ****     if (x_rel >= 0 && x_rel < (3 * CANDIDATOS_CELDA_SIZE) &&
 9893              		.loc 1 2138 0
 9894 4818 10301BE5 		ldr	r3, [fp, #-16]
 9895 481c 000053E3 		cmp	r3, #0
 9896 4820 2C0000BA 		blt	.L362
 9897              		.loc 1 2138 0 is_stmt 0 discriminator 1
 9898 4824 10301BE5 		ldr	r3, [fp, #-16]
 9899 4828 950053E3 		cmp	r3, #149
 9900 482c 290000CA 		bgt	.L362
 9901 4830 14301BE5 		ldr	r3, [fp, #-20]
 9902 4834 000053E3 		cmp	r3, #0
 9903 4838 260000BA 		blt	.L362
2139:../button.c   ****         y_rel >= 0 && y_rel < (3 * CANDIDATOS_CELDA_SIZE))
 9904              		.loc 1 2139 0 is_stmt 1
 9905 483c 14301BE5 		ldr	r3, [fp, #-20]
 9906 4840 950053E3 		cmp	r3, #149
 9907 4844 230000CA 		bgt	.L362
 9908              	.LBB29:
2140:../button.c   ****     {
2141:../button.c   ****         int col_num = x_rel / CANDIDATOS_CELDA_SIZE;
 9909              		.loc 1 2141 0
 9910 4848 10301BE5 		ldr	r3, [fp, #-16]
 9911 484c 44219FE5 		ldr	r2, .L367
 9912 4850 9312C2E0 		smull	r1, r2, r3, r2
 9913 4854 4222A0E1 		mov	r2, r2, asr #4
 9914 4858 C33FA0E1 		mov	r3, r3, asr #31
 9915 485c 023063E0 		rsb	r3, r3, r2
 9916 4860 18300BE5 		str	r3, [fp, #-24]
2142:../button.c   ****         int fila_num = y_rel / CANDIDATOS_CELDA_SIZE;
 9917              		.loc 1 2142 0
 9918 4864 14301BE5 		ldr	r3, [fp, #-20]
 9919 4868 28219FE5 		ldr	r2, .L367
 9920 486c 9312C2E0 		smull	r1, r2, r3, r2
 9921 4870 4222A0E1 		mov	r2, r2, asr #4
 9922 4874 C33FA0E1 		mov	r3, r3, asr #31
 9923 4878 023063E0 		rsb	r3, r3, r2
 9924 487c 1C300BE5 		str	r3, [fp, #-28]
2143:../button.c   **** 
2144:../button.c   ****         if (col_num >= 0 && col_num < 3 && fila_num >= 0 && fila_num < 3)
 9925              		.loc 1 2144 0
 9926 4880 18301BE5 		ldr	r3, [fp, #-24]
 9927 4884 000053E3 		cmp	r3, #0
 9928 4888 120000BA 		blt	.L362
 9929              		.loc 1 2144 0 is_stmt 0 discriminator 1
 9930 488c 18301BE5 		ldr	r3, [fp, #-24]
 9931 4890 020053E3 		cmp	r3, #2
 9932 4894 0F0000CA 		bgt	.L362
 9933 4898 1C301BE5 		ldr	r3, [fp, #-28]
 9934 489c 000053E3 		cmp	r3, #0
 9935 48a0 0C0000BA 		blt	.L362
 9936 48a4 1C301BE5 		ldr	r3, [fp, #-28]
 9937 48a8 020053E3 		cmp	r3, #2
 9938 48ac 090000CA 		bgt	.L362
 9939              	.LBB30:
2145:../button.c   ****         {
2146:../button.c   ****             int numero = fila_num * 3 + col_num + 1; // 1-9
 9940              		.loc 1 2146 0 is_stmt 1
 9941 48b0 1C201BE5 		ldr	r2, [fp, #-28]
 9942 48b4 0230A0E1 		mov	r3, r2
 9943 48b8 8330A0E1 		mov	r3, r3, asl #1
 9944 48bc 022083E0 		add	r2, r3, r2
 9945 48c0 18301BE5 		ldr	r3, [fp, #-24]
 9946 48c4 033082E0 		add	r3, r2, r3
 9947 48c8 013083E2 		add	r3, r3, #1
 9948 48cc 20300BE5 		str	r3, [fp, #-32]
2147:../button.c   ****             return numero;
 9949              		.loc 1 2147 0
 9950 48d0 20301BE5 		ldr	r3, [fp, #-32]
 9951 48d4 2B0000EA 		b	.L363
 9952              	.L362:
 9953              	.LBE30:
 9954              	.LBE29:
2148:../button.c   ****         }
2149:../button.c   ****     }
2150:../button.c   **** 
2151:../button.c   ****     // Verificar si toca el 0 (fila inferior, centrado)
2152:../button.c   ****     int x0_min = CANDIDATOS_X_INI + CANDIDATOS_CELDA_SIZE;
 9955              		.loc 1 2152 0
 9956 48d8 9630A0E3 		mov	r3, #150
 9957 48dc 24300BE5 		str	r3, [fp, #-36]
2153:../button.c   ****     int x0_max = x0_min + CANDIDATOS_CELDA_SIZE;
 9958              		.loc 1 2153 0
 9959 48e0 24301BE5 		ldr	r3, [fp, #-36]
 9960 48e4 323083E2 		add	r3, r3, #50
 9961 48e8 28300BE5 		str	r3, [fp, #-40]
2154:../button.c   ****     int y0_min = CANDIDATOS_Y_INI + 3 * CANDIDATOS_CELDA_SIZE;
 9962              		.loc 1 2154 0
 9963 48ec B430A0E3 		mov	r3, #180
 9964 48f0 2C300BE5 		str	r3, [fp, #-44]
2155:../button.c   ****     int y0_max = y0_min + CANDIDATOS_CELDA_SIZE;
 9965              		.loc 1 2155 0
 9966 48f4 2C301BE5 		ldr	r3, [fp, #-44]
 9967 48f8 323083E2 		add	r3, r3, #50
 9968 48fc 30300BE5 		str	r3, [fp, #-48]
2156:../button.c   **** 
2157:../button.c   ****     if (x >= x0_min && x < x0_max && y >= y0_min && y < y0_max)
 9969              		.loc 1 2157 0
 9970 4900 38201BE5 		ldr	r2, [fp, #-56]
 9971 4904 24301BE5 		ldr	r3, [fp, #-36]
 9972 4908 030052E1 		cmp	r2, r3
 9973 490c 0D0000BA 		blt	.L364
 9974              		.loc 1 2157 0 is_stmt 0 discriminator 1
 9975 4910 38201BE5 		ldr	r2, [fp, #-56]
 9976 4914 28301BE5 		ldr	r3, [fp, #-40]
 9977 4918 030052E1 		cmp	r2, r3
 9978 491c 090000AA 		bge	.L364
 9979 4920 3C201BE5 		ldr	r2, [fp, #-60]
 9980 4924 2C301BE5 		ldr	r3, [fp, #-44]
 9981 4928 030052E1 		cmp	r2, r3
 9982 492c 050000BA 		blt	.L364
 9983 4930 3C201BE5 		ldr	r2, [fp, #-60]
 9984 4934 30301BE5 		ldr	r3, [fp, #-48]
 9985 4938 030052E1 		cmp	r2, r3
 9986 493c 010000AA 		bge	.L364
2158:../button.c   ****     {
2159:../button.c   ****         return 0;
 9987              		.loc 1 2159 0 is_stmt 1
 9988 4940 0030A0E3 		mov	r3, #0
 9989 4944 0F0000EA 		b	.L363
 9990              	.L364:
2160:../button.c   ****     }
2161:../button.c   **** 
2162:../button.c   ****     // Si toca muy fuera de la zona de candidatos, cancelar
2163:../button.c   ****     if (x < CANDIDATOS_X_INI - 20 || x > CANDIDATOS_X_INI + 3 * CANDIDATOS_CELDA_SIZE + 20 ||
 9991              		.loc 1 2163 0
 9992 4948 38301BE5 		ldr	r3, [fp, #-56]
 9993 494c 4F0053E3 		cmp	r3, #79
 9994 4950 090000DA 		ble	.L365
 9995              		.loc 1 2163 0 is_stmt 0 discriminator 1
 9996 4954 38201BE5 		ldr	r2, [fp, #-56]
 9997 4958 3C309FE5 		ldr	r3, .L367+4
 9998 495c 030052E1 		cmp	r2, r3
 9999 4960 050000CA 		bgt	.L365
 10000 4964 3C301BE5 		ldr	r3, [fp, #-60]
 10001 4968 090053E3 		cmp	r3, #9
 10002 496c 020000DA 		ble	.L365
2164:../button.c   ****         y < CANDIDATOS_Y_INI - 20 || y > CANDIDATOS_Y_INI + 4 * CANDIDATOS_CELDA_SIZE + 20)
 10003              		.loc 1 2164 0 is_stmt 1
 10004 4970 3C301BE5 		ldr	r3, [fp, #-60]
 10005 4974 FA0053E3 		cmp	r3, #250
 10006 4978 010000DA 		ble	.L366
 10007              	.L365:
2165:../button.c   ****     {
2166:../button.c   ****         return -2; // Cancelar
 10008              		.loc 1 2166 0
 10009 497c 0130E0E3 		mvn	r3, #1
 10010 4980 000000EA 		b	.L363
 10011              	.L366:
2167:../button.c   ****     }
2168:../button.c   **** 
2169:../button.c   ****     return -1; // Toque inválido dentro de la zona
 10012              		.loc 1 2169 0
 10013 4984 0030E0E3 		mvn	r3, #0
 10014              	.L363:
2170:../button.c   **** }
 10015              		.loc 1 2170 0
 10016 4988 0300A0E1 		mov	r0, r3
 10017 498c 0CD04BE2 		sub	sp, fp, #12
 10018 4990 00689DE8 		ldmfd	sp, {fp, sp, lr}
 10019 4994 1EFF2FE1 		bx	lr
 10020              	.L368:
 10021              		.align	2
 10022              	.L367:
 10023 4998 1F85EB51 		.word	1374389535
 10024 499c 0E010000 		.word	270
 10025              		.cfi_endproc
 10026              	.LFE36:
 10028              		.align	2
 10030              	es_numero_candidato:
 10031              	.LFB37:
2171:../button.c   **** 
2172:../button.c   **** /**
2173:../button.c   ****  * Verifica si un número es candidato válido para una celda
2174:../button.c   ****  * @param celda: la celda a verificar
2175:../button.c   ****  * @param numero: número a verificar (1-9)
2176:../button.c   ****  * @return: 1 si es candidato válido, 0 si no lo es
2177:../button.c   ****  */
2178:../button.c   **** static uint8_t es_numero_candidato(CELDA celda, uint8_t numero)
2179:../button.c   **** {
 10032              		.loc 1 2179 0
 10033              		.cfi_startproc
 10034              		@ Function supports interworking.
 10035              		@ args = 0, pretend = 0, frame = 16
 10036              		@ frame_needed = 1, uses_anonymous_args = 0
 10037 49a0 0DC0A0E1 		mov	ip, sp
 10038              	.LCFI70:
 10039              		.cfi_def_cfa_register 12
 10040 49a4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 10041 49a8 04B04CE2 		sub	fp, ip, #4
 10042              		.cfi_offset 14, -8
 10043              		.cfi_offset 13, -12
 10044              		.cfi_offset 11, -16
 10045              	.LCFI71:
 10046              		.cfi_def_cfa 11, 4
 10047 49ac 10D04DE2 		sub	sp, sp, #16
 10048 49b0 0020A0E1 		mov	r2, r0
 10049 49b4 0130A0E1 		mov	r3, r1
 10050 49b8 B6214BE1 		strh	r2, [fp, #-22]	@ movhi
 10051 49bc 17304BE5 		strb	r3, [fp, #-23]
2180:../button.c   ****     if (numero < 1 || numero > 9)
 10052              		.loc 1 2180 0
 10053 49c0 17305BE5 		ldrb	r3, [fp, #-23]	@ zero_extendqisi2
 10054 49c4 000053E3 		cmp	r3, #0
 10055 49c8 0200000A 		beq	.L370
 10056              		.loc 1 2180 0 is_stmt 0 discriminator 1
 10057 49cc 17305BE5 		ldrb	r3, [fp, #-23]	@ zero_extendqisi2
 10058 49d0 090053E3 		cmp	r3, #9
 10059 49d4 0100009A 		bls	.L371
 10060              	.L370:
2181:../button.c   ****         return 0;
 10061              		.loc 1 2181 0 is_stmt 1
 10062 49d8 0030A0E3 		mov	r3, #0
 10063 49dc 0D0000EA 		b	.L372
 10064              	.L371:
2182:../button.c   **** 
2183:../button.c   ****     // Los candidatos están en bits [15:7]
2184:../button.c   ****     // bit = 0 significa candidato válido, bit = 1 significa NO candidato
2185:../button.c   ****     uint16_t bit_candidato = 1u << (BIT_CANDIDATOS + (numero - 1));
 10065              		.loc 1 2185 0
 10066 49e0 17305BE5 		ldrb	r3, [fp, #-23]	@ zero_extendqisi2
 10067 49e4 063083E2 		add	r3, r3, #6
 10068 49e8 0120A0E3 		mov	r2, #1
 10069 49ec 1233A0E1 		mov	r3, r2, asl r3
 10070 49f0 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
2186:../button.c   ****     return (celda & bit_candidato) ? 0 : 1; // Invertir la lógica
 10071              		.loc 1 2186 0
 10072 49f4 B6215BE1 		ldrh	r2, [fp, #-22]	@ movhi
 10073 49f8 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 10074 49fc 033002E0 		and	r3, r2, r3
 10075 4a00 0338A0E1 		mov	r3, r3, asl #16
 10076 4a04 2338A0E1 		mov	r3, r3, lsr #16
 10077 4a08 000053E3 		cmp	r3, #0
 10078 4a0c 0030A013 		movne	r3, #0
 10079 4a10 0130A003 		moveq	r3, #1
 10080 4a14 FF3003E2 		and	r3, r3, #255
 10081              	.L372:
2187:../button.c   **** }
 10082              		.loc 1 2187 0
 10083 4a18 0300A0E1 		mov	r0, r3
 10084 4a1c 0CD04BE2 		sub	sp, fp, #12
 10085 4a20 00689DE8 		ldmfd	sp, {fp, sp, lr}
 10086 4a24 1EFF2FE1 		bx	lr
 10087              		.cfi_endproc
 10088              	.LFE37:
 10090              		.align	2
 10092              	dibujar_flecha_salida:
 10093              	.LFB38:
2188:../button.c   **** 
2189:../button.c   **** /**
2190:../button.c   ****  * Dibuja una flecha "<" para salir del zoom
2191:../button.c   ****  */
2192:../button.c   **** static void dibujar_flecha_salida(void)
2193:../button.c   **** {
 10094              		.loc 1 2193 0
 10095              		.cfi_startproc
 10096              		@ Function supports interworking.
 10097              		@ args = 0, pretend = 0, frame = 8
 10098              		@ frame_needed = 1, uses_anonymous_args = 0
 10099 4a28 0DC0A0E1 		mov	ip, sp
 10100              	.LCFI72:
 10101              		.cfi_def_cfa_register 12
 10102 4a2c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 10103 4a30 04B04CE2 		sub	fp, ip, #4
 10104              		.cfi_offset 14, -8
 10105              		.cfi_offset 13, -12
 10106              		.cfi_offset 11, -16
 10107              	.LCFI73:
 10108              		.cfi_def_cfa 11, 4
 10109 4a34 10D04DE2 		sub	sp, sp, #16
2194:../button.c   ****     // Dibujar un rectángulo de fondo para la flecha
2195:../button.c   ****     Lcd_Draw_Box(FLECHA_X, FLECHA_Y, FLECHA_X + FLECHA_WIDTH, FLECHA_Y + FLECHA_HEIGHT, BLACK);
 10110              		.loc 1 2195 0
 10111 4a38 0F30A0E3 		mov	r3, #15
 10112 4a3c 00308DE5 		str	r3, [sp, #0]
 10113 4a40 1400A0E3 		mov	r0, #20
 10114 4a44 3210A0E3 		mov	r1, #50
 10115 4a48 3220A0E3 		mov	r2, #50
 10116 4a4c 4630A0E3 		mov	r3, #70
 10117 4a50 FEFFFFEB 		bl	Lcd_Draw_Box
2196:../button.c   **** 
2197:../button.c   ****     // Rellenar el fondo con color blanco
2198:../button.c   ****     LcdClrRect(FLECHA_X + 1, FLECHA_Y + 1, FLECHA_X + FLECHA_WIDTH - 1, FLECHA_Y + FLECHA_HEIGHT - 
 10118              		.loc 1 2198 0
 10119 4a54 0030A0E3 		mov	r3, #0
 10120 4a58 00308DE5 		str	r3, [sp, #0]
 10121 4a5c 1500A0E3 		mov	r0, #21
 10122 4a60 3310A0E3 		mov	r1, #51
 10123 4a64 3120A0E3 		mov	r2, #49
 10124 4a68 4530A0E3 		mov	r3, #69
 10125 4a6c FEFFFFEB 		bl	LcdClrRect
2199:../button.c   **** 
2200:../button.c   ****     // Dibujar la flecha "<" usando líneas
2201:../button.c   ****     int centro_x = FLECHA_X + FLECHA_WIDTH / 2;
 10126              		.loc 1 2201 0
 10127 4a70 2330A0E3 		mov	r3, #35
 10128 4a74 10300BE5 		str	r3, [fp, #-16]
2202:../button.c   ****     int centro_y = FLECHA_Y + FLECHA_HEIGHT / 2;
 10129              		.loc 1 2202 0
 10130 4a78 3C30A0E3 		mov	r3, #60
 10131 4a7c 14300BE5 		str	r3, [fp, #-20]
2203:../button.c   **** 
2204:../button.c   ****     // Línea diagonal superior de la flecha (de centro hacia arriba-izquierda)
2205:../button.c   ****     Lcd_Draw_Line(centro_x + 3, centro_y - 6, centro_x - 3, centro_y, BLACK, 1);
 10132              		.loc 1 2205 0
 10133 4a80 10301BE5 		ldr	r3, [fp, #-16]
 10134 4a84 0338A0E1 		mov	r3, r3, asl #16
 10135 4a88 2338A0E1 		mov	r3, r3, lsr #16
 10136 4a8c 033083E2 		add	r3, r3, #3
 10137 4a90 0338A0E1 		mov	r3, r3, asl #16
 10138 4a94 2338A0E1 		mov	r3, r3, lsr #16
 10139 4a98 0338A0E1 		mov	r3, r3, asl #16
 10140 4a9c 2308A0E1 		mov	r0, r3, lsr #16
 10141 4aa0 14301BE5 		ldr	r3, [fp, #-20]
 10142 4aa4 0338A0E1 		mov	r3, r3, asl #16
 10143 4aa8 2338A0E1 		mov	r3, r3, lsr #16
 10144 4aac 063043E2 		sub	r3, r3, #6
 10145 4ab0 0338A0E1 		mov	r3, r3, asl #16
 10146 4ab4 2338A0E1 		mov	r3, r3, lsr #16
 10147 4ab8 0338A0E1 		mov	r3, r3, asl #16
 10148 4abc 2318A0E1 		mov	r1, r3, lsr #16
 10149 4ac0 10301BE5 		ldr	r3, [fp, #-16]
 10150 4ac4 0338A0E1 		mov	r3, r3, asl #16
 10151 4ac8 2338A0E1 		mov	r3, r3, lsr #16
 10152 4acc 033043E2 		sub	r3, r3, #3
 10153 4ad0 0338A0E1 		mov	r3, r3, asl #16
 10154 4ad4 2338A0E1 		mov	r3, r3, lsr #16
 10155 4ad8 0338A0E1 		mov	r3, r3, asl #16
 10156 4adc 2328A0E1 		mov	r2, r3, lsr #16
 10157 4ae0 14301BE5 		ldr	r3, [fp, #-20]
 10158 4ae4 0338A0E1 		mov	r3, r3, asl #16
 10159 4ae8 2338A0E1 		mov	r3, r3, lsr #16
 10160 4aec 0008A0E1 		mov	r0, r0, asl #16
 10161 4af0 4008A0E1 		mov	r0, r0, asr #16
 10162 4af4 0118A0E1 		mov	r1, r1, asl #16
 10163 4af8 4118A0E1 		mov	r1, r1, asr #16
 10164 4afc 0228A0E1 		mov	r2, r2, asl #16
 10165 4b00 4228A0E1 		mov	r2, r2, asr #16
 10166 4b04 0338A0E1 		mov	r3, r3, asl #16
 10167 4b08 4338A0E1 		mov	r3, r3, asr #16
 10168 4b0c 0FC0A0E3 		mov	ip, #15
 10169 4b10 00C08DE5 		str	ip, [sp, #0]
 10170 4b14 01C0A0E3 		mov	ip, #1
 10171 4b18 04C08DE5 		str	ip, [sp, #4]
 10172 4b1c FEFFFFEB 		bl	Lcd_Draw_Line
2206:../button.c   ****     Lcd_Draw_Line(centro_x + 2, centro_y - 6, centro_x - 4, centro_y, BLACK, 1);
 10173              		.loc 1 2206 0
 10174 4b20 10301BE5 		ldr	r3, [fp, #-16]
 10175 4b24 0338A0E1 		mov	r3, r3, asl #16
 10176 4b28 2338A0E1 		mov	r3, r3, lsr #16
 10177 4b2c 023083E2 		add	r3, r3, #2
 10178 4b30 0338A0E1 		mov	r3, r3, asl #16
 10179 4b34 2338A0E1 		mov	r3, r3, lsr #16
 10180 4b38 0338A0E1 		mov	r3, r3, asl #16
 10181 4b3c 2308A0E1 		mov	r0, r3, lsr #16
 10182 4b40 14301BE5 		ldr	r3, [fp, #-20]
 10183 4b44 0338A0E1 		mov	r3, r3, asl #16
 10184 4b48 2338A0E1 		mov	r3, r3, lsr #16
 10185 4b4c 063043E2 		sub	r3, r3, #6
 10186 4b50 0338A0E1 		mov	r3, r3, asl #16
 10187 4b54 2338A0E1 		mov	r3, r3, lsr #16
 10188 4b58 0338A0E1 		mov	r3, r3, asl #16
 10189 4b5c 2318A0E1 		mov	r1, r3, lsr #16
 10190 4b60 10301BE5 		ldr	r3, [fp, #-16]
 10191 4b64 0338A0E1 		mov	r3, r3, asl #16
 10192 4b68 2338A0E1 		mov	r3, r3, lsr #16
 10193 4b6c 043043E2 		sub	r3, r3, #4
 10194 4b70 0338A0E1 		mov	r3, r3, asl #16
 10195 4b74 2338A0E1 		mov	r3, r3, lsr #16
 10196 4b78 0338A0E1 		mov	r3, r3, asl #16
 10197 4b7c 2328A0E1 		mov	r2, r3, lsr #16
 10198 4b80 14301BE5 		ldr	r3, [fp, #-20]
 10199 4b84 0338A0E1 		mov	r3, r3, asl #16
 10200 4b88 2338A0E1 		mov	r3, r3, lsr #16
 10201 4b8c 0008A0E1 		mov	r0, r0, asl #16
 10202 4b90 4008A0E1 		mov	r0, r0, asr #16
 10203 4b94 0118A0E1 		mov	r1, r1, asl #16
 10204 4b98 4118A0E1 		mov	r1, r1, asr #16
 10205 4b9c 0228A0E1 		mov	r2, r2, asl #16
 10206 4ba0 4228A0E1 		mov	r2, r2, asr #16
 10207 4ba4 0338A0E1 		mov	r3, r3, asl #16
 10208 4ba8 4338A0E1 		mov	r3, r3, asr #16
 10209 4bac 0FC0A0E3 		mov	ip, #15
 10210 4bb0 00C08DE5 		str	ip, [sp, #0]
 10211 4bb4 01C0A0E3 		mov	ip, #1
 10212 4bb8 04C08DE5 		str	ip, [sp, #4]
 10213 4bbc FEFFFFEB 		bl	Lcd_Draw_Line
2207:../button.c   **** 
2208:../button.c   ****     // Línea diagonal inferior de la flecha (de centro hacia abajo-izquierda)
2209:../button.c   ****     Lcd_Draw_Line(centro_x + 3, centro_y + 6, centro_x - 3, centro_y, BLACK, 1);
 10214              		.loc 1 2209 0
 10215 4bc0 10301BE5 		ldr	r3, [fp, #-16]
 10216 4bc4 0338A0E1 		mov	r3, r3, asl #16
 10217 4bc8 2338A0E1 		mov	r3, r3, lsr #16
 10218 4bcc 033083E2 		add	r3, r3, #3
 10219 4bd0 0338A0E1 		mov	r3, r3, asl #16
 10220 4bd4 2338A0E1 		mov	r3, r3, lsr #16
 10221 4bd8 0338A0E1 		mov	r3, r3, asl #16
 10222 4bdc 2308A0E1 		mov	r0, r3, lsr #16
 10223 4be0 14301BE5 		ldr	r3, [fp, #-20]
 10224 4be4 0338A0E1 		mov	r3, r3, asl #16
 10225 4be8 2338A0E1 		mov	r3, r3, lsr #16
 10226 4bec 063083E2 		add	r3, r3, #6
 10227 4bf0 0338A0E1 		mov	r3, r3, asl #16
 10228 4bf4 2338A0E1 		mov	r3, r3, lsr #16
 10229 4bf8 0338A0E1 		mov	r3, r3, asl #16
 10230 4bfc 2318A0E1 		mov	r1, r3, lsr #16
 10231 4c00 10301BE5 		ldr	r3, [fp, #-16]
 10232 4c04 0338A0E1 		mov	r3, r3, asl #16
 10233 4c08 2338A0E1 		mov	r3, r3, lsr #16
 10234 4c0c 033043E2 		sub	r3, r3, #3
 10235 4c10 0338A0E1 		mov	r3, r3, asl #16
 10236 4c14 2338A0E1 		mov	r3, r3, lsr #16
 10237 4c18 0338A0E1 		mov	r3, r3, asl #16
 10238 4c1c 2328A0E1 		mov	r2, r3, lsr #16
 10239 4c20 14301BE5 		ldr	r3, [fp, #-20]
 10240 4c24 0338A0E1 		mov	r3, r3, asl #16
 10241 4c28 2338A0E1 		mov	r3, r3, lsr #16
 10242 4c2c 0008A0E1 		mov	r0, r0, asl #16
 10243 4c30 4008A0E1 		mov	r0, r0, asr #16
 10244 4c34 0118A0E1 		mov	r1, r1, asl #16
 10245 4c38 4118A0E1 		mov	r1, r1, asr #16
 10246 4c3c 0228A0E1 		mov	r2, r2, asl #16
 10247 4c40 4228A0E1 		mov	r2, r2, asr #16
 10248 4c44 0338A0E1 		mov	r3, r3, asl #16
 10249 4c48 4338A0E1 		mov	r3, r3, asr #16
 10250 4c4c 0FC0A0E3 		mov	ip, #15
 10251 4c50 00C08DE5 		str	ip, [sp, #0]
 10252 4c54 01C0A0E3 		mov	ip, #1
 10253 4c58 04C08DE5 		str	ip, [sp, #4]
 10254 4c5c FEFFFFEB 		bl	Lcd_Draw_Line
2210:../button.c   ****     Lcd_Draw_Line(centro_x + 2, centro_y + 6, centro_x - 4, centro_y, BLACK, 1);
 10255              		.loc 1 2210 0
 10256 4c60 10301BE5 		ldr	r3, [fp, #-16]
 10257 4c64 0338A0E1 		mov	r3, r3, asl #16
 10258 4c68 2338A0E1 		mov	r3, r3, lsr #16
 10259 4c6c 023083E2 		add	r3, r3, #2
 10260 4c70 0338A0E1 		mov	r3, r3, asl #16
 10261 4c74 2338A0E1 		mov	r3, r3, lsr #16
 10262 4c78 0338A0E1 		mov	r3, r3, asl #16
 10263 4c7c 2308A0E1 		mov	r0, r3, lsr #16
 10264 4c80 14301BE5 		ldr	r3, [fp, #-20]
 10265 4c84 0338A0E1 		mov	r3, r3, asl #16
 10266 4c88 2338A0E1 		mov	r3, r3, lsr #16
 10267 4c8c 063083E2 		add	r3, r3, #6
 10268 4c90 0338A0E1 		mov	r3, r3, asl #16
 10269 4c94 2338A0E1 		mov	r3, r3, lsr #16
 10270 4c98 0338A0E1 		mov	r3, r3, asl #16
 10271 4c9c 2318A0E1 		mov	r1, r3, lsr #16
 10272 4ca0 10301BE5 		ldr	r3, [fp, #-16]
 10273 4ca4 0338A0E1 		mov	r3, r3, asl #16
 10274 4ca8 2338A0E1 		mov	r3, r3, lsr #16
 10275 4cac 043043E2 		sub	r3, r3, #4
 10276 4cb0 0338A0E1 		mov	r3, r3, asl #16
 10277 4cb4 2338A0E1 		mov	r3, r3, lsr #16
 10278 4cb8 0338A0E1 		mov	r3, r3, asl #16
 10279 4cbc 2328A0E1 		mov	r2, r3, lsr #16
 10280 4cc0 14301BE5 		ldr	r3, [fp, #-20]
 10281 4cc4 0338A0E1 		mov	r3, r3, asl #16
 10282 4cc8 2338A0E1 		mov	r3, r3, lsr #16
 10283 4ccc 0008A0E1 		mov	r0, r0, asl #16
 10284 4cd0 4008A0E1 		mov	r0, r0, asr #16
 10285 4cd4 0118A0E1 		mov	r1, r1, asl #16
 10286 4cd8 4118A0E1 		mov	r1, r1, asr #16
 10287 4cdc 0228A0E1 		mov	r2, r2, asl #16
 10288 4ce0 4228A0E1 		mov	r2, r2, asr #16
 10289 4ce4 0338A0E1 		mov	r3, r3, asl #16
 10290 4ce8 4338A0E1 		mov	r3, r3, asr #16
 10291 4cec 0FC0A0E3 		mov	ip, #15
 10292 4cf0 00C08DE5 		str	ip, [sp, #0]
 10293 4cf4 01C0A0E3 		mov	ip, #1
 10294 4cf8 04C08DE5 		str	ip, [sp, #4]
 10295 4cfc FEFFFFEB 		bl	Lcd_Draw_Line
2211:../button.c   **** }
 10296              		.loc 1 2211 0
 10297 4d00 0CD04BE2 		sub	sp, fp, #12
 10298 4d04 00689DE8 		ldmfd	sp, {fp, sp, lr}
 10299 4d08 1EFF2FE1 		bx	lr
 10300              		.cfi_endproc
 10301              	.LFE38:
 10303              		.bss
 10304              		.align	2
 10305              	ultimo_segundo_mostrado.4538:
 10306 003c 00000000 		.space	4
 10307              		.section	.rodata
 10308 0087 00       		.align	2
 10311              	C.58.6312:
 10312 0088 FD000006 		.word	100663549
 10313 008c FB000006 		.word	100663547
 10314 0090 F7000006 		.word	100663543
 10315 0094 EF000006 		.word	100663535
 10316              		.align	2
 10319              	C.59.6317:
 10320 0098 07       		.byte	7
 10321 0099 0B       		.byte	11
 10322 009a 0D       		.byte	13
 10323 009b 0E       		.byte	14
 10324              		.bss
 10325              	columna_anterior.4494:
 10326 0040 00       		.space	1
 10327 0041 000000   		.data
 10330              	fila_anterior.4463:
 10331 0032 FF       		.byte	-1
 10332 0033 00       		.text
 10333              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 button.c
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3100   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3102   .text:00000000 celda_poner_valor
                            *COM*:00000004 CheckTSP
                            *COM*:00000004 oneTouch
                            *COM*:00000004 Vx
                            *COM*:00000004 Vy
                            *COM*:00000004 Xmax
                            *COM*:00000004 Ymax
                            *COM*:00000004 Xmin
                            *COM*:00000004 Ymin
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3156   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3157   .bss:00000000 modo_zoom
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3160   .bss:00000004 region_zoom_fila
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3163   .bss:00000008 region_zoom_col
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3166   .bss:0000000c celda_candidatos_fila
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3169   .bss:00000010 celda_candidatos_col
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3172   .data:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3175   .data:00000000 botones
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3197   .bss:00000014 estado_juego
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3202   .data:00000030 numero_actual
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3205   .bss:00000015 fila_seleccionada
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3207   .bss:00000016 columna_seleccionada
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3209   .bss:00000017 evento_boton_derecho
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3211   .bss:00000018 evento_boton_izquierdo
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3213   .bss:00000019 juego_iniciado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3216   .bss:0000001c contador_error
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3218   .bss:00000020 pantalla_inicial_mostrada
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3220   .bss:00000021 tablero_dibujado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3223   .rodata:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3226   .rodata:00000000 tecla_mapa
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3244   .bss:00000022 teclado_estado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3247   .bss:00000024 teclado_timer
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3252   .data:00000031 evento_teclado_digito
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3256   .bss:00000028 tiempo_inicio
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3259   .bss:0000002c tiempo_fin
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3262   .bss:00000030 resta
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3265   .bss:00000034 tiempo_inicio_partida
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3268   .bss:00000038 ultimo_tiempo_mostrado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3274   .text:00000068 Eint4567_ISR
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3432   .text:0000021c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3442   .text:00000238 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3445   .text:00000238 Eint1_ISR
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3510   .text:000002c0 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3519   .text:000002d8 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3522   .text:000002d8 Eint4567_init
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3616   .text:000003c0 eint1_init
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3599   .text:00000394 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3613   .text:000003c0 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3665   .text:00000428 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3674   .text:00000440 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3676   .text:00000440 procesar_rebote
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3715   .text:00000494 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3721   .text:000004a4 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4195   .text:00000948 leer_estado_boton
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3927   .text:000006fc $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3940   .text:00000724 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3943   .text:00000724 procesar_maquina_estados_botones
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3967   .text:00000744 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4293   .text:00000a04 estado_inicial
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:3974   .text:00000758 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4544   .text:00000ca4 estado_selec_fila
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6013   .text:00001c84 mostrar_tiempo_partida
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4941   .text:000010f0 estado_selec_columna
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5226   .text:0000143c estado_selec_valor
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5585   .text:00001884 estado_mostrando_error
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4048   .text:000007f8 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4053   .text:00000800 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4056   .text:00000800 procesar_teclado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4096   .text:0000084c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4102   .text:0000085c $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5799   .text:00001a78 teclado_escanear
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5761   .text:00001a40 teclado_soltado
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4184   .text:00000934 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4192   .text:00000948 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4241   .text:000009b4 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4246   .text:000009bc $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4249   .text:000009bc procesar_antirebote_botones
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6218   .text:00001ecc resetear_tiempo_partida
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7188   .text:000029cc limpiar_marcas_error
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5922   .text:00001b9c marcar_pistas_iniciales
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4522   .text:00000c60 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4542   .text:00000ca4 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6496   .text:00002174 mostrar_partida_terminada
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7506   .text:00002cbc limpiar_todos_eventos
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4923   .text:000010bc $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10330  .data:00000032 fila_anterior.4463
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:4939   .text:000010f0 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5211   .text:00001414 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10325  .bss:00000040 columna_anterior.4494
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5224   .text:0000143c $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7605   .text:00002db4 detectar_y_marcar_errores_celda
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7267   .text:00002a80 verificar_tablero_completo
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7353   .text:00002b34 finalizar_partida_completa
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5569   .text:00001858 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5583   .text:00001884 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7908   .text:00003144 limpiar_errores_visuales
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5713   .text:000019ec $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5723   .text:00001a08 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5725   .text:00001a08 teclado_leer_columnas
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5793   .text:00001a74 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5797   .text:00001a78 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5913   .text:00001b90 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10311  .rodata:00000088 C.58.6312
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10319  .rodata:00000098 C.59.6317
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:5919   .text:00001b9c $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6204   .text:00001ea8 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10305  .bss:0000003c ultimo_segundo_mostrado.4538
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6216   .text:00001ecc $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6250   .text:00001efc $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6269   .text:00001f04 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6271   .text:00001f04 mostrar_victoria_con_tiempo
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6473   .text:0000214c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6494   .text:00002174 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6698   .text:000023bc $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6711   .text:000023e4 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:6713   .text:000023e4 detectar_y_marcar_errores
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7181   .text:000029c4 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7186   .text:000029cc $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7261   .text:00002a7c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7265   .text:00002a80 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7347   .text:00002b30 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7351   .text:00002b34 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7492   .text:00002c98 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7504   .text:00002cbc $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7593   .text:00002d98 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7603   .text:00002db4 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7901   .text:0000313c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:7906   .text:00003144 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8003   .text:00003240 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8007   .text:00003244 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8010   .text:00003244 procesar_touchscreen_sudoku
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8939   .text:00003ca0 dibujar_zoom_region
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9865   .text:000047e8 procesar_toque_candidatos
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10030  .text:000049a0 es_numero_candidato
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8884   .text:00003c38 es_celda_pista
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9247   .text:00004034 dibujar_zoom_candidatos
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8864   .text:00003bfc $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8882   .text:00003c38 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8928   .text:00003c9c $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:8937   .text:00003ca0 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10092  .text:00004a28 dibujar_flecha_salida
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9237   .text:00004020 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9245   .text:00004034 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9858   .text:000047e0 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:9863   .text:000047e8 $a
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10023  .text:00004998 $d
C:\Users\jaime\AppData\Local\Temp\ccKpbdqm.s:10028  .text:000049a0 $a
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
timer2_count
cola_depuracion
D8Led_symbol
sudoku_mostrar_pantalla_inicial
candidatos_actualizar_c
sudoku_dibujar_tablero_completo
cuadricula_C_ARM
cuadricula_C_C
sudoku_resaltar_celda
celda_leer_valor
sudoku_actualizar_celda
Delay
candidatos_propagar_c
LcdClrRect
Lcd_DspAscII6x8
Lcd_Dma_Trans
Lcd_Clr
Lcd_DspAscII8x16
ts_read_calibrated
ts_draw_touch_point
sudoku_dibujar_marco_tablero
Lcd_Draw_Box
Lcd_Draw_Line
