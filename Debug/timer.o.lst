   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"timer.c"
  21              	.Ltext0:
  22              		.file 1 "../timer.c"
 1883              		.align	2
 1886              	switch_leds:
 1887 0000 00000000 		.space	4
 1888              		.text
 1889              		.align	2
 1890              		.global	timer_ISR
 1892              	timer_ISR:
 1893              	.LFB0:
   1:../timer.c    **** /*********************************************************************************************
   2:../timer.c    ****  * Fichero:		timer.c
   3:../timer.c    ****  * Autor:
   4:../timer.c    ****  * Descrip:		funciones de control del timer0 del s3c44b0x
   5:../timer.c    ****  * Version:
   6:../timer.c    ****  *********************************************************************************************/
   7:../timer.c    **** 
   8:../timer.c    **** #include "timer.h"
   9:../timer.c    **** #include "44b.h"
  10:../timer.c    **** #include "44blib.h"
  11:../timer.c    **** 
  12:../timer.c    **** volatile int switch_leds = 0;
  13:../timer.c    **** 
  14:../timer.c    **** void timer_ISR(void) __attribute__((interrupt("IRQ")));
  15:../timer.c    **** 
  16:../timer.c    **** void timer_ISR(void)
  17:../timer.c    **** {
 1894              		.loc 1 17 0
 1895              		.cfi_startproc
 1896              		@ Interrupt Service Routine.
 1897              		@ args = 0, pretend = 0, frame = 0
 1898              		@ frame_needed = 1, uses_anonymous_args = 0
 1899 0000 04C02DE5 		str	ip, [sp, #-4]!
 1900 0004 0DC0A0E1 		mov	ip, sp
 1901              	.LCFI0:
 1902              		.cfi_def_cfa_register 12
 1903 0008 0CD82DE9 		stmfd	sp!, {r2, r3, fp, ip, lr, pc}
 1904 000c 04B04CE2 		sub	fp, ip, #4
 1905              		.cfi_offset 14, -8
 1906              		.cfi_offset 13, -12
 1907              		.cfi_offset 11, -16
 1908              		.cfi_offset 3, -20
 1909              		.cfi_offset 2, -24
 1910              	.LCFI1:
 1911              		.cfi_def_cfa 11, 4
  18:../timer.c    **** 	switch_leds = 1;
 1912              		.loc 1 18 0
 1913 0010 28309FE5 		ldr	r3, .L2
 1914 0014 0120A0E3 		mov	r2, #1
 1915 0018 002083E5 		str	r2, [r3, #0]
  19:../timer.c    **** 
  20:../timer.c    **** 	/* borrar bit en I_ISPC para desactivar la solicitud de interrupci�n*/
  21:../timer.c    **** 	rI_ISPC |= BIT_TIMER0; // BIT_TIMER0 est� definido en 44b.h y pone un uno en el bit 13 que corre
 1916              		.loc 1 21 0
 1917 001c 20309FE5 		ldr	r3, .L2+4
 1918 0020 1C209FE5 		ldr	r2, .L2+4
 1919 0024 002092E5 		ldr	r2, [r2, #0]
 1920 0028 022A82E3 		orr	r2, r2, #8192
 1921 002c 002083E5 		str	r2, [r3, #0]
  22:../timer.c    **** }
 1922              		.loc 1 22 0
 1923 0030 14D04BE2 		sub	sp, fp, #20
 1924 0034 0C689DE8 		ldmfd	sp, {r2, r3, fp, sp, lr}
 1925 0038 04C09DE4 		ldmfd	sp!, {ip}
 1926 003c 04F05EE2 		subs	pc, lr, #4
 1927              	.L3:
 1928              		.align	2
 1929              	.L2:
 1930 0040 00000000 		.word	switch_leds
 1931 0044 2400E001 		.word	31457316
 1932              		.cfi_endproc
 1933              	.LFE0:
 1935              		.align	2
 1936              		.global	timer_init
 1938              	timer_init:
 1939              	.LFB1:
  23:../timer.c    **** 
  24:../timer.c    **** void timer_init(void)
  25:../timer.c    **** {
 1940              		.loc 1 25 0
 1941              		.cfi_startproc
 1942              		@ Function supports interworking.
 1943              		@ args = 0, pretend = 0, frame = 0
 1944              		@ frame_needed = 1, uses_anonymous_args = 0
 1945 0048 0DC0A0E1 		mov	ip, sp
 1946              	.LCFI2:
 1947              		.cfi_def_cfa_register 12
 1948 004c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 1949 0050 04B04CE2 		sub	fp, ip, #4
 1950              		.cfi_offset 14, -8
 1951              		.cfi_offset 13, -12
 1952              		.cfi_offset 11, -16
 1953              	.LCFI3:
 1954              		.cfi_def_cfa 11, 4
  26:../timer.c    **** 	/* Configuracion controlador de interrupciones */
  27:../timer.c    **** 	rINTMOD = 0x0;			  // Configura las lineas como de tipo IRQ
 1955              		.loc 1 27 0
 1956 0054 84309FE5 		ldr	r3, .L5
 1957 0058 0020A0E3 		mov	r2, #0
 1958 005c 002083E5 		str	r2, [r3, #0]
  28:../timer.c    **** 	rINTCON = 0x1;			  // Habilita int. vectorizadas y la linea IRQ (FIQ no)
 1959              		.loc 1 28 0
 1960 0060 1E36A0E3 		mov	r3, #31457280
 1961 0064 0120A0E3 		mov	r2, #1
 1962 0068 002083E5 		str	r2, [r3, #0]
  29:../timer.c    **** 	rINTMSK &= ~(BIT_TIMER0); // habilitamos en vector de mascaras de interrupcion el Timer0 (bits 26 
 1963              		.loc 1 29 0
 1964 006c 70309FE5 		ldr	r3, .L5+4
 1965 0070 6C209FE5 		ldr	r2, .L5+4
 1966 0074 002092E5 		ldr	r2, [r2, #0]
 1967 0078 022AC2E3 		bic	r2, r2, #8192
 1968 007c 002083E5 		str	r2, [r3, #0]
  30:../timer.c    **** 
  31:../timer.c    **** 	/* Establece la rutina de servicio para TIMER0 */
  32:../timer.c    **** 	pISR_TIMER0 = (unsigned)timer_ISR;
 1969              		.loc 1 32 0
 1970 0080 60309FE5 		ldr	r3, .L5+8
 1971 0084 60209FE5 		ldr	r2, .L5+12
 1972 0088 002083E5 		str	r2, [r3, #0]
  33:../timer.c    **** 
  34:../timer.c    **** 	/* Configura el Timer0 */
  35:../timer.c    **** 	rTCFG0 = 255;	 // ajusta el preescalado
 1973              		.loc 1 35 0
 1974 008c 5C309FE5 		ldr	r3, .L5+16
 1975 0090 FF20A0E3 		mov	r2, #255
 1976 0094 002083E5 		str	r2, [r3, #0]
  36:../timer.c    **** 	rTCFG1 = 0x0;	 // selecciona la entrada del mux que proporciona el reloj. La 00 corresponde a un d
 1977              		.loc 1 36 0
 1978 0098 54309FE5 		ldr	r3, .L5+20
 1979 009c 0020A0E3 		mov	r2, #0
 1980 00a0 002083E5 		str	r2, [r3, #0]
  37:../timer.c    **** 	rTCNTB0 = 65535; // valor inicial de cuenta (la cuenta es descendente)
 1981              		.loc 1 37 0
 1982 00a4 4C309FE5 		ldr	r3, .L5+24
 1983 00a8 4C209FE5 		ldr	r2, .L5+28
 1984 00ac 002083E5 		str	r2, [r3, #0]
  38:../timer.c    **** 	rTCMPB0 = 12800; // valor de comparaci�n
 1985              		.loc 1 38 0
 1986 00b0 48309FE5 		ldr	r3, .L5+32
 1987 00b4 322CA0E3 		mov	r2, #12800
 1988 00b8 002083E5 		str	r2, [r3, #0]
  39:../timer.c    **** 	/* establecer update=manual (bit 1) + inverter=on (�? ser� inverter off un cero en el bit 2 po
  40:../timer.c    **** 	rTCON = 0x2;
 1989              		.loc 1 40 0
 1990 00bc 40309FE5 		ldr	r3, .L5+36
 1991 00c0 0220A0E3 		mov	r2, #2
 1992 00c4 002083E5 		str	r2, [r3, #0]
  41:../timer.c    **** 	/* iniciar timer (bit 0) con auto-reload (bit 3)*/
  42:../timer.c    **** 	rTCON = 0x09;
 1993              		.loc 1 42 0
 1994 00c8 34309FE5 		ldr	r3, .L5+36
 1995 00cc 0920A0E3 		mov	r2, #9
 1996 00d0 002083E5 		str	r2, [r3, #0]
  43:../timer.c    **** }
 1997              		.loc 1 43 0
 1998 00d4 0CD04BE2 		sub	sp, fp, #12
 1999 00d8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2000 00dc 1EFF2FE1 		bx	lr
 2001              	.L6:
 2002              		.align	2
 2003              	.L5:
 2004 00e0 0800E001 		.word	31457288
 2005 00e4 0C00E001 		.word	31457292
 2006 00e8 54FF7F0C 		.word	209715028
 2007 00ec 00000000 		.word	timer_ISR
 2008 00f0 0000D501 		.word	30736384
 2009 00f4 0400D501 		.word	30736388
 2010 00f8 0C00D501 		.word	30736396
 2011 00fc FFFF0000 		.word	65535
 2012 0100 1000D501 		.word	30736400
 2013 0104 0800D501 		.word	30736392
 2014              		.cfi_endproc
 2015              	.LFE1:
 2017              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 timer.c
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1886   .bss:00000000 switch_leds
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1883   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1889   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1892   .text:00000000 timer_ISR
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1930   .text:00000040 $d
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1935   .text:00000048 $a
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:1938   .text:00000048 timer_init
C:\Users\jaime\AppData\Local\Temp\ccmR0X13.s:2004   .text:000000e0 $d
                     .debug_frame:00000010 $d

NO UNDEFINED SYMBOLS
