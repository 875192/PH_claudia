   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"cola.c"
  21              	.Ltext0:
  22              		.file 1 "../cola.c"
 2116              		.align	2
 2119              	cola_buffer:
 2120 0000 00000000 		.space	3072
 2120      00000000 
 2120      00000000 
 2120      00000000 
 2120      00000000 
 2121              		.bss
 2122              		.align	2
 2123              	cola_indice_esc:
 2124 0000 00000000 		.space	4
 2125              		.align	2
 2126              	cola_num_eventos:
 2127 0004 00000000 		.space	4
 2128              		.text
 2129              		.align	2
 2130              		.global	cola_init
 2132              	cola_init:
 2133              	.LFB0:
   1:../cola.c     **** /*
   2:../cola.c     ****  * Asignatura: Proyecto hardware
   3:../cola.c     ****  * Fecha: 10/11/2025
   4:../cola.c     ****  * Autores: Claudia Mateo Cuellar 871961
   5:../cola.c     ****  * Archivo: cola.c
   6:../cola.c     ****  * Descripción: Implementación de una cola circular de depuración para almacenar eventos con tim
   7:../cola.c     ****  */
   8:../cola.c     **** 
   9:../cola.c     **** #include "cola.h"
  10:../cola.c     **** #include "timer2.h"
  11:../cola.c     **** #include "eventos.h"
  12:../cola.c     **** #include "44b.h"
  13:../cola.c     **** 
  14:../cola.c     **** /**
  15:../cola.c     ****  * Buffer circular de eventos de depuración.
  16:../cola.c     ****  * Se coloca en la sección ".cola_debug" y alineado a 4 bytes.
  17:../cola.c     ****  */
  18:../cola.c     **** static evento_t cola_buffer[COLA_MAX_EVENTOS] __attribute__((section(".cola_debug"), aligned(4)));
  19:../cola.c     **** 
  20:../cola.c     **** /**
  21:../cola.c     ****  * Índice de escritura actual en la cola (siguiente posición libre).
  22:../cola.c     ****  */
  23:../cola.c     **** static volatile uint32_t cola_indice_esc = 0;
  24:../cola.c     **** 
  25:../cola.c     **** /**
  26:../cola.c     ****  * Número de eventos actualmente almacenados en la cola.
  27:../cola.c     ****  */
  28:../cola.c     **** static volatile uint32_t cola_num_eventos = 0;
  29:../cola.c     **** 
  30:../cola.c     **** /**
  31:../cola.c     ****  * Inicializa la cola de depuración.
  32:../cola.c     ****  * Comportamiento:
  33:../cola.c     ****  *  - Marca todos los eventos del buffer a cero.
  34:../cola.c     ****  *  - Resetea los índices internos.
  35:../cola.c     ****  */
  36:../cola.c     **** void cola_init(void)
  37:../cola.c     **** {
 2134              		.loc 1 37 0
 2135              		.cfi_startproc
 2136              		@ Function supports interworking.
 2137              		@ args = 0, pretend = 0, frame = 8
 2138              		@ frame_needed = 1, uses_anonymous_args = 0
 2139 0000 0DC0A0E1 		mov	ip, sp
 2140              	.LCFI0:
 2141              		.cfi_def_cfa_register 12
 2142 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2143 0008 04B04CE2 		sub	fp, ip, #4
 2144              		.cfi_offset 14, -8
 2145              		.cfi_offset 13, -12
 2146              		.cfi_offset 11, -16
 2147              	.LCFI1:
 2148              		.cfi_def_cfa 11, 4
 2149 000c 08D04DE2 		sub	sp, sp, #8
  38:../cola.c     ****     uint32_t i;
  39:../cola.c     **** 
  40:../cola.c     ****     for (i = 0; i < COLA_MAX_EVENTOS; i++)
 2150              		.loc 1 40 0
 2151 0010 0030A0E3 		mov	r3, #0
 2152 0014 10300BE5 		str	r3, [fp, #-16]
 2153 0018 210000EA 		b	.L2
 2154              	.L3:
  41:../cola.c     ****     {
  42:../cola.c     ****         cola_buffer[i].ID_evento = 0;
 2155              		.loc 1 42 0 discriminator 2
 2156 001c B0109FE5 		ldr	r1, .L4
 2157 0020 10201BE5 		ldr	r2, [fp, #-16]
 2158 0024 0230A0E1 		mov	r3, r2
 2159 0028 8330A0E1 		mov	r3, r3, asl #1
 2160 002c 023083E0 		add	r3, r3, r2
 2161 0030 0331A0E1 		mov	r3, r3, asl #2
 2162 0034 033081E0 		add	r3, r1, r3
 2163 0038 0020A0E3 		mov	r2, #0
 2164 003c 0020C3E5 		strb	r2, [r3, #0]
  43:../cola.c     ****         cola_buffer[i].instant = 0;
 2165              		.loc 1 43 0 discriminator 2
 2166 0040 8C009FE5 		ldr	r0, .L4
 2167 0044 10201BE5 		ldr	r2, [fp, #-16]
 2168 0048 0410A0E3 		mov	r1, #4
 2169 004c 0230A0E1 		mov	r3, r2
 2170 0050 8330A0E1 		mov	r3, r3, asl #1
 2171 0054 023083E0 		add	r3, r3, r2
 2172 0058 0331A0E1 		mov	r3, r3, asl #2
 2173 005c 033080E0 		add	r3, r0, r3
 2174 0060 013083E0 		add	r3, r3, r1
 2175 0064 0020A0E3 		mov	r2, #0
 2176 0068 002083E5 		str	r2, [r3, #0]
  44:../cola.c     ****         cola_buffer[i].auxData = 0;
 2177              		.loc 1 44 0 discriminator 2
 2178 006c 60009FE5 		ldr	r0, .L4
 2179 0070 10201BE5 		ldr	r2, [fp, #-16]
 2180 0074 0810A0E3 		mov	r1, #8
 2181 0078 0230A0E1 		mov	r3, r2
 2182 007c 8330A0E1 		mov	r3, r3, asl #1
 2183 0080 023083E0 		add	r3, r3, r2
 2184 0084 0331A0E1 		mov	r3, r3, asl #2
 2185 0088 033080E0 		add	r3, r0, r3
 2186 008c 013083E0 		add	r3, r3, r1
 2187 0090 0020A0E3 		mov	r2, #0
 2188 0094 002083E5 		str	r2, [r3, #0]
  40:../cola.c     ****     for (i = 0; i < COLA_MAX_EVENTOS; i++)
 2189              		.loc 1 40 0 discriminator 2
 2190 0098 10301BE5 		ldr	r3, [fp, #-16]
 2191 009c 013083E2 		add	r3, r3, #1
 2192 00a0 10300BE5 		str	r3, [fp, #-16]
 2193              	.L2:
  40:../cola.c     ****     for (i = 0; i < COLA_MAX_EVENTOS; i++)
 2194              		.loc 1 40 0 is_stmt 0 discriminator 1
 2195 00a4 10301BE5 		ldr	r3, [fp, #-16]
 2196 00a8 FF0053E3 		cmp	r3, #255
 2197 00ac DAFFFF9A 		bls	.L3
  45:../cola.c     ****     }
  46:../cola.c     ****     cola_indice_esc = 0;
 2198              		.loc 1 46 0 is_stmt 1
 2199 00b0 20309FE5 		ldr	r3, .L4+4
 2200 00b4 0020A0E3 		mov	r2, #0
 2201 00b8 002083E5 		str	r2, [r3, #0]
  47:../cola.c     ****     cola_num_eventos = 0;
 2202              		.loc 1 47 0
 2203 00bc 18309FE5 		ldr	r3, .L4+8
 2204 00c0 0020A0E3 		mov	r2, #0
 2205 00c4 002083E5 		str	r2, [r3, #0]
  48:../cola.c     **** }
 2206              		.loc 1 48 0
 2207 00c8 0CD04BE2 		sub	sp, fp, #12
 2208 00cc 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2209 00d0 1EFF2FE1 		bx	lr
 2210              	.L5:
 2211              		.align	2
 2212              	.L4:
 2213 00d4 00000000 		.word	cola_buffer
 2214 00d8 00000000 		.word	cola_indice_esc
 2215 00dc 04000000 		.word	cola_num_eventos
 2216              		.cfi_endproc
 2217              	.LFE0:
 2219              		.align	2
 2220              		.global	cola_depuracion
 2222              	cola_depuracion:
 2223              	.LFB1:
  49:../cola.c     **** 
  50:../cola.c     **** /**
  51:../cola.c     ****  * Inserta un evento en la cola de depuración.
  52:../cola.c     ****  * Parámetros:
  53:../cola.c     ****  *  - ID_evento: identificador del evento (1 byte).
  54:../cola.c     ****  *  - instant: timestamp (por ejemplo microsegundos) asociado al evento.
  55:../cola.c     ****  *  - auxData: dato auxiliar (p.ej. valor leído, ticks, etc.).
  56:../cola.c     ****  */
  57:../cola.c     **** void cola_depuracion(uint8_t ID_evento, uint32_t instant, uint32_t auxData)
  58:../cola.c     **** {
 2224              		.loc 1 58 0
 2225              		.cfi_startproc
 2226              		@ Function supports interworking.
 2227              		@ args = 0, pretend = 0, frame = 16
 2228              		@ frame_needed = 1, uses_anonymous_args = 0
 2229 00e0 0DC0A0E1 		mov	ip, sp
 2230              	.LCFI2:
 2231              		.cfi_def_cfa_register 12
 2232 00e4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2233 00e8 04B04CE2 		sub	fp, ip, #4
 2234              		.cfi_offset 14, -8
 2235              		.cfi_offset 13, -12
 2236              		.cfi_offset 11, -16
 2237              	.LCFI3:
 2238              		.cfi_def_cfa 11, 4
 2239 00ec 10D04DE2 		sub	sp, sp, #16
 2240 00f0 0030A0E1 		mov	r3, r0
 2241 00f4 14100BE5 		str	r1, [fp, #-20]
 2242 00f8 18200BE5 		str	r2, [fp, #-24]
 2243 00fc 0D304BE5 		strb	r3, [fp, #-13]
  59:../cola.c     ****     cola_buffer[cola_indice_esc].ID_evento = ID_evento;
 2244              		.loc 1 59 0
 2245 0100 BC309FE5 		ldr	r3, .L8
 2246 0104 002093E5 		ldr	r2, [r3, #0]
 2247 0108 B8109FE5 		ldr	r1, .L8+4
 2248 010c 0230A0E1 		mov	r3, r2
 2249 0110 8330A0E1 		mov	r3, r3, asl #1
 2250 0114 023083E0 		add	r3, r3, r2
 2251 0118 0331A0E1 		mov	r3, r3, asl #2
 2252 011c 033081E0 		add	r3, r1, r3
 2253 0120 0D205BE5 		ldrb	r2, [fp, #-13]
 2254 0124 0020C3E5 		strb	r2, [r3, #0]
  60:../cola.c     ****     cola_buffer[cola_indice_esc].instant = instant;
 2255              		.loc 1 60 0
 2256 0128 94309FE5 		ldr	r3, .L8
 2257 012c 002093E5 		ldr	r2, [r3, #0]
 2258 0130 90009FE5 		ldr	r0, .L8+4
 2259 0134 0410A0E3 		mov	r1, #4
 2260 0138 0230A0E1 		mov	r3, r2
 2261 013c 8330A0E1 		mov	r3, r3, asl #1
 2262 0140 023083E0 		add	r3, r3, r2
 2263 0144 0331A0E1 		mov	r3, r3, asl #2
 2264 0148 033080E0 		add	r3, r0, r3
 2265 014c 013083E0 		add	r3, r3, r1
 2266 0150 14201BE5 		ldr	r2, [fp, #-20]
 2267 0154 002083E5 		str	r2, [r3, #0]
  61:../cola.c     ****     cola_buffer[cola_indice_esc].auxData = auxData;
 2268              		.loc 1 61 0
 2269 0158 64309FE5 		ldr	r3, .L8
 2270 015c 002093E5 		ldr	r2, [r3, #0]
 2271 0160 60009FE5 		ldr	r0, .L8+4
 2272 0164 0810A0E3 		mov	r1, #8
 2273 0168 0230A0E1 		mov	r3, r2
 2274 016c 8330A0E1 		mov	r3, r3, asl #1
 2275 0170 023083E0 		add	r3, r3, r2
 2276 0174 0331A0E1 		mov	r3, r3, asl #2
 2277 0178 033080E0 		add	r3, r0, r3
 2278 017c 013083E0 		add	r3, r3, r1
 2279 0180 18201BE5 		ldr	r2, [fp, #-24]
 2280 0184 002083E5 		str	r2, [r3, #0]
  62:../cola.c     **** 
  63:../cola.c     ****     cola_indice_esc++;
 2281              		.loc 1 63 0
 2282 0188 34309FE5 		ldr	r3, .L8
 2283 018c 003093E5 		ldr	r3, [r3, #0]
 2284 0190 012083E2 		add	r2, r3, #1
 2285 0194 28309FE5 		ldr	r3, .L8
 2286 0198 002083E5 		str	r2, [r3, #0]
  64:../cola.c     **** 
  65:../cola.c     ****     if (cola_indice_esc >= COLA_MAX_EVENTOS)
 2287              		.loc 1 65 0
 2288 019c 20309FE5 		ldr	r3, .L8
 2289 01a0 003093E5 		ldr	r3, [r3, #0]
 2290 01a4 FF0053E3 		cmp	r3, #255
 2291 01a8 0200009A 		bls	.L6
  66:../cola.c     ****     {
  67:../cola.c     ****         cola_indice_esc = 0;
 2292              		.loc 1 67 0
 2293 01ac 10309FE5 		ldr	r3, .L8
 2294 01b0 0020A0E3 		mov	r2, #0
 2295 01b4 002083E5 		str	r2, [r3, #0]
 2296              	.L6:
  68:../cola.c     ****     }
  69:../cola.c     **** }
 2297              		.loc 1 69 0
 2298 01b8 0CD04BE2 		sub	sp, fp, #12
 2299 01bc 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2300 01c0 1EFF2FE1 		bx	lr
 2301              	.L9:
 2302              		.align	2
 2303              	.L8:
 2304 01c4 00000000 		.word	cola_indice_esc
 2305 01c8 00000000 		.word	cola_buffer
 2306              		.cfi_endproc
 2307              	.LFE1:
 2309              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 cola.c
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2116   .cola_debug:00000000 $d
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2119   .cola_debug:00000000 cola_buffer
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2122   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2123   .bss:00000000 cola_indice_esc
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2126   .bss:00000004 cola_num_eventos
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2129   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2132   .text:00000000 cola_init
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2213   .text:000000d4 $d
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2219   .text:000000e0 $a
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2222   .text:000000e0 cola_depuracion
C:\Users\jaime\AppData\Local\Temp\cc2gjxKc.s:2304   .text:000001c4 $d
                     .debug_frame:00000010 $d

NO UNDEFINED SYMBOLS
