   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"timer1.c"
  21              	.Ltext0:
  22              		.file 1 "../timer1.c"
 1890              		.align	2
 1891              	contador_eventos:
 1892 0000 00000000 		.space	4
 1893              		.text
 1894              		.align	2
 1895              		.global	timer1_ISR
 1897              	timer1_ISR:
 1898              	.LFB0:
   1:../timer1.c   **** /*
   2:../timer1.c   ****  * Asignatura: Proyecto hardware
   3:../timer1.c   ****  * Fecha: 10/11/2025
   4:../timer1.c   ****  * Autores: Claudia Mateo Cuellar 871961
   5:../timer1.c   ****  * Archivo: timer1.c
   6:../timer1.c   ****  * Descripción: Implementación de Timer1 para generar interrupciones periódicas y controlar el p
   7:../timer1.c   ****  */
   8:../timer1.c   **** 
   9:../timer1.c   **** #include "timer1.h"
  10:../timer1.c   **** #include "led.h"
  11:../timer1.c   **** #include "44b.h"
  12:../timer1.c   **** #include "44blib.h"
  13:../timer1.c   **** 
  14:../timer1.c   **** 
  15:../timer1.c   **** static volatile unsigned int contador_eventos = 0;
  16:../timer1.c   **** 
  17:../timer1.c   **** /**
  18:../timer1.c   ****  * ISR del Timer1
  19:../timer1.c   ****  * Ejecutada en cada underflow del Timer1. Incrementa el contador de
  20:../timer1.c   ****  * eventos y, cada N ocurrencias (establecido para lograr 6 Hz del LED),
  21:../timer1.c   ****  * alterna el estado del LED.
  22:../timer1.c   ****  */
  23:../timer1.c   **** void timer1_ISR(void) __attribute__((interrupt("IRQ")));
  24:../timer1.c   **** 
  25:../timer1.c   **** void timer1_ISR(void)
  26:../timer1.c   **** {
 1899              		.loc 1 26 0
 1900              		.cfi_startproc
 1901              		@ Interrupt Service Routine.
 1902              		@ args = 0, pretend = 0, frame = 0
 1903              		@ frame_needed = 1, uses_anonymous_args = 0
 1904 0000 04C02DE5 		str	ip, [sp, #-4]!
 1905 0004 0DC0A0E1 		mov	ip, sp
 1906              	.LCFI0:
 1907              		.cfi_def_cfa_register 12
 1908 0008 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 1909 000c 04B04CE2 		sub	fp, ip, #4
 1910              		.cfi_offset 14, -8
 1911              		.cfi_offset 13, -12
 1912              		.cfi_offset 11, -16
 1913              		.cfi_offset 3, -20
 1914              		.cfi_offset 2, -24
 1915              		.cfi_offset 1, -28
 1916              		.cfi_offset 0, -32
 1917              	.LCFI1:
 1918              		.cfi_def_cfa 11, 4
  27:../timer1.c   ****    contador_eventos++;
 1919              		.loc 1 27 0
 1920 0010 50309FE5 		ldr	r3, .L3
 1921 0014 003093E5 		ldr	r3, [r3, #0]
 1922 0018 012083E2 		add	r2, r3, #1
 1923 001c 44309FE5 		ldr	r3, .L3
 1924 0020 002083E5 		str	r2, [r3, #0]
  28:../timer1.c   **** 
  29:../timer1.c   ****    /*Queremos que genere 60 eventos por segundo, LED parpadea a 6 Hz
  30:../timer1.c   ****    (3 veces/segundo on/off) 60/6 = 10  */
  31:../timer1.c   ****    if (contador_eventos >= 10)
 1925              		.loc 1 31 0
 1926 0024 3C309FE5 		ldr	r3, .L3
 1927 0028 003093E5 		ldr	r3, [r3, #0]
 1928 002c 090053E3 		cmp	r3, #9
 1929 0030 0300009A 		bls	.L2
  32:../timer1.c   ****    {
  33:../timer1.c   ****       led2_switch();
 1930              		.loc 1 33 0
 1931 0034 FEFFFFEB 		bl	led2_switch
  34:../timer1.c   ****       contador_eventos = 0;
 1932              		.loc 1 34 0
 1933 0038 28309FE5 		ldr	r3, .L3
 1934 003c 0020A0E3 		mov	r2, #0
 1935 0040 002083E5 		str	r2, [r3, #0]
 1936              	.L2:
  35:../timer1.c   ****    }
  36:../timer1.c   **** 
  37:../timer1.c   ****    rI_ISPC |= BIT_TIMER1;
 1937              		.loc 1 37 0
 1938 0044 20309FE5 		ldr	r3, .L3+4
 1939 0048 1C209FE5 		ldr	r2, .L3+4
 1940 004c 002092E5 		ldr	r2, [r2, #0]
 1941 0050 012A82E3 		orr	r2, r2, #4096
 1942 0054 002083E5 		str	r2, [r3, #0]
  38:../timer1.c   **** }
 1943              		.loc 1 38 0
 1944 0058 1CD04BE2 		sub	sp, fp, #28
 1945 005c 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 1946 0060 04C09DE4 		ldmfd	sp!, {ip}
 1947 0064 04F05EE2 		subs	pc, lr, #4
 1948              	.L4:
 1949              		.align	2
 1950              	.L3:
 1951 0068 00000000 		.word	contador_eventos
 1952 006c 2400E001 		.word	31457316
 1953              		.cfi_endproc
 1954              	.LFE0:
 1956              		.align	2
 1957              		.global	timer1_init
 1959              	timer1_init:
 1960              	.LFB1:
  39:../timer1.c   **** 
  40:../timer1.c   **** /**
  41:../timer1.c   ****  * Inicializa Timer1 para generar interrupciones a ~60 Hz.
  42:../timer1.c   ****  *
  43:../timer1.c   ****  * Configuración:
  44:../timer1.c   ****  *  - Prescaler 255 -> divisor 256 sobre PCLK (66 MHz) => ~257812.5 Hz
  45:../timer1.c   ****  *  - División adicional por 4 mediante rTCFG1 para obtener ~64.45 kHz
  46:../timer1.c   ****  *  - rTCNTB1 se carga con 1074 para producir ~60 interrupciones por segundo
  47:../timer1.c   ****  *  - Se habilitan auto-reload y arranque del timer
  48:../timer1.c   ****  */
  49:../timer1.c   **** void timer1_init(void)
  50:../timer1.c   **** {
 1961              		.loc 1 50 0
 1962              		.cfi_startproc
 1963              		@ Function supports interworking.
 1964              		@ args = 0, pretend = 0, frame = 0
 1965              		@ frame_needed = 1, uses_anonymous_args = 0
 1966 0070 0DC0A0E1 		mov	ip, sp
 1967              	.LCFI2:
 1968              		.cfi_def_cfa_register 12
 1969 0074 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 1970 0078 04B04CE2 		sub	fp, ip, #4
 1971              		.cfi_offset 14, -8
 1972              		.cfi_offset 13, -12
 1973              		.cfi_offset 11, -16
 1974              	.LCFI3:
 1975              		.cfi_def_cfa 11, 4
  51:../timer1.c   ****    rINTMSK &= ~(BIT_TIMER1);
 1976              		.loc 1 51 0
 1977 007c 90309FE5 		ldr	r3, .L6
 1978 0080 8C209FE5 		ldr	r2, .L6
 1979 0084 002092E5 		ldr	r2, [r2, #0]
 1980 0088 012AC2E3 		bic	r2, r2, #4096
 1981 008c 002083E5 		str	r2, [r3, #0]
  52:../timer1.c   ****    pISR_TIMER1 = (unsigned)timer1_ISR;
 1982              		.loc 1 52 0
 1983 0090 80309FE5 		ldr	r3, .L6+4
 1984 0094 80209FE5 		ldr	r2, .L6+8
 1985 0098 002083E5 		str	r2, [r3, #0]
  53:../timer1.c   **** 
  54:../timer1.c   ****    rTCFG0 = 255;
 1986              		.loc 1 54 0
 1987 009c 7C309FE5 		ldr	r3, .L6+12
 1988 00a0 FF20A0E3 		mov	r2, #255
 1989 00a4 002083E5 		str	r2, [r3, #0]
  55:../timer1.c   ****    
  56:../timer1.c   ****    rTCFG1 = 0x10;
 1990              		.loc 1 56 0
 1991 00a8 74309FE5 		ldr	r3, .L6+16
 1992 00ac 1020A0E3 		mov	r2, #16
 1993 00b0 002083E5 		str	r2, [r3, #0]
  57:../timer1.c   **** 
  58:../timer1.c   ****    rTCNTB1 = 1074;
 1994              		.loc 1 58 0
 1995 00b4 6C309FE5 		ldr	r3, .L6+20
 1996 00b8 6C209FE5 		ldr	r2, .L6+24
 1997 00bc 002083E5 		str	r2, [r3, #0]
  59:../timer1.c   ****    rTCMPB1 = 0;
 1998              		.loc 1 59 0
 1999 00c0 68309FE5 		ldr	r3, .L6+28
 2000 00c4 0020A0E3 		mov	r2, #0
 2001 00c8 002083E5 		str	r2, [r3, #0]
  60:../timer1.c   **** 
  61:../timer1.c   ****    rTCON |= (1 << 9);
 2002              		.loc 1 61 0
 2003 00cc 60309FE5 		ldr	r3, .L6+32
 2004 00d0 5C209FE5 		ldr	r2, .L6+32
 2005 00d4 002092E5 		ldr	r2, [r2, #0]
 2006 00d8 022C82E3 		orr	r2, r2, #512
 2007 00dc 002083E5 		str	r2, [r3, #0]
  62:../timer1.c   ****    rTCON &= ~(1 << 9);
 2008              		.loc 1 62 0
 2009 00e0 4C309FE5 		ldr	r3, .L6+32
 2010 00e4 48209FE5 		ldr	r2, .L6+32
 2011 00e8 002092E5 		ldr	r2, [r2, #0]
 2012 00ec 022CC2E3 		bic	r2, r2, #512
 2013 00f0 002083E5 		str	r2, [r3, #0]
  63:../timer1.c   **** 
  64:../timer1.c   ****    rTCON |= (0x9 << 8);
 2014              		.loc 1 64 0
 2015 00f4 38309FE5 		ldr	r3, .L6+32
 2016 00f8 34209FE5 		ldr	r2, .L6+32
 2017 00fc 002092E5 		ldr	r2, [r2, #0]
 2018 0100 092C82E3 		orr	r2, r2, #2304
 2019 0104 002083E5 		str	r2, [r3, #0]
  65:../timer1.c   **** }
 2020              		.loc 1 65 0
 2021 0108 0CD04BE2 		sub	sp, fp, #12
 2022 010c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2023 0110 1EFF2FE1 		bx	lr
 2024              	.L7:
 2025              		.align	2
 2026              	.L6:
 2027 0114 0C00E001 		.word	31457292
 2028 0118 50FF7F0C 		.word	209715024
 2029 011c 00000000 		.word	timer1_ISR
 2030 0120 0000D501 		.word	30736384
 2031 0124 0400D501 		.word	30736388
 2032 0128 1800D501 		.word	30736408
 2033 012c 32040000 		.word	1074
 2034 0130 1C00D501 		.word	30736412
 2035 0134 0800D501 		.word	30736392
 2036              		.cfi_endproc
 2037              	.LFE1:
 2039              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 timer1.c
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1890   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1891   .bss:00000000 contador_eventos
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1894   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1897   .text:00000000 timer1_ISR
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1951   .text:00000068 $d
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1956   .text:00000070 $a
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:1959   .text:00000070 timer1_init
C:\Users\jaime\AppData\Local\Temp\cc171QDk.s:2027   .text:00000114 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
led2_switch
