   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"timer2.c"
  21              	.Ltext0:
  22              		.file 1 "../timer2.c"
 2721              		.align	2
 2722              	timer2_numero_int:
 2723 0000 00000000 		.space	4
 2724              		.comm	tiempo_inicio,4,4
 2725              		.comm	tiempo_fin,4,4
 2726              		.comm	resta,4,4
 2727              		.text
 2728              		.align	2
 2729              		.global	timer2_ISR
 2731              	timer2_ISR:
 2732              	.LFB2:
   1:../timer2.c   **** /*
   2:../timer2.c   ****  * Asignatura: Proyecto hardware
   3:../timer2.c   ****  * Fecha: 10/11/2025
   4:../timer2.c   ****  * Autores: Claudia Mateo Cuellar 871961
   5:../timer2.c   ****  * Archivo: timer2.c
   6:../timer2.c   ****  * Descripción: Implementación de Timer2 para generar interrupciones periódicas y gestionar el a
   7:../timer2.c   ****  */
   8:../timer2.c   **** 
   9:../timer2.c   **** #include "timer2.h"
  10:../timer2.c   **** #include "44b.h"
  11:../timer2.c   **** #include "44blib.h"
  12:../timer2.c   **** #include "button.h"
  13:../timer2.c   **** #include "44b.h"
  14:../timer2.c   **** 
  15:../timer2.c   **** static volatile unsigned int timer2_numero_int = 0;
  16:../timer2.c   **** volatile uint32_t tiempo_inicio;
  17:../timer2.c   **** volatile uint32_t tiempo_fin;
  18:../timer2.c   **** volatile uint32_t resta;
  19:../timer2.c   **** 
  20:../timer2.c   **** /**
  21:../timer2.c   ****  * ISR de Timer2
  22:../timer2.c   ****  *
  23:../timer2.c   ****  * Descripción:
  24:../timer2.c   ****  *  - Ejecutada en cada interrupción de Timer2.
  25:../timer2.c   ****  *  - Incrementa el contador interno de interrupciones y llama a las
  26:../timer2.c   ****  *    rutinas que procesan el antirrebote de botones y el teclado.
  27:../timer2.c   ****  */
  28:../timer2.c   **** void timer2_ISR(void) __attribute__((interrupt("IRQ")));
  29:../timer2.c   **** void timer2_ISR(void)
  30:../timer2.c   **** {
 2733              		.loc 1 30 0
 2734              		.cfi_startproc
 2735              		@ Interrupt Service Routine.
 2736              		@ args = 0, pretend = 0, frame = 0
 2737              		@ frame_needed = 1, uses_anonymous_args = 0
 2738 0000 04C02DE5 		str	ip, [sp, #-4]!
 2739 0004 0DC0A0E1 		mov	ip, sp
 2740              	.LCFI0:
 2741              		.cfi_def_cfa_register 12
 2742 0008 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 2743 000c 04B04CE2 		sub	fp, ip, #4
 2744              		.cfi_offset 14, -8
 2745              		.cfi_offset 13, -12
 2746              		.cfi_offset 11, -16
 2747              		.cfi_offset 3, -20
 2748              		.cfi_offset 2, -24
 2749              		.cfi_offset 1, -28
 2750              		.cfi_offset 0, -32
 2751              	.LCFI1:
 2752              		.cfi_def_cfa 11, 4
  31:../timer2.c   ****     timer2_numero_int++;
 2753              		.loc 1 31 0
 2754 0010 38309FE5 		ldr	r3, .L2
 2755 0014 003093E5 		ldr	r3, [r3, #0]
 2756 0018 012083E2 		add	r2, r3, #1
 2757 001c 2C309FE5 		ldr	r3, .L2
 2758 0020 002083E5 		str	r2, [r3, #0]
  32:../timer2.c   **** 
  33:../timer2.c   ****     procesar_antirebote_botones();
 2759              		.loc 1 33 0
 2760 0024 FEFFFFEB 		bl	procesar_antirebote_botones
  34:../timer2.c   ****     procesar_teclado();
 2761              		.loc 1 34 0
 2762 0028 FEFFFFEB 		bl	procesar_teclado
  35:../timer2.c   **** 
  36:../timer2.c   ****     rI_ISPC |= BIT_TIMER2;
 2763              		.loc 1 36 0
 2764 002c 20309FE5 		ldr	r3, .L2+4
 2765 0030 1C209FE5 		ldr	r2, .L2+4
 2766 0034 002092E5 		ldr	r2, [r2, #0]
 2767 0038 022B82E3 		orr	r2, r2, #2048
 2768 003c 002083E5 		str	r2, [r3, #0]
  37:../timer2.c   **** }
 2769              		.loc 1 37 0
 2770 0040 1CD04BE2 		sub	sp, fp, #28
 2771 0044 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 2772 0048 04C09DE4 		ldmfd	sp!, {ip}
 2773 004c 04F05EE2 		subs	pc, lr, #4
 2774              	.L3:
 2775              		.align	2
 2776              	.L2:
 2777 0050 00000000 		.word	timer2_numero_int
 2778 0054 2400E001 		.word	31457316
 2779              		.cfi_endproc
 2780              	.LFE2:
 2782              		.align	2
 2783              		.global	timer2_init
 2785              	timer2_init:
 2786              	.LFB3:
  38:../timer2.c   **** 
  39:../timer2.c   **** /**
  40:../timer2.c   ****  * Inicializa Timer2
  41:../timer2.c   ****  * Configura:
  42:../timer2.c   ****  *  - modo de interrupción vectorizada (IRQ),
  43:../timer2.c   ****  *  - prescaler/MUX para el timer2,
  44:../timer2.c   ****  *  - carga de registros TCNTB2/TCMPB2 y manual update.
  45:../timer2.c   ****  */
  46:../timer2.c   **** void timer2_init(void)
  47:../timer2.c   **** {
 2787              		.loc 1 47 0
 2788              		.cfi_startproc
 2789              		@ Function supports interworking.
 2790              		@ args = 0, pretend = 0, frame = 0
 2791              		@ frame_needed = 1, uses_anonymous_args = 0
 2792 0058 0DC0A0E1 		mov	ip, sp
 2793              	.LCFI2:
 2794              		.cfi_def_cfa_register 12
 2795 005c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2796 0060 04B04CE2 		sub	fp, ip, #4
 2797              		.cfi_offset 14, -8
 2798              		.cfi_offset 13, -12
 2799              		.cfi_offset 11, -16
 2800              	.LCFI3:
 2801              		.cfi_def_cfa 11, 4
  48:../timer2.c   ****     rINTMOD = 0x0; /* IRQ vect. */
 2802              		.loc 1 48 0
 2803 0064 A4309FE5 		ldr	r3, .L5
 2804 0068 0020A0E3 		mov	r2, #0
 2805 006c 002083E5 		str	r2, [r3, #0]
  49:../timer2.c   ****     rINTCON = 0x1; /* enable vectored IRQs */
 2806              		.loc 1 49 0
 2807 0070 1E36A0E3 		mov	r3, #31457280
 2808 0074 0120A0E3 		mov	r2, #1
 2809 0078 002083E5 		str	r2, [r3, #0]
  50:../timer2.c   ****     rINTMSK &= ~(BIT_TIMER2);
 2810              		.loc 1 50 0
 2811 007c 90309FE5 		ldr	r3, .L5+4
 2812 0080 8C209FE5 		ldr	r2, .L5+4
 2813 0084 002092E5 		ldr	r2, [r2, #0]
 2814 0088 022BC2E3 		bic	r2, r2, #2048
 2815 008c 002083E5 		str	r2, [r3, #0]
  51:../timer2.c   **** 
  52:../timer2.c   ****     pISR_TIMER2 = (unsigned)timer2_ISR;
 2816              		.loc 1 52 0
 2817 0090 80309FE5 		ldr	r3, .L5+8
 2818 0094 80209FE5 		ldr	r2, .L5+12
 2819 0098 002083E5 		str	r2, [r3, #0]
  53:../timer2.c   **** 
  54:../timer2.c   ****     rTCFG0 = (rTCFG0 & ~(0xF << 8)) | (0x0 << 8);
 2820              		.loc 1 54 0
 2821 009c 7C309FE5 		ldr	r3, .L5+16
 2822 00a0 78209FE5 		ldr	r2, .L5+16
 2823 00a4 002092E5 		ldr	r2, [r2, #0]
 2824 00a8 0F2CC2E3 		bic	r2, r2, #3840
 2825 00ac 002083E5 		str	r2, [r3, #0]
  55:../timer2.c   ****     rTCFG1 = (rTCFG1 & ~(0xF << 8)) | (0x0 << 8);
 2826              		.loc 1 55 0
 2827 00b0 6C309FE5 		ldr	r3, .L5+20
 2828 00b4 68209FE5 		ldr	r2, .L5+20
 2829 00b8 002092E5 		ldr	r2, [r2, #0]
 2830 00bc 0F2CC2E3 		bic	r2, r2, #3840
 2831 00c0 002083E5 		str	r2, [r3, #0]
  56:../timer2.c   **** 
  57:../timer2.c   ****     rTCNTB2 = 0xFFFF;
 2832              		.loc 1 57 0
 2833 00c4 5C309FE5 		ldr	r3, .L5+24
 2834 00c8 5C209FE5 		ldr	r2, .L5+28
 2835 00cc 002083E5 		str	r2, [r3, #0]
  58:../timer2.c   ****     rTCMPB2 = 0;
 2836              		.loc 1 58 0
 2837 00d0 58309FE5 		ldr	r3, .L5+32
 2838 00d4 0020A0E3 		mov	r2, #0
 2839 00d8 002083E5 		str	r2, [r3, #0]
  59:../timer2.c   **** 
  60:../timer2.c   ****     rTCON |= (1 << 13);
 2840              		.loc 1 60 0
 2841 00dc 50309FE5 		ldr	r3, .L5+36
 2842 00e0 4C209FE5 		ldr	r2, .L5+36
 2843 00e4 002092E5 		ldr	r2, [r2, #0]
 2844 00e8 022A82E3 		orr	r2, r2, #8192
 2845 00ec 002083E5 		str	r2, [r3, #0]
  61:../timer2.c   ****     rTCON &= ~(1 << 13);
 2846              		.loc 1 61 0
 2847 00f0 3C309FE5 		ldr	r3, .L5+36
 2848 00f4 38209FE5 		ldr	r2, .L5+36
 2849 00f8 002092E5 		ldr	r2, [r2, #0]
 2850 00fc 022AC2E3 		bic	r2, r2, #8192
 2851 0100 002083E5 		str	r2, [r3, #0]
  62:../timer2.c   **** }
 2852              		.loc 1 62 0
 2853 0104 0CD04BE2 		sub	sp, fp, #12
 2854 0108 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2855 010c 1EFF2FE1 		bx	lr
 2856              	.L6:
 2857              		.align	2
 2858              	.L5:
 2859 0110 0800E001 		.word	31457288
 2860 0114 0C00E001 		.word	31457292
 2861 0118 4CFF7F0C 		.word	209715020
 2862 011c 00000000 		.word	timer2_ISR
 2863 0120 0000D501 		.word	30736384
 2864 0124 0400D501 		.word	30736388
 2865 0128 2400D501 		.word	30736420
 2866 012c FFFF0000 		.word	65535
 2867 0130 2800D501 		.word	30736424
 2868 0134 0800D501 		.word	30736392
 2869              		.cfi_endproc
 2870              	.LFE3:
 2872              		.align	2
 2873              		.global	timer2_start
 2875              	timer2_start:
 2876              	.LFB4:
  63:../timer2.c   **** 
  64:../timer2.c   **** /**
  65:../timer2.c   ****  * Inicia Timer2
  66:../timer2.c   ****  * Acciones:
  67:../timer2.c   ****  *  - (Re)inicializa contador interno,
  68:../timer2.c   ****  *  - recarga TCNTB2 y realiza manual update,
  69:../timer2.c   ****  *  - pone el timer en modo start con auto-reload.
  70:../timer2.c   ****  */
  71:../timer2.c   **** void timer2_start(void)
  72:../timer2.c   **** {
 2877              		.loc 1 72 0
 2878              		.cfi_startproc
 2879              		@ Function supports interworking.
 2880              		@ args = 0, pretend = 0, frame = 0
 2881              		@ frame_needed = 1, uses_anonymous_args = 0
 2882 0138 0DC0A0E1 		mov	ip, sp
 2883              	.LCFI4:
 2884              		.cfi_def_cfa_register 12
 2885 013c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2886 0140 04B04CE2 		sub	fp, ip, #4
 2887              		.cfi_offset 14, -8
 2888              		.cfi_offset 13, -12
 2889              		.cfi_offset 11, -16
 2890              	.LCFI5:
 2891              		.cfi_def_cfa 11, 4
  73:../timer2.c   ****     timer2_numero_int = 0;
 2892              		.loc 1 73 0
 2893 0144 80309FE5 		ldr	r3, .L8
 2894 0148 0020A0E3 		mov	r2, #0
 2895 014c 002083E5 		str	r2, [r3, #0]
  74:../timer2.c   **** 
  75:../timer2.c   ****     rTCNTB2 = 0xFFFF;
 2896              		.loc 1 75 0
 2897 0150 78309FE5 		ldr	r3, .L8+4
 2898 0154 78209FE5 		ldr	r2, .L8+8
 2899 0158 002083E5 		str	r2, [r3, #0]
  76:../timer2.c   ****     rTCON |= (1 << 13);
 2900              		.loc 1 76 0
 2901 015c 74309FE5 		ldr	r3, .L8+12
 2902 0160 70209FE5 		ldr	r2, .L8+12
 2903 0164 002092E5 		ldr	r2, [r2, #0]
 2904 0168 022A82E3 		orr	r2, r2, #8192
 2905 016c 002083E5 		str	r2, [r3, #0]
  77:../timer2.c   ****     rTCON &= ~(1 << 13);
 2906              		.loc 1 77 0
 2907 0170 60309FE5 		ldr	r3, .L8+12
 2908 0174 5C209FE5 		ldr	r2, .L8+12
 2909 0178 002092E5 		ldr	r2, [r2, #0]
 2910 017c 022AC2E3 		bic	r2, r2, #8192
 2911 0180 002083E5 		str	r2, [r3, #0]
  78:../timer2.c   **** 
  79:../timer2.c   ****     rTCON &= ~(1 << 12);
 2912              		.loc 1 79 0
 2913 0184 4C309FE5 		ldr	r3, .L8+12
 2914 0188 48209FE5 		ldr	r2, .L8+12
 2915 018c 002092E5 		ldr	r2, [r2, #0]
 2916 0190 012AC2E3 		bic	r2, r2, #4096
 2917 0194 002083E5 		str	r2, [r3, #0]
  80:../timer2.c   ****     rTCON |= (1 << 12);
 2918              		.loc 1 80 0
 2919 0198 38309FE5 		ldr	r3, .L8+12
 2920 019c 34209FE5 		ldr	r2, .L8+12
 2921 01a0 002092E5 		ldr	r2, [r2, #0]
 2922 01a4 012A82E3 		orr	r2, r2, #4096
 2923 01a8 002083E5 		str	r2, [r3, #0]
  81:../timer2.c   **** 
  82:../timer2.c   ****     rTCON |= (1 << 15);
 2924              		.loc 1 82 0
 2925 01ac 24309FE5 		ldr	r3, .L8+12
 2926 01b0 20209FE5 		ldr	r2, .L8+12
 2927 01b4 002092E5 		ldr	r2, [r2, #0]
 2928 01b8 022982E3 		orr	r2, r2, #32768
 2929 01bc 002083E5 		str	r2, [r3, #0]
  83:../timer2.c   **** }
 2930              		.loc 1 83 0
 2931 01c0 0CD04BE2 		sub	sp, fp, #12
 2932 01c4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2933 01c8 1EFF2FE1 		bx	lr
 2934              	.L9:
 2935              		.align	2
 2936              	.L8:
 2937 01cc 00000000 		.word	timer2_numero_int
 2938 01d0 2400D501 		.word	30736420
 2939 01d4 FFFF0000 		.word	65535
 2940 01d8 0800D501 		.word	30736392
 2941              		.cfi_endproc
 2942              	.LFE4:
 2944              		.align	2
 2945              		.global	timer2_count
 2947              	timer2_count:
 2948              	.LFB5:
  84:../timer2.c   **** 
  85:../timer2.c   **** /**
  86:../timer2.c   ****  * timer2_count
  87:../timer2.c   ****  * Devuelve un valor de tiempo relativo (µs aproximados) basado en el
  88:../timer2.c   ****  * número de underflows y el valor actual del contador del Timer2.
  89:../timer2.c   ****  * Retorno:
  90:../timer2.c   ****  *  - tiempo en microsegundos (aproximado). Ajustar divisor si la
  91:../timer2.c   ****  *    relación ticks/µs difiere en tu plataforma.
  92:../timer2.c   ****  */
  93:../timer2.c   **** unsigned int timer2_count(void)
  94:../timer2.c   **** {
 2949              		.loc 1 94 0
 2950              		.cfi_startproc
 2951              		@ Function supports interworking.
 2952              		@ args = 0, pretend = 0, frame = 16
 2953              		@ frame_needed = 1, uses_anonymous_args = 0
 2954 01dc 0DC0A0E1 		mov	ip, sp
 2955              	.LCFI6:
 2956              		.cfi_def_cfa_register 12
 2957 01e0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2958 01e4 04B04CE2 		sub	fp, ip, #4
 2959              		.cfi_offset 14, -8
 2960              		.cfi_offset 13, -12
 2961              		.cfi_offset 11, -16
 2962              	.LCFI7:
 2963              		.cfi_def_cfa 11, 4
 2964 01e8 10D04DE2 		sub	sp, sp, #16
  95:../timer2.c   ****     unsigned int val;
  96:../timer2.c   ****     unsigned int entero;
  97:../timer2.c   ****     unsigned long ticks;
  98:../timer2.c   ****     val = rTCNTO2;
 2965              		.loc 1 98 0
 2966 01ec 40309FE5 		ldr	r3, .L11
 2967 01f0 003093E5 		ldr	r3, [r3, #0]
 2968 01f4 10300BE5 		str	r3, [fp, #-16]
  99:../timer2.c   ****     entero = timer2_numero_int;
 2969              		.loc 1 99 0
 2970 01f8 38309FE5 		ldr	r3, .L11+4
 2971 01fc 003093E5 		ldr	r3, [r3, #0]
 2972 0200 14300BE5 		str	r3, [fp, #-20]
 100:../timer2.c   ****     ticks = (unsigned long)entero * 65536 + (unsigned long)(65535 - val + 1);
 2973              		.loc 1 100 0
 2974 0204 14301BE5 		ldr	r3, [fp, #-20]
 2975 0208 0328A0E1 		mov	r2, r3, asl #16
 2976 020c 10301BE5 		ldr	r3, [fp, #-16]
 2977 0210 023063E0 		rsb	r3, r3, r2
 2978 0214 013883E2 		add	r3, r3, #65536
 2979 0218 18300BE5 		str	r3, [fp, #-24]
 101:../timer2.c   **** 
 102:../timer2.c   ****     return (unsigned int)(ticks / 32);
 2980              		.loc 1 102 0
 2981 021c 18301BE5 		ldr	r3, [fp, #-24]
 2982 0220 A332A0E1 		mov	r3, r3, lsr #5
 103:../timer2.c   **** }
 2983              		.loc 1 103 0
 2984 0224 0300A0E1 		mov	r0, r3
 2985 0228 0CD04BE2 		sub	sp, fp, #12
 2986 022c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2987 0230 1EFF2FE1 		bx	lr
 2988              	.L12:
 2989              		.align	2
 2990              	.L11:
 2991 0234 2C00D501 		.word	30736428
 2992 0238 00000000 		.word	timer2_numero_int
 2993              		.cfi_endproc
 2994              	.LFE5:
 2996              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 timer2.c
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2721   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2722   .bss:00000000 timer2_numero_int
                            *COM*:00000004 tiempo_inicio
                            *COM*:00000004 tiempo_fin
                            *COM*:00000004 resta
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2728   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2731   .text:00000000 timer2_ISR
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2777   .text:00000050 $d
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2782   .text:00000058 $a
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2785   .text:00000058 timer2_init
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2859   .text:00000110 $d
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2872   .text:00000138 $a
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2875   .text:00000138 timer2_start
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2937   .text:000001cc $d
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2944   .text:000001dc $a
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2947   .text:000001dc timer2_count
C:\Users\jaime\AppData\Local\Temp\ccsWhBqf.s:2991   .text:00000234 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
procesar_antirebote_botones
procesar_teclado
